<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#111111" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="description" content="NephroCalc Pro - Clinical Nephrology Decision Support" />
  <title>NephroCalc Pro</title>
  <style>
    body { margin: 0; font-family: sans-serif; }
    #loading { display:flex; align-items:center; justify-content:center; 
               min-height:100vh; background:#f7f8fa; flex-direction:column; gap:12px; }
    .spinner { width:32px; height:32px; border:3px solid #e0e3ea; 
               border-top-color:#111; border-radius:50%; animation:spin 0.8s linear infinite; }
    @keyframes spin { to { transform:rotate(360deg); } }
    .err { padding:40px; font-family:monospace; max-width:600px; word-break:break-word; }
    .err h3 { color:#dc2626; }
  </style>
</head>
<body>
  <div id="root">
    <div id="loading">
      <div class="spinner"></div>
      <div style="font-size:13px;color:#888;">Loading NephroCalc Pro...</div>
      <div style="font-size:10px;color:#ccc;">71 calculators - 18 sections</div>
    </div>
  </div>
  <script>
    window.onerror = function(msg, url, line) {
      var r = document.getElementById("root");
      if(r) r.innerHTML = '<div class="err"><h3>Load Error</h3><p>'+msg+'</p><p style="color:#888">Try refreshing.</p></div>';
    };
    function loadScript(src, cb) {
      var s = document.createElement("script");
      s.src = src; s.onload = cb;
      s.onerror = function() {
        document.getElementById("root").innerHTML = 
          '<div class="err"><h3>Network Error</h3><p>Could not load: '+src+'</p><p style="color:#888">Check internet connection and refresh.</p></div>';
      };
      document.head.appendChild(s);
    }
    loadScript("https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js", function() {
      loadScript("https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js", function() {
        loadScript("https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.24.4/babel.min.js", function() {
          try {
            var jsxCode = atob(document.getElementById("app-source").textContent.trim());
            var compiled = Babel.transform(jsxCode, { presets: ["react"] }).code;
            new Function(compiled)();
          } catch(e) {
            document.getElementById("root").innerHTML = 
              '<div class="err"><h3>Compilation Error</h3><p>'+e.message+'</p><p style="color:#888">Please report this error.</p></div>';
          }
        });
      });
    });
  </script>
  <script id="app-source" type="text/plain">Y29uc3QgeyB1c2VTdGF0ZSB9ID0gUmVhY3Q7CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gKGMpIDIwMjYgRHIuIEFzaGlzaCBQYXRlbC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KLy8gUGVlciBSZXZpZXdlcnM6IFsgICAgICAgICAgICAgICAgICAgIF0gWyAgICAgICAgICAgICAgICAgICAgXSBbICAgICAgICAgICAgICAgICAgICBdCi8vCi8vIFBSSU1BUlkgU09VUkNFIFZFUklGSUNBVElPTiBMT0cKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyAjMSAgQ0tELUVQSSAyMDIxICAgICBJbmtlciBMQSBldCBhbC4gTkVKTSAyMDIxOzM4NToxNzM3LTE3NDkKLy8gIzIgIENvY2tjcm9mdC1HYXVsdCAgQ29ja2Nyb2Z0IERXLCBHYXVsdCBNSC4gTmVwaHJvbiAxOTc2OzE2OjMxLTQxCi8vICMzICBTY2h3YXJ0eiBSZXYuICAgIFNjaHdhcnR6IEdKIGV0IGFsLiBKQVNOIDIwMDk7MjA6NjI5LTYzNwovLyAjNCAgTWVhcyBDckNsICAgICAgICBTdGFuZGFyZCByZW5hbCBwaHlzaW9sb2d5Ci8vICM1ICBHZW4gQ2xlYXJhbmNlICAgIFN0YW5kYXJkIHJlbmFsIHBoeXNpb2xvZ3kKLy8gIzYgIEVSUEYvUEFIICAgICAgICAgU21pdGggSFcuIFBoeXNpb2xvZ3kgb2YgdGhlIEtpZG5leSwgMTkzNwovLyAjNyAgRmlsdHJhdGlvbiBGcmFjLiBTdGFuZGFyZCByZW5hbCBwaHlzaW9sb2d5Ci8vICM4ICBOZXQgRmlsdCBQcmVzLiAgIEd1eXRvbiAmIEhhbGwgTWVkaWNhbCBQaHlzaW9sb2d5Ci8vICM5ICBTdGFybGluZyBFcS4gICAgIFN0YXJsaW5nIEVILiBKIFBoeXNpb2wgMTg5NjsxOTozMTItMzI2Ci8vICMxMCBPbmNvdGljIFByZXMuICAgIFp3ZWlmYWNoICYgSW50YWdsaWV0dGEuIE1pY3JvdmFzYyBSZXMgMTk2OAovLyAjMTExIE1laHJhbiBDSU4gICAgICBNZWhyYW4gUiBldCBhbC4gSkFDQyAyMDA0OzQ0OjEzOTMtMTM5OQovLyAjMTEyIE1jTWFob24gICAgICAgICBNY01haG9uIEdNIGV0IGFsLiBBbm4gSW50ZXJuIE1lZCAyMDEzOzE1ODo1NjAKLy8gIzExMyBLRlJFIDQtdmFyICAgICAgVGFuZ3JpIE4gZXQgYWwuIEpBTUEgMjAxMTszMDU6MTU1My0xNTU5Ci8vICMxMTQgS0ZSRSA4LXZhciAgICAgIFRhbmdyaSBOIGV0IGFsLiBKQU1BIDIwMTEgKDgtdmFyKQovLyAjMTE1IFNTSUdOICAgICAgICAgICBGcmFuayBJIGV0IGFsLiBKIFVyb2wgMjAwMjsxNjg6MjM5NS0yNDAwCi8vICMxMTYgTGVpYm92aWNoICAgICAgIExlaWJvdmljaCBCQyBldCBhbC4gQ2FuY2VyIDIwMDM7OTc6MTY2My0xNjcxCi8vICMxMTcgSU1EQyAgICAgICAgICAgIEhlbmcgRFkgZXQgYWwuIExhbmNldCBPbmNvbCAyMDA5OzEwOjEyNDAtMTI0NwovLyAjMTE4IE1TS0NDL01vdHplciAgICBNb3R6ZXIgUkogZXQgYWwuIEpDTyAxOTk5OzE3OjI1MzAtMjU0MAovLyAjMTE5IFJFTkFMIE5lcGguICAgICBLdXRpa292IEEsIFV6em8gUkcuIEogVXJvbCAyMDA5OzE4Mjo4NDQtODUzCi8vICMxMjAgU1RPTkUgU2NvcmUgICAgIE1vb3JlIENMIGV0IGFsLiBCTUogMjAxNDszNDg6ZzIxOTEKLy8gIzEyMSBDUC1BS0kgICAgICAgICAgTGF1bmF5LVZhY2hlciBWIGV0IGFsLiAobG9naXN0aWMgZnJhbWV3b3JrKQovLyAjMTIyIENpc3BsYXRpbiBBS0kgICBDcm9uYSBESiBldCBhbC4gT25jb2xvZ2lzdCAyMDE3IChsb2dpc3RpYyBmcmFtZXdvcmspCi8vICMxMjMgTGljdXJzZSAgICAgICAgIExpY3Vyc2UgQSBldCBhbC4gQXJjaCBJbnRlcm4gTWVkIDIwMTA7MTcwOjE5MDAKLy8gIzEyNCBOUlBFICAgICAgICAgICAgVGVzdGFuaSBKTSBldCBhbC4gQ2lyYyBIZWFydCBGYWlsIDIwMTQKLy8gIzEyNSBISVYgQ0tEICAgICAgICAgTW9jcm9mdCBBIGV0IGFsLiBMYW5jZXQgMjAwMzszNjI6MjAzLTIwOQovLyAjMTI2IENLaUQgVTI1ICAgICAgICBQaWVyY2UgQ0IgZXQgYWwuIEtpZG5leSBJbnQgMjAyMTs5OTo2MjItNjMwCi8vICMxMjcgTUVMRCAgICAgICAgICAgIEthbWF0aCBQUyBldCBhbC4gSGVwYXRvbG9neSAyMDAxOzMzOjQ2NC00NzAKLy8gIzEyOCBNRUxELU5hICAgICAgICAgS2ltIFdSIGV0IGFsLiBORUpNIDIwMDg7MzU5OjEwMTgtMTAyNiAoVU5PUyBNRUxELU5hIGZvcm11bGEpCi8vICMxMjkgU0FBRyAgICAgICAgICAgIFJ1bnlvbiBCQSBldCBhbC4gQW5uIEludGVybiBNZWQgMTk5MjsxMTc6MjE1LTIyMAovLyAjMTMwIFNCUCBQTU4gICAgICAgICBFQVNMIEd1aWRlbGluZXMgMjAxODsgUmltb2xhIGV0IGFsLgovLyAjMTMxIFBSQSAgICAgICAgICAgICBTZWFsZXkgSkUsIExhcmFnaCBKSC4gSHlwZXJ0ZW5zaW9uIDE5OTAKLy8gIzEzMiBBUlIgICAgICAgICAgICAgRnVuZGVyIEpXIGV0IGFsLiBKQ0VNIDIwMTY7MTAxOjE4ODktMTkxNgovLyAjMTMzIFJlbmluIFBoZW5vdHlwZSBMYXJhZ2ggSkguIEFtIEogTWVkIDE5NzgKLy8gIzEzNCBQUkEgRHJ1ZyBSdWxlICAgV2lsbGlhbXMgQiBldCBhbC4gQk1KIDIwMDQ7MzI4OjYzNAovLyAjMTM1IFJBQVMgSW5kZXggICAgICBMYXJhZ2ggSkguIEFtIEhlYXJ0IEogMTk4OQovLyAjMTM2IE1SIEV4Y2VzcyAgICAgICBGdW5kZXIgSlcgZXQgYWwuIEpDRU0gMjAxNgovLyAjMTM3IFJlc2lzdGFudCBIVE4gICBDYXJleSBSTSBldCBhbC4gSHlwZXJ0ZW5zaW9uIDIwMTg7NzI6ZTUzLWU5MAovLyAjMTM4IFRydWUgUmVzaXN0YW50ICBDYXJleSBSTSBldCBhbC4gSHlwZXJ0ZW5zaW9uIDIwMTgKLy8gIzEzOSBSRE4gRWxpZ2liaWxpdHkgTWFoZm91ZCBGIGV0IGFsLiBFdXIgSGVhcnQgSiAyMDE5Ci8vICMxNDAgU3ltcGF0aGV0aWMgSWR4IEVzbGVyIE0gZXQgYWwuIEh5cGVydGVuc2lvbiAyMDEwCi8vICMxNDEgUkNDIFQtU3RhZ2UgICAgIEFKQ0MgQ2FuY2VyIFN0YWdpbmcgTWFudWFsIDh0aCBFZC4gMjAxNwovLyAjMTQyIFROTSBDb21wb3NpdGUgICBBSkNDIDh0aCBFZC4gMjAxNwovLyAjMTQzIFN1cmdpY2FsIFJ1bGUgICBDYW1wYmVsbCBTQyBldCBhbC4gSiBVcm9sIDIwMDkKLy8gIzE0NCBSQ0MgU3VydmVpbGxhbmNlIE1vdHplciBSSiBldCBhbC4gTkNDTiBHdWlkZWxpbmVzCi8vICMxNDUgbVJDQyBUcmVhdG1lbnQgIE5DQ04vRVNNTyBHdWlkZWxpbmVzIDIwMjMKLy8gIzE0NiBDb3JyZWN0ZWQgQ2EgICAgUGF5bmUgUkIgZXQgYWwuIExhbmNldCAxOTczOzI6ODMtODYKLy8gIzE0NyBDYXhQaG9zICAgICAgICAgS0RJR08gQ0tELU1CRCBHdWlkZWxpbmUgMjAxNwovLyAjMTQ4IFBUSCBNb2RlbCAgICAgICBLRElHTyBDS0QtTUJEIDIwMTcKLy8gIzE0OSBlR0ZSLVBob3MgICAgICAgS0RJR08gQ0tELU1CRCAyMDE3Ci8vICMxNTAgRkdGMjMgICAgICAgICAgIFdvbGYgTS4gSiBBbSBTb2MgTmVwaHJvbCAyMDEwCi8vICMxNTEgQ1JTIFR5cGUgMSAgICAgIFJvbmNvIEMgZXQgYWwuIEpBQ0MgMjAwODs1MjoxNTI3LTE1MzkKLy8gIzE1MiBDUlMgVHlwZSAyICAgICAgUm9uY28gQyBldCBhbC4gSkFDQyAyMDA4Ci8vICMxNTMgRkVOYSBDYXJkaW9yZW5hbCBNdWxsZW5zIFcgZXQgYWwuIEpBQ0MgMjAwOQovLyAjMTU0IFJlbmFsIFZlbm91cyAgICBEYW1tYW4gSyBldCBhbC4gSiBBbSBDb2xsIENhcmRpb2wgMjAwOQovLyAjMTU1IEhSUy1BS0kgICAgICAgICBFQVNMIENQRyAyMDE4OyBJQ0EgQ29uc2Vuc3VzIDIwMTUKLy8gIzE1NiBIUlMgVU5hICAgICAgICAgU2FsZXJubyBGIGV0IGFsLiBIZXBhdG9sb2d5IDE5OTMKLy8gIzE1NyBIUlMgRkVOYSAgICAgICAgRXBzdGVpbiBNLiBHYXN0cm9lbnRlcm9sb2d5IDE5NzAKLy8gIzE1OCBBbnRpLUdCTSAgICAgICAgUHVzZXkgQ0QuIEtpZG5leSBJbnQgMjAwMzs2Mzo4ODMtODg5Ci8vICMxNTkgQU5DQSAgICAgICAgICAgIEplbm5ldHRlIEpDIGV0IGFsLiBBcnRocml0aXMgUmhldW0gMjAxMwovLyAjMTYwIENvbXBsZW1lbnQgICAgICBTZXRoaSBTLCBGZXJ2ZW56YSBGQy4gTkVKTSAyMDEyOzM2NjoxMTE5Ci8vICMxNjEgUmVub3Zhc2N1bGFyICAgIEhpcnNjaCBBVCBldCBhbC4gSkFDQyAyMDA2OzQ3OjEyMzktMTMxMgovLyAjMTYyIFJBUyBIZW1vZHluYW1pYyBUZXh0b3IgU0MuIEFtIEogS2lkbmV5IERpcyAyMDA5Ci8vICMxNjMgVE1BICAgICAgICAgICAgIEdlb3JnZSBKTi4gTkVKTSAyMDA2OzM1NDoxOTI3LTE5MzUKLy8gIzE2NCBBREFNVFMxMyAgICAgICAgU2FkbGVyIEpFLiBORUpNIDIwMDQ7MzUxOjEyMjctMTIzNQovLyAjMTY1IFBFIFByb3RlaW51cmlhICBBQ09HIFByYWN0aWNlIEJ1bGxldGluIDIyMiwgMjAyMCAodXBkYXRlZCAyMDIyKQovLyAjMTY2IHNGbHQtMS9QbEdGICAgICBWZXJsb2hyZW4gUyBldCBhbC4gSHlwZXJ0ZW5zaW9uIDIwMTQ7NjM6MzQ2LTM1MiAodGhyZXNob2xkcykKLy8gTmVwaHJvdGljIERlZi4gICAgICAgS0RJR08gR2xvbWVydWxhciBEaXNlYXNlcyAyMDIxCi8vIFNlbGVjdGl2aXR5IEluZGV4ICAgIENhbWVyb24gSlMsIEJsYW5kZm9yZCBHLiBMYW5jZXQgMTk2NgovLyBTQUFHICAgICAgICAgICAgICAgICBSdW55b24gQkEuIEFubiBJbnRlcm4gTWVkIDE5OTIKLy8gRkVOYSAgICAgICAgICAgICAgICAgS0RJR08gQUtJIDIwMTIKLy8gRkVVcmVhICAgICAgICAgICAgICAgQ2Fydm91bmlzIENQIGV0IGFsLiBLaWRuZXkgSW50IDIwMDI7NjI6MjIyMy0yMjI5Ci8vIE9zbW9sYXIgR2FwICAgICAgICAgIFNtaXRobGluZSBOLCBHYXJkbmVyIEtELiBBbm4gRW1lcmcgTWVkIDE5NzYKLy8gTmEgRGVmaWNpdCAgICAgICAgICAgQWRyb2d1ZSBISiwgTWFkaWFzIE5FLiBORUpNIDIwMDA7MzQyOjE1ODEKLy8gU0lBREggdnMgQ1NXIEZFVXJhdGUgRmVuc2tlIFcgZXQgYWwuIEpDRU0gMjAwODs5MzoyOTkxLTI5OTcKLy8gICAgICAgICAgICAgICAgICAgICAgTWFlc2FrYSBKSyBldCBhbC4gS2lkbmV5IEludCAxOTkwOzM3OjE1MDAtMTUwNwovLyAgICAgICAgICAgICAgICAgICAgICBWZXJiYWxpcyBKRyBldCBhbC4gQW0gSiBNZWQgMjAxMzsxMjY6UzEtUzQyCi8vICAgICAgICAgICAgICAgICAgICAgIE5JSCBjbGluaWNhbCByZWZlcmVuY2UgbGl0ZXJhdHVyZQovLyBBbmlvbiBHYXAgY29yci4gICAgICBGaWdnZSBKIGV0IGFsLiBKIExhYiBDbGluIE1lZCAxOTkyCi8vIERlbHRhLURlbHRhICAgICAgICAgIE5hcmlucyBSRywgRW1tZXR0IE0uIE1lZGljaW5lIDE5ODAKLy8gV2ludGVyJ3MgRm9ybXVsYSAgICAgQWxiZXJ0IE1TIGV0IGFsLiBBbm4gSW50ZXJuIE1lZCAxOTY3OzY2OjMxMgovLyBVcmluZSBBbmlvbiBHYXAgICAgICBCYXR0bGUgREMgZXQgYWwuIE5FSk0gMTk4ODszMTg6NTk0LTU5OQovLyBTVE9ORSBTY29yZSAgICAgICAgICBNb29yZSBDTCBldCBhbC4gQk1KIDIwMTQ7MzQ4OmcyMTkxCi8vIFJJRkxFIENyaXRlcmlhICAgICAgQmVsbG9tbyBSIGV0IGFsLiBDcml0IENhcmUgMjAwNDs4OlIyMDQtUjIxMgovLyBLRElHTyBBS0kgMjAxMiAgICAgIEtpZG5leSBJbnQgU3VwcGwgMjAxMjsyOjEtMTM4Ci8vIE5hL0dsdWNvc2UgQ29yci4gICAgS2F0eiBNQS4gTkVKTSAxOTczOzI4OTo4NDMtODQ0IChmYWN0b3IgMS42KQovLyAgICAgICAgICAgICAgICAgICAgIEhpbGxpZXIgVEEgZXQgYWwuIEFtIEogTWVkIDE5OTk7MTA2OjM5OS00MDMgKGZhY3RvciAyLjQpCi8vIEZyZWUgV2F0ZXIgRGVmaWNpdCAgQWRyb2d1ZSBISiwgTWFkaWFzIE5FLiBORUpNIDIwMDA7MzQyOjE1ODEKLy8gSGVuZGVyc29uLUguICAgICAgICBIZW5kZXJzb24gTEogLyBIYXNzZWxiYWxjaCBLLiBwS2E9Ni4xCi8vIE1VRFBJTEVTL0dPTERNQVJLICAgTWVodGEgQU4gZXQgYWwuIExhbmNldCAyMDA4OzM3Mjo4OTIKLy8gVVBDUiBTdGFnaW5nICAgICAgICBLRElHTyBDS0QgMjAxMjsgQVNOIHJlY29tbWVuZGF0aW9ucwovLyBSVEEgVHlwaW5nICAgICAgICAgIEJhdHRsZSBEQyBldCBhbC4gTkVKTSAxOTg4OyBSb2RyaWd1ZXotU29yaWFubyAyMDAyCi8vIFBob3MvQ2EgQ0tELU1CRCAgICAgS0RJR08gQ0tELU1CRCAyMDE3OyBLRE9RSSAyMDAzCi8vIE1FTEQgMy4wICAgICAgICAgICAgS2ltIFdSIGV0IGFsLiBHYXN0cm9lbnRlcm9sb2d5IDIwMjI7MTYzOjE0NzYtMTQ4OAovLwovLyAtLSBUUkFOU1BMQU5UIE5FUEhST0xPR1kgKHYxMC4wIGFkZGl0aW9ucykgLS0KLy8gUzEgQ1YgU2NyZWVuaW5nICAgICBLRElHTyBUcmFuc3BsYW50IENhbmRpZGFjeSAyMDIwIFMxMy4zOyBLRE9RSSBDb21tZW50YXJ5IDIwMjEKLy8gUzIgTWFsaWcgV2FpdCAgICAgICBBU1QgQ29uc2Vuc3VzIChTYXdpbnNraSBldCBhbC4sIEFtIEogVHJhbnNwbGFudCAyMDIwKTsgS0RJR08gMjAyMCBTMTEKLy8gUzMgQk1JIEFzc2VzcyAgICAgICBLRElHTyAyMDIwIFM2OyBLRE9RSSBDb21tZW50YXJ5IDIwMjEKLy8gUzQgY1BSQS9ITEEgICAgICAgICBLRElHTyAyMDIwIFMxOTsgVU5PUyBjUFJBIGRlZmluaXRpb24KLy8gUzUgRnJpZWQgRnJhaWx0eSAgICBGcmllZCBMUCBldCBhbC4gSiBHZXJvbnRvbCAyMDAxOzU2Ok0xNDYtTTE1NjsgS0RJR08gMjAyMAovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmNvbnN0IEdVSURFTElORV9DTE9TSU5HID0gIkluIGFuIGVtZXJnZW5jeSwgc3RhYmlsaXNlIHRoZSBwYXRpZW50IGZpcnN0ICAtLSAgY2FsY3VsYXRvciBvdXRwdXRzIG11c3QgbmV2ZXIgZGVsYXkgcmVzdXNjaXRhdGlvbi4gQXBwbHkgY3VycmVudCBpbnRlcm5hdGlvbmFsIGFuZCBuYXRpb25hbCBndWlkZWxpbmVzIGFsb25nc2lkZSB5b3VyIGluc3RpdHV0aW9uJ3MgcHJvdG9jb2xzIHdoZW4gbWFraW5nIG1hbmFnZW1lbnQgZGVjaXNpb25zLiI7Cgpjb25zdCBESVNDTEFJTUVSX1RFWFQgPSBgSU1QT1JUQU5UIE5PVElDRSAgLS0gIFJFQUQgQ0FSRUZVTExZIEJFRk9SRSBVU0UKCihjKSAyMDI2IERyLiBBc2hpc2ggUGF0ZWwuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFVuYXV0aG9yaXNlZCByZXByb2R1Y3Rpb24gb3IgZGlzdHJpYnV0aW9uIHByb2hpYml0ZWQuClBlZXIgUmV2aWV3ZXJzOiBbICAgICAgICAgICAgICAgICAgICBdIFsgICAgICAgICAgICAgICAgICAgIF0gWyAgICAgICAgICAgICAgICAgICAgXQoKRU1FUkdFTkNZICYgQ1JJVElDQUwgQ0FSRSBOT1RJQ0UKSW4gaGFlbW9keW5hbWljYWxseSB1bnN0YWJsZSBwYXRpZW50cyBvciBjbGluaWNhbCBlbWVyZ2VuY2llcywgaW1tZWRpYXRlIHJlc3VzY2l0YXRpb24gYW5kIHN0YWJpbGlzYXRpb24gdGFrZSBhYnNvbHV0ZSBwcmVjZWRlbmNlLiBUaGUgb3V0cHV0cyBvZiB0aGlzIHRvb2wgYXJlIG5vdCBhIHN1YnN0aXR1dGUgZm9yIGVtZXJnZW5jeSBjbGluaWNhbCBhc3Nlc3NtZW50IGFuZCBtdXN0IG5vdCBkZWxheSB0aW1lLWNyaXRpY2FsIGludGVydmVudGlvbnMgaW5jbHVkaW5nIGFpcndheSBtYW5hZ2VtZW50LCBmbHVpZCByZXN1c2NpdGF0aW9uLCBvciBvcmdhbiBzdXBwb3J0LgoKRVZJREVOQ0UgQkFTRSAmIEdVSURFTElORSBISUVSQVJDSFkKRm9ybXVsYXMgYW5kIHRocmVzaG9sZHMgd2l0aGluIHRoaXMgdG9vbCBhcmUgZGVyaXZlZCBmcm9tIHByaW1hcnkgcGVlci1yZXZpZXdlZCBsaXRlcmF0dXJlLCBzeXN0ZW1hdGljIHJldmlld3MsIGFuZCBtZXRhLWFuYWx5c2VzIGFzIGNpdGVkLiBJbnRlcnByZXRpdmUgZ3VpZGFuY2UgcmVmbGVjdHMgY3VycmVudCBhcHBsaWNhYmxlIHJlY29tbWVuZGF0aW9ucyBmcm9tIGludGVybmF0aW9uYWwgYm9kaWVzIGluY2x1ZGluZyB0aGUgS2lkbmV5IERpc2Vhc2U6IEltcHJvdmluZyBHbG9iYWwgT3V0Y29tZXMgKEtESUdPKSBpbml0aWF0aXZlLCB0aGUgQW1lcmljYW4gU29jaWV0eSBvZiBOZXBocm9sb2d5IChBU04pLCB0aGUgRXVyb3BlYW4gUmVuYWwgQXNzb2NpYXRpb24gKEVSQSksIHRoZSBJbnRlcm5hdGlvbmFsIFNvY2lldHkgb2YgTmVwaHJvbG9neSAoSVNOKSwgYW5kIG90aGVyIHJlbGV2YW50IG5hdGlvbmFsIGFuZCBzcGVjaWFsdHkgZ3VpZGVsaW5lcy4gVXNlcnMgYXJlIHJlc3BvbnNpYmxlIGZvciBhcHBseWluZyB0aGUgbW9zdCBjdXJyZW50IHB1Ymxpc2hlZCB2ZXJzaW9uIG9mIGFueSByZWZlcmVuY2VkIGd1aWRlbGluZSBhbmQgYWRhcHRpbmcgcmVjb21tZW5kYXRpb25zIHRvIHRoZWlyIG5hdGlvbmFsIHJlZ3VsYXRvcnkgZnJhbWV3b3JrIGFuZCBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4KClNDT1BFIE9GIFVTRQpSZXN1bHRzIG11c3QgYmUgaW50ZXJwcmV0ZWQgd2l0aGluIHRoZSBmdWxsIGNsaW5pY2FsIGNvbnRleHQgb2YgdGhlIGluZGl2aWR1YWwgcGF0aWVudC4gTm8gY2FsY3VsYXRvciByZXN1bHQgY29uc3RpdHV0ZXMgYSBkaWFnbm9zaXMsIHRyZWF0bWVudCBkZWNpc2lvbiwgb3Igc3Vic3RpdHV0ZSBmb3IgdGhlIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCBvZiBhIHF1YWxpZmllZCBuZXBocm9sb2dpc3Qgb3IgbGljZW5zZWQgaGVhbHRoY2FyZSBwcm9mZXNzaW9uYWwuCgpESVNDTEFJTUVSIE9GIExJQUJJTElUWQpEci4gQXNoaXNoIFBhdGVsLCB0aGUgYXV0aG9yLCBwZWVyIHJldmlld2VycyAod2hlcmUgbGlzdGVkKSwgYW5kIGFsbCBhc3NvY2lhdGVkIGRldmVsb3BlcnMgZXhwcmVzc2x5IGRpc2NsYWltIGFueSBhbmQgYWxsIGxpYWJpbGl0eSwgdG8gdGhlIGZ1bGxlc3QgZXh0ZW50IHBlcm1pdHRlZCBieSBhcHBsaWNhYmxlIGxhdywgZm9yIGFueSBjbGluaWNhbCBkZWNpc2lvbnMsIG91dGNvbWVzLCBvciBoYXJtcyBhcmlzaW5nIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgZnJvbSB1c2Ugb2YgdGhpcyB0b29sLiBObyB3YXJyYW50eSAgLS0gIGV4cHJlc3MsIGltcGxpZWQsIG9yIHN0YXR1dG9yeSAgLS0gIGlzIG1hZGUgcmVnYXJkaW5nIHRoZSBhY2N1cmFjeSwgY29tcGxldGVuZXNzLCByZWxpYWJpbGl0eSwgb3IgZml0bmVzcyBmb3IgYW55IHBhcnRpY3VsYXIgY2xpbmljYWwgcHVycG9zZSBvZiBhbnkgZm9ybXVsYSBvciBvdXRwdXQgaGVyZWluLgoKRk9STVVMQSBBQ0NVUkFDWSAmIE9OR09JTkcgVVBEQVRFUwpGb3JtdWxhcyBhcmUgZGVyaXZlZCBmcm9tIHBlZXItcmV2aWV3ZWQgbGl0ZXJhdHVyZSBhbmQgZXN0YWJsaXNoZWQgY2xpbmljYWwgcHJhY3RpY2UgZ3VpZGVsaW5lcywgYXMgY2l0ZWQgaW4gZWFjaCBjYWxjdWxhdG9yLiBIb3dldmVyLCBtYW55IGVxdWF0aW9ucyBhcmUgbWF0aGVtYXRpY2FsIGFwcHJveGltYXRpb25zIG9mIGNvbXBsZXggcGh5c2lvbG9naWNhbCBwcm9jZXNzZXMgYW5kIG1heSBub3QgYmUgYXBwbGljYWJsZSB0byBhbGwgcGF0aWVudCBwb3B1bGF0aW9ucywgaW5jbHVkaW5nIHBhdGllbnRzIGF0IGV4dHJlbWVzIG9mIG11c2NsZSBtYXNzIG9yIGJvZHkgaGFiaXR1cywgcGFlZGlhdHJpYyBwYXRpZW50cyBvdXRzaWRlIHN0YXRlZCBhZ2UgcmFuZ2VzLCBjcml0aWNhbGx5IGlsbCBwYXRpZW50cyB3aXRoIHJhcGlkbHkgY2hhbmdpbmcgcmVuYWwgZnVuY3Rpb24sIHByZWduYW50IHBhdGllbnRzLCBwYXRpZW50cyB3aXRoIHVudXN1YWwgZGlldGFyeSBwYXR0ZXJucywgb3IgdGhvc2Ugd2l0aCBjb25kaXRpb25zIG5vdCByZXByZXNlbnRlZCBpbiB0aGUgb3JpZ2luYWwgZGVyaXZhdGlvbiBjb2hvcnQuIENsaW5pY2FsIHByYWN0aWNlIGd1aWRlbGluZXMsIHJlZmVyZW5jZSByYW5nZXMsIGFuZCByZWNvbW1lbmRlZCB0aHJlc2hvbGRzIGFyZSBzdWJqZWN0IHRvIHBlcmlvZGljIHJldmlzaW9uIGFzIG5ldyBldmlkZW5jZSBlbWVyZ2VzOyB0aGUgZm9ybXVsYXMgYW5kIGludGVycHJldGF0aW9ucyB3aXRoaW4gdGhpcyB0b29sIG1heSBiZSB1cGRhdGVkIGFjY29yZGluZ2x5IGJ1dCBtYXkgbm90IGFsd2F5cyByZWZsZWN0IHRoZSB2ZXJ5IGxhdGVzdCBwdWJsaXNoZWQgcmV2aXNpb25zLiBVc2VycyBzaG91bGQgdmVyaWZ5IGFnYWluc3QgdGhlIG1vc3QgY3VycmVudCB2ZXJzaW9uIG9mIGFueSByZWZlcmVuY2VkIGd1aWRlbGluZSBhbmQgY29uZmlybSBhcHBsaWNhYmlsaXR5IHRvIHRoZWlyIHBhdGllbnQgcG9wdWxhdGlvbiBiZWZvcmUgdXNlLgoKVXNlIG9mIHRoaXMgdG9vbCBjb25zdGl0dXRlcyBhY2tub3dsZWRnbWVudCBhbmQgZnVsbCBhY2NlcHRhbmNlIG9mIHRoZXNlIHRlcm1zLmA7CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gQUxMIFNFQ1RJT05TICYgQ0FMQ1VMQVRPUlMgIC0tICBjb21wbGV0ZSB3aXRoIFRyYW5zcGxhbnQgTmVwaHJvbG9neQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY29uc3QgU0VDVElPTlMgPSBbCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczEiLCBsYWJlbDogIlJlbmFsIEZ1bmN0aW9uICYgSGVtb2R5bmFtaWNzIiwKICAgIGNhbGNzOiBbCiAgICAgIHsKICAgICAgICBpZDoiY2tkZXBpIiwgbmFtZToiQ0tELUVQSSAyMDIxIiwgcmVmOiIjMSAqIElua2VyIGV0IGFsLiwgTkVKTSAyMDIxIiwgdGFnOiJlR0ZSIiwKICAgICAgICBmb3JtdWxhOiIxNDIgeCBtaW4oU2NyL2thcHBhLCAxKV5hbHBoYSB4IG1heChTY3Iva2FwcGEsIDEpXi0xLjIwMCB4IDAuOTkzOF5BZ2UgeCAxLjAxMltGZW1hbGVdXG5rYXBwYSA9IDAuNyAoRikgLyAwLjkgKE0pICAgYWxwaGEgPSAtMC4yNDEgKEYpIC8gLTAuMzAyIChNKSIsCiAgICAgICAgbm90ZToiUmFjZS1mcmVlIDIwMjEgZXF1YXRpb24uIFByZWZlcnJlZCBhZHVsdCBHRlIgZXN0aW1hdG9yLiBSZXF1aXJlZCBpbnB1dCBmb3IgS0ZSRSByaXNrIGNhbGN1bGF0aW9uLiBEbyBub3QgdXNlIGluIHByZWduYW5jeSwgZXh0cmVtZXMgb2YgbXVzY2xlIG1hc3MsIG9yIGFjdXRlIGlsbG5lc3MuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJzY3IiLGxhYmVsOiJTZXJ1bSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxLjIifSwKICAgICAgICAgIHtpZDoiYWdlIixsYWJlbDoiQWdlIix1bml0OiJ5ZWFycyIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA1NSJ9LAogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1hbGUiLCJGZW1hbGUiXX0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3Qgc2NyPSt2LnNjcixhZ2U9K3YuYWdlOyBpZighc2NyfHxzY3I8PTB8fCFhZ2V8fGFnZTw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBmPXYuc2V4PT09IkZlbWFsZSIsaz1mPzAuNzowLjksYT1mPy0wLjI0MTotMC4zMDIscj1zY3IvazsKICAgICAgICAgIHJldHVybiB7dmFsOigxNDIqTWF0aC5wb3coTWF0aC5taW4ociwxKSxhKSpNYXRoLnBvdyhNYXRoLm1heChyLDEpLC0xLjIpKk1hdGgucG93KDAuOTkzOCxhZ2UpKihmPzEuMDEyOjEpKS50b0ZpeGVkKDEpLHVuaXQ6Im1ML21pbi8xLjczbV4yIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY+PTkwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEcxICAtLSAgTm9ybWFsIG9yIGhpZ2ggKD49OTAgbUwvbWluLzEuNzNtXjIpLiBBIENLRCBkaWFnbm9zaXMgYXQgdGhpcyBsZXZlbCB3b3VsZCByZXF1aXJlIHRoZSBwcmVzZW5jZSBvZiBraWRuZXkgZGFtYWdlIG1hcmtlcnMgZm9yIG1vcmUgdGhhbiAzIG1vbnRocy4gQ2FyZGlvdmFzY3VsYXIgcmlzayBmYWN0b3Igb3B0aW1pc2F0aW9uIGlzIHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49NjApIHJldHVybiB7YzoiIzY1YTMwZCIsdDpgRzIgIC0tICBNaWxkbHkgZGVjcmVhc2VkICg2MC04OSkuIEFubnVhbCBtb25pdG9yaW5nIGlzIGFwcHJvcHJpYXRlIGlmIGRhbWFnZSBtYXJrZXJzIGFyZSBwcmVzZW50LiBCbG9vZCBwcmVzc3VyZSBhbmQgcHJvdGVpbnVyaWEgdGFyZ2V0cyBzaG91bGQgYmUgcmV2aWV3ZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj00NSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBHM2EgIC0tICBNaWxkbHktdG8tbW9kZXJhdGVseSBkZWNyZWFzZWQgKDQ1LTU5KS4gU2l4LXRvLXR3ZWx2ZSBtb250aGx5IHJldmlldyBpcyByZWFzb25hYmxlLiBNb25pdG9yaW5nIGZvciBDS0QtTWluZXJhbCBhbmQgQm9uZSBEaXNvcmRlciwgYW5hZW1pYSwgYW5kIG1ldGFib2xpYyBhY2lkb3NpcyBpcyBhZHZpc2VkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49MzApIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgRzNiICAtLSAgTW9kZXJhdGVseS10by1zZXZlcmVseSBkZWNyZWFzZWQgKDMwLTQ0KS4gTmVwaHJvbG9neSByZWZlcnJhbCBpcyByZWNvbW1lbmRlZC4gSW50cm9kdWNpbmcgZWR1Y2F0aW9uIG9uIHJlbmFsIHJlcGxhY2VtZW50IHRoZXJhcHkgb3B0aW9ucyBtYXkgYmUgYXBwcm9wcmlhdGUgaW4gcHJlcGFyYXRpb24gZm9yIGZ1dHVyZSBwbGFubmluZy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTE1KSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEc0ICAtLSAgU2V2ZXJlbHkgZGVjcmVhc2VkICgxNS0yOSkuIEV4cGVkaXRlZCBuZXBocm9sb2d5IHJldmlldyBpcyBzdHJvbmdseSByZWNvbW1lbmRlZC4gRGlzY3Vzc2lvbnMgcmVnYXJkaW5nIHZhc2N1bGFyIGFjY2VzcyBwbGFubmluZyBhbmQgdHJhbnNwbGFudCBhc3Nlc3NtZW50LCB3aGVyZSBjbGluaWNhbGx5IGFwcHJvcHJpYXRlLCBzaG91bGQgYmUgY29uc2lkZXJlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzk5MWIxYiIsdDpgRzUgIC0tICBLaWRuZXkgZmFpbHVyZSAoPDE1KS4gUHJvbXB0IG11bHRpZGlzY2lwbGluYXJ5IG5lcGhyb2xvZ3kgaW5wdXQgaXMgcmVjb21tZW5kZWQuIERpc2N1c3Npb25zIHJlZ2FyZGluZyByZW5hbCByZXBsYWNlbWVudCB0aGVyYXB5IG9yIGNvbnNlcnZhdGl2ZSBtYW5hZ2VtZW50IHNob3VsZCBiZSB1bmRlcnRha2VuIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgcGF0aWVudCdzIHByZWZlcmVuY2VzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJjZyIsIG5hbWU6IkNvY2tjcm9mdC1HYXVsdCIsIHJlZjoiIzIgKiBDb2NrY3JvZnQgJiBHYXVsdCwgTmVwaHJvbiAxOTc2IiwgdGFnOiJDckNsICAtLSAgRHJ1ZyBEb3NpbmciLAogICAgICAgIGZvcm11bGE6IkNyQ2wgPSBbKDE0MCAtIEFnZSkgeCBXZWlnaHRdIC8gKDcyIHggU2NyKSB4IDAuODUgaWYgRmVtYWxlIiwKICAgICAgICBub3RlOiJVc2UgYWN0dWFsIGJvZHkgd2VpZ2h0IHVubGVzcyBvYmVzZSAoSUJXIG9yIGFkanVzdGVkIEJXKS4gUHJpbWFyeSBlcXVhdGlvbiBmb3IgZG9zZS1hZGp1c3RtZW50IG9mIHJlbmFsbHktY2xlYXJlZCBtZWRpY2F0aW9ucy4gTm90IHJlY29tbWVuZGVkIGZvciBHRlIgc3RhZ2luZy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImFnZSIsbGFiZWw6IkFnZSIsdW5pdDoieWVhcnMiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNjUifSwKICAgICAgICAgIHtpZDoid3QiLGxhYmVsOiJXZWlnaHQiLHVuaXQ6ImtnIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDcwIn0sCiAgICAgICAgICB7aWQ6InNjciIsbGFiZWw6IlNlcnVtIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEuMCJ9LAogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1hbGUiLCJGZW1hbGUiXX0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgYWdlPSt2LmFnZSx3dD0rdi53dCxzY3I9K3Yuc2NyOyBpZighYWdlfHwhd3R8fCFzY3J8fHNjcjw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKCgxNDAtYWdlKSp3dCkvKDcyKnNjcikqKHYuc2V4PT09IkZlbWFsZSI/MC44NToxKSkudG9GaXhlZCgxKSx1bml0OiJtTC9taW4ifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49NjApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgPj02MCBtTC9taW4gIC0tICBOb3JtYWwgcmFuZ2UuIFN0YW5kYXJkIGRydWcgZG9zaW5nIGlzIGdlbmVyYWxseSBhcHByb3ByaWF0ZS4gVmVyaWZ5IGFnYWluc3QgaW5kaXZpZHVhbCBkcnVnIHByZXNjcmliaW5nIGluZm9ybWF0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49MzApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgMzAtNTkgbUwvbWluICAtLSAgTW9kZXJhdGUgcmVuYWwgaW1wYWlybWVudC4gRG9zZSBhZGp1c3RtZW50IGlzIGxpa2VseSByZXF1aXJlZCBmb3IgbWFueSByZW5hbGx5LWNsZWFyZWQgbWVkaWNhdGlvbnMgaW5jbHVkaW5nIERPQUNzLCBhbWlub2dseWNvc2lkZXMsIG1ldGZvcm1pbiwgYW5kIExNV0guIFBoYXJtYWNpc3QgcmV2aWV3IHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49MTUpIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgMTUtMjkgbUwvbWluICAtLSAgU2V2ZXJlIHJlbmFsIGltcGFpcm1lbnQuIFNpZ25pZmljYW50IGRvc2UgcmVkdWN0aW9ucyBsaWtlbHkgcmVxdWlyZWQuIE5lcGhyb3RveGljIGFnZW50cyBzaG91bGQgYmUgYXZvaWRlZCB3aGVyZSBwb3NzaWJsZS4gUGhhcm1hY2lzdCBpbnB1dCBhbmQgbmVwaHJvbG9neSByZXZpZXcgYXJlIHN0cm9uZ2x5IHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjOTkxYjFiIix0OmA8MTUgbUwvbWluICAtLSAgRGlhbHlzaXMgcmFuZ2UuIERpYWx5c2lzIGRvc2luZyBwcm90b2NvbHMgc2hvdWxkIGJlIGFwcGxpZWQuIENvbWJpbmVkIG5lcGhyb2xvZ3kgYW5kIHBoYXJtYWNpc3QgcmV2aWV3IGlzIHJlY29tbWVuZGVkIGFzIGEgcHJpb3JpdHkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InNjaHdhcnR6IiwgbmFtZToiUmV2aXNlZCBTY2h3YXJ0eiAoUGFlZGlhdHJpYykiLCByZWY6IiMzICogU2Nod2FydHogZXQgYWwuLCBKQVNOIDIwMDkiLCB0YWc6IlBhZWRpYXRyaWMgZUdGUiIsCiAgICAgICAgZm9ybXVsYToiZUdGUiA9IDAuNDEzIHggKEhlaWdodCAvIFNjcikiLAogICAgICAgIG5vdGU6IkhlaWdodCBpbiBjbSwgU2NyIGluIG1nL2RMLiBWYWxpZCBmb3IgY2hpbGRyZW4gYWdlZCAxLTE2IHllYXJzLiBEbyBub3QgYXBwbHkgdG8gYWR1bHRzLiBUaGUgMjAwOSByZXZpc2VkIGVxdWF0aW9uIHVzZXMgaz0wLjQxMy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Imh0IixsYWJlbDoiSGVpZ2h0Iix1bml0OiJjbSIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxMjAifSwKICAgICAgICAgIHtpZDoic2NyIixsYWJlbDoiU2VydW0gQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMC42In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgaD0rdi5odCxzPSt2LnNjcjsgaWYoIWh8fCFzfHxzPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigwLjQxMypoL3MpLnRvRml4ZWQoMSksdW5pdDoibUwvbWluLzEuNzNtXjIifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49OTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRzEgIC0tICBOb3JtYWwgcGFlZGlhdHJpYyBHRlIgKD49OTApLiBLaWRuZXkgZGFtYWdlIG1hcmtlcnMgYXJlIHJlcXVpcmVkIGZvciBhIENLRCBkaWFnbm9zaXMgYXQgdGhpcyBlR0ZSIGxldmVsLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49NjApIHJldHVybiB7YzoiIzY1YTMwZCIsdDpgRzIgIC0tICBNaWxkbHkgZGVjcmVhc2VkICg2MC04OSkuIEFubnVhbCBtb25pdG9yaW5nIGlzIHJlYXNvbmFibGUgaWYga2lkbmV5IGRhbWFnZSBtYXJrZXJzIGFyZSBwcmVzZW50LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49MzApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgRzMgIC0tICBNb2RlcmF0ZWx5IGRlY3JlYXNlZCAoMzAtNTkpLiBQYWVkaWF0cmljIG5lcGhyb2xvZ3kgcmVmZXJyYWwgaXMgcmVjb21tZW5kZWQuIEF0dGVudGlvbiB0byBncm93dGgsIG51dHJpdGlvbiwgYW5kIGJvbmUgaGVhbHRoIGlzIGFkdmlzZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj0xNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBHNCAgLS0gIFNldmVyZWx5IGRlY3JlYXNlZCAoMTUtMjkpLiBQcm9tcHQgcGFlZGlhdHJpYyBuZXBocm9sb2d5IGlucHV0IGlzIHJlY29tbWVuZGVkLiBGYW1pbHkgZWR1Y2F0aW9uIHJlZ2FyZGluZyBSUlQgb3B0aW9ucyBzaG91bGQgYmUgY29uc2lkZXJlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzk5MWIxYiIsdDpgRzUgIC0tICBLaWRuZXkgZmFpbHVyZSAoPDE1KS4gVXJnZW50IHBhZWRpYXRyaWMgbmVwaHJvbG9neSBpbnB1dCBpcyByZWNvbW1lbmRlZC4gUlJUIHBsYW5uaW5nIG9yIGNvbnNlcnZhdGl2ZSBtYW5hZ2VtZW50IGRpc2N1c3Npb25zIHNob3VsZCBiZSBpbml0aWF0ZWQgcHJvbXB0bHkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImNraWR1MjUiLCBuYW1lOiJDS2lEIFUyNSAoUGllcmNlIDIwMjEpIiwgcmVmOiIjMTI2ICogUGllcmNlIGV0IGFsLiwgS2lkbmV5IEludCAyMDIxOzk5OjYyMi02MzAiLCB0YWc6IlBhZWRpYXRyaWMgJiBZb3VuZyBBZHVsdCBlR0ZSIDw9MjV5ciIsCiAgICAgICAgZm9ybXVsYToiZUdGUiA9IGthcHBhIHggKEhlaWdodFtjbV0gLyBTY3JbbWcvZExdKVxuU2V4LXN0cmF0aWZpZWQga2FwcGE6XG4gIEZlbWFsZTogMi0xMXkgLT4gMzcuMiB8IDEyLTE3eSAtPiAzNi41IHwgMTgtMjV5IC0+IDMyLjhcbiAgTWFsZTogICAyLTExeSAtPiAzOS40IHwgMTItMTd5IC0+IDQ0LjggfCAxOC0yNXkgLT4gNDMuMSIsCiAgICAgICAgbm90ZToiQWdlLSBhbmQgc2V4LXN0cmF0aWZpZWQga2FwcGEgdmFsdWVzLiBWYWxpZGF0ZWQgYWdlcyAyLTI1IGFnYWluc3QgaW9oZXhvbCBHRlIuIFJlcXVpcmVzIElETVMtc3RhbmRhcmRpc2VkIGNyZWF0aW5pbmUuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJodCIsbGFiZWw6IkhlaWdodCIsdW5pdDoiY20iLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMTY1In0sCiAgICAgICAgICB7aWQ6InNjciIsbGFiZWw6IlNlcnVtIENyZWF0aW5pbmUgKElETVMtY2FsaWJyYXRlZCkiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDAuOSJ9LAogICAgICAgICAge2lkOiJhZ2UiLGxhYmVsOiJBZ2UiLHVuaXQ6InllYXJzIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDE2In0sCiAgICAgICAgICB7aWQ6InNleCIsbGFiZWw6IlNleCIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTWFsZSIsIkZlbWFsZSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBoPSt2Lmh0LHM9K3Yuc2NyLGFnZT0rdi5hZ2U7IGlmKCFofHwhc3x8czw9MHx8IWFnZSkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBmPXYuc2V4PT09IkZlbWFsZSI7CiAgICAgICAgICBsZXQgazsKICAgICAgICAgIGlmKGFnZTw9MTEpIGs9Zj8zNy4yOjM5LjQ7CiAgICAgICAgICBlbHNlIGlmKGFnZTw9MTcpIGs9Zj8zNi41OjQ0Ljg7CiAgICAgICAgICBlbHNlIGs9Zj8zMi44OjQzLjE7CiAgICAgICAgICByZXR1cm4ge3ZhbDooaypoL3MpLnRvRml4ZWQoMSksdW5pdDoibUwvbWluLzEuNzNtXjIiLHNlYzpga2FwcGEgPSAke2t9ICgke3Yuc2V4fSwgYWdlICR7YWdlfXlyKWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2Pj05MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBlR0ZSICR7ci52YWx9ICAtLSAgRzE6IE5vcm1hbCBvciBoaWdoICg+PTkwKS4gS2lkbmV5IGRhbWFnZSBtYXJrZXJzIG5lZWRlZCBmb3IgQ0tEIGRpYWdub3Npcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTYwKSByZXR1cm4ge2M6IiM2NWEzMGQiLHQ6YGVHRlIgJHtyLnZhbH0gIC0tICBHMjogTWlsZGx5IGRlY3JlYXNlZCAoNjAtODkpLiBCUCBhbmQgcHJvdGVpbnVyaWEgb3B0aW1pc2F0aW9uIHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49NDUpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgZUdGUiAke3IudmFsfSAgLS0gIEczYTogTWlsZGx5LXRvLW1vZGVyYXRlbHkgZGVjcmVhc2VkICg0NS01OSkuIE5lcGhyb2xvZ3kgcmVmZXJyYWwgYXBwcm9wcmlhdGUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2Pj0zMCkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBlR0ZSICR7ci52YWx9ICAtLSAgRzNiOiBNb2RlcmF0ZWx5LXRvLXNldmVyZWx5IGRlY3JlYXNlZCAoMzAtNDQpLiBOZXBocm9sb2d5IGZvbGxvdy11cCByZWNvbW1lbmRlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY+PTE1KSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YGVHRlIgJHtyLnZhbH0gIC0tICBHNDogU2V2ZXJlbHkgZGVjcmVhc2VkICgxNS0yOSkuIEV4cGVkaXRlZCBuZXBocm9sb2d5IGlucHV0IHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjOTkxYjFiIix0OmBlR0ZSICR7ci52YWx9ICAtLSAgRzU6IEtpZG5leSBmYWlsdXJlICg8MTUpLiBQcm9tcHQgbXVsdGlkaXNjaXBsaW5hcnkgbmVwaHJvbG9neSBpbnB1dCBzdHJvbmdseSByZWNvbW1lbmRlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiY2tkZXBpX2N5cyIsIG5hbWU6IkNLRC1FUEkgQ3lzdGF0aW4gQyAmIENyLUN5cyAoMjAyMS8yMDEyKSIsIHJlZjoiSW5rZXIgZXQgYWwuLCBORUpNIDIwMjE7Mzg1OjE3MzctMTc0OTsgTklEREs7IE5LRi1BU04gVGFzayBGb3JjZSAyMDIxIiwgdGFnOiJlR0ZSICAtLSAgQ3lzdGF0aW4gQyAoRWFybHkgQmlvbWFya2VyKSIsCiAgICAgICAgZm9ybXVsYToiZUdGUihDci1DeXMgMjAyMSkgPSAxMzUgeCBtaW4oU2NyL2thcHBhLDEpXmFscGhhIHggbWF4KFNjci9rYXBwYSwxKV4tMC41NDQgeCBtaW4oU2N5cy8wLjgsMSleLTAuMzIzIHggbWF4KFNjeXMvMC44LDEpXi0wLjc3OCB4IDAuOTk2MV5BZ2UgeCAwLjk2M1tpZiBmZW1hbGVdXG5rYXBwYSA9IDAuNyhGKSAvIDAuOShNKSwgYWxwaGEgPSAtMC4yMTkoRikgLyAtMC4xNDQoTSlcblxuZUdGUihDeXMtb25seSAyMDEyKSA9IDEzMyB4IG1pbihTY3lzLzAuOCwxKV4tMC40OTkgeCBtYXgoU2N5cy8wLjgsMSleLTEuMzI4IHggMC45OTZeQWdlIHggMC45MzJbaWYgZmVtYWxlXSIsCiAgICAgICAgbm90ZToiQ3lzdGF0aW4gQyBpcyBsZXNzIGFmZmVjdGVkIGJ5IG11c2NsZSBtYXNzLCBkaWV0LCBhbmQgcmFjZSB0aGFuIGNyZWF0aW5pbmUgIC0tICBpdCBzZXJ2ZXMgYXMgYW4gZWFybHkgYmlvbWFya2VyIG9mIEdGUiBkZWNsaW5lIGVzcGVjaWFsbHkgaW4gbG93IG11c2NsZSBtYXNzLCBlbGRlcmx5LCB2ZWdldGFyaWFuLCBhbmQgb25jb2xvZ3kgcGF0aWVudHMuIFRoZSBjb21iaW5lZCBDci1DeXMgZXF1YXRpb24gKFAzMCB+OTElKSBpcyB0aGUgbW9zdCBhY2N1cmF0ZSBlR0ZSIGVzdGltYXRlIGFuZCBpcyByZWNvbW1lbmRlZCBieSBLRElHTyAyMDI0IGFuZCB0aGUgTktGLUFTTiBUYXNrIEZvcmNlIGZvciBjb25maXJtYXRvcnkgdGVzdGluZy4gQ3lzdGF0aW4gQyBtYXkgYmUgZWxldmF0ZWQgYnkgaW5mbGFtbWF0aW9uLCB0aHlyb2lkIGR5c2Z1bmN0aW9uLCBvYmVzaXR5LCBhbmQgY29ydGljb3N0ZXJvaWRzLiBSZXF1aXJlcyBJRkNDLXN0YW5kYXJkaXNlZCBhc3NheSAoRVJNLURBNDcxKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InNjciIsbGFiZWw6IlNlcnVtIENyZWF0aW5pbmUgKElETVMpIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMS4xIn0sCiAgICAgICAgICB7aWQ6ImN5cyIsbGFiZWw6IlNlcnVtIEN5c3RhdGluIEMgKElGQ0MpIix1bml0OiJtZy9MIix0eXBlOiJudW1iZXIiLHBoOiIwLjk1In0sCiAgICAgICAgICB7aWQ6ImFnZSIsbGFiZWw6IkFnZSIsdW5pdDoieWVhcnMiLHR5cGU6Im51bWJlciIscGg6IjU1In0sCiAgICAgICAgICB7aWQ6InNleCIsbGFiZWw6IlNleCIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTWFsZSIsIkZlbWFsZSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjcj0rdi5zY3IsY3lzPSt2LmN5cyxhZ2U9K3YuYWdlLGZlbT12LnNleD09PSJGZW1hbGUiOwogICAgICAgICAgaWYoIWN5c3x8IWFnZSkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBrPWZlbT8wLjc6MC45LCBhPWZlbT8tMC4yMTk6LTAuMTQ0OwogICAgICAgICAgY29uc3Qgc2V4RmNyY3lzPWZlbT8wLjk2MzoxLCBzZXhGY3lzPWZlbT8wLjkzMjoxOwogICAgICAgICAgbGV0IGVHRlJjeXM9MTMzKk1hdGgucG93KE1hdGgubWluKGN5cy8wLjgsMSksLTAuNDk5KSpNYXRoLnBvdyhNYXRoLm1heChjeXMvMC44LDEpLC0xLjMyOCkqTWF0aC5wb3coMC45OTYsYWdlKSpzZXhGY3lzOwogICAgICAgICAgbGV0IGVHRlJjcmN5cz1udWxsOwogICAgICAgICAgaWYoY3ImJmNyPjApewogICAgICAgICAgICBlR0ZSY3JjeXM9MTM1Kk1hdGgucG93KE1hdGgubWluKGNyL2ssMSksYSkqTWF0aC5wb3coTWF0aC5tYXgoY3IvaywxKSwtMC41NDQpKk1hdGgucG93KE1hdGgubWluKGN5cy8wLjgsMSksLTAuMzIzKSpNYXRoLnBvdyhNYXRoLm1heChjeXMvMC44LDEpLC0wLjc3OCkqTWF0aC5wb3coMC45OTYxLGFnZSkqc2V4RmNyY3lzOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgYmVzdD1lR0ZSY3JjeXN8fGVHRlJjeXM7CiAgICAgICAgICByZXR1cm4ge3ZhbDpiZXN0LnRvRml4ZWQoMSksdW5pdDoibUwvbWluLzEuNzNtXHUwMEIyIixzZWM6YGVHRlIoQ3lzLW9ubHkpOiAke2VHRlJjeXMudG9GaXhlZCgxKX0ke2VHRlJjcmN5cz9gIHwgZUdGUihDci1DeXMpOiAke2VHRlJjcmN5cy50b0ZpeGVkKDEpfSAgLS0gIHByZWZlcnJlZGA6IiB8IENyIG5vdCBwcm92aWRlZDsgQ3lzLW9ubHkgZXF1YXRpb24gdXNlZCJ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGdmcj0rci52YWwsIGN5cz0rdi5jeXM7CiAgICAgICAgICBsZXQgc3RhZ2U9Z2ZyPj05MD8iRzEiOmdmcj49NjA/IkcyIjpnZnI+PTQ1PyJHM2EiOmdmcj49MzA/IkczYiI6Z2ZyPj0xNT8iRzQiOiJHNSI7CiAgICAgICAgICBsZXQgbXNnPWBlR0ZSICR7ci52YWx9IG1ML21pbi8xLjczbVx1MDBCMiAoQ0tEIHN0YWdlICR7c3RhZ2V9KS4gYDsKICAgICAgICAgIGlmKGN5cz4xLjAmJighdi5zY3J8fCt2LnNjcjwxLjMpKSBtc2crPWBDeXN0YXRpbiBDICR7Y3lzfSBtZy9MIGlzIGVsZXZhdGVkIChyZWYgPDAuOTUpIHdoaWxlIGNyZWF0aW5pbmUgcmVtYWlucyBuZWFyLW5vcm1hbCAgLS0gIHRoaXMgcGF0dGVybiBzdWdnZXN0cyBlYXJseSBHRlIgZGVjbGluZSBkZXRlY3RhYmxlIGJ5IGN5c3RhdGluIEMgYmVmb3JlIGNyZWF0aW5pbmUgcmlzZXMgKGVzcGVjaWFsbHkgcmVsZXZhbnQgaW4gbG93IG11c2NsZSBtYXNzLCBlbGRlcmx5LCBvciBvbmNvbG9neSBwYXRpZW50cykuIGA7CiAgICAgICAgICBlbHNlIGlmKGN5cz4xLjIpIG1zZys9YEN5c3RhdGluIEMgJHtjeXN9IG1nL0wgaXMgZWxldmF0ZWQuIENvbnNpZGVyIG5vbi1HRlIgZGV0ZXJtaW5hbnRzOiBpbmZsYW1tYXRpb24sIHRoeXJvaWQgZHlzZnVuY3Rpb24sIG9iZXNpdHksIGNvcnRpY29zdGVyb2lkcy4gYDsKICAgICAgICAgIGlmKHYuc2NyJiYrdi5zY3I+MCkgbXNnKz1gQ3ItQ3lzIGNvbWJpbmVkIGVxdWF0aW9uIHVzZWQgKFAzMCB+OTElLCBtb3N0IGFjY3VyYXRlKS4gYDsKICAgICAgICAgIGVsc2UgbXNnKz1gQ3lzLW9ubHkgZXF1YXRpb24gdXNlZC4gRm9yIGJlc3QgYWNjdXJhY3ksIGNvbWJpbmUgd2l0aCBjcmVhdGluaW5lLiBgOwogICAgICAgICAgcmV0dXJuIHtjOmdmcj49NjA/IiMxNmEzNGEiOmdmcj49MzA/IiNjYThhMDQiOmdmcj49MTU/IiNlYTU4MGMiOiIjZGMyNjI2Iix0Om1zZytHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6Im1lYXNfY3JjbCIsIG5hbWU6Ik1lYXN1cmVkIENyZWF0aW5pbmUgQ2xlYXJhbmNlIiwgcmVmOiIjNCAqIFN0YW5kYXJkIHJlbmFsIHBoeXNpb2xvZ3kiLCB0YWc6IjI0aCBVcmluZSBDckNsIiwKICAgICAgICBmb3JtdWxhOiJDckNsID0gKFVDciB4IFYpIC8gUENyXG5WID0gMjRoIHVyaW5lIHZvbHVtZSBpbiBtTC9taW4gKGRpdmlkZSB0b3RhbCBtTCBieSAxNDQwKSIsCiAgICAgICAgbm90ZToiR29sZC1zdGFuZGFyZCB0aW1lZCB1cmluZSBjb2xsZWN0aW9uLiBWZXJpZnkgY29tcGxldGVuZXNzOiBleHBlY3RlZCBVQ3IgPSAxNS0yNSBtZy9rZy9kYXkgKG1lbiksIDEwLTIwIG1nL2tnL2RheSAod29tZW4pLiBPdmVyY29ycmVjdHMgR0ZSIGR1ZSB0byB0dWJ1bGFyIGNyZWF0aW5pbmUgc2VjcmV0aW9uICh+MTAtMjAlKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVjciIsbGFiZWw6IlVyaW5lIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDYwIn0sCiAgICAgICAgICB7aWQ6InZvbCIsbGFiZWw6IjI0aCBVcmluZSBWb2x1bWUiLHVuaXQ6Im1MIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDE1MDAifSwKICAgICAgICAgIHtpZDoicGNyIixsYWJlbDoiUGxhc21hIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEuMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVjPSt2LnVjcix2b2w9K3Yudm9sLHBjPSt2LnBjcjsgaWYoIXVjfHwhdm9sfHwhcGN8fHBjPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHZwbT12b2wvMTQ0MDsKICAgICAgICAgIHJldHVybiB7dmFsOigodWMqdnBtKS9wYykudG9GaXhlZCgxKSx1bml0OiJtTC9taW4iLHNlYzpgViA9ICR7dnBtLnRvRml4ZWQoMyl9IG1ML21pbmB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2Pj02MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmAke3IudmFsfSBtTC9taW4gIC0tICBOb3JtYWwgY2xlYXJhbmNlLiBOb3RlOiBtZWFzdXJlZCBDckNsIHNsaWdodGx5IG92ZXJlc3RpbWF0ZXMgdHJ1ZSBHRlIgZHVlIHRvIHR1YnVsYXIgc2VjcmV0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj49MzApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgJHtyLnZhbH0gbUwvbWluICAtLSAgTW9kZXJhdGUgaW1wYWlybWVudC4gQ29ycmVsYXRlIHdpdGggQ0tELUVQSSBlR0ZSLiBDaGVjayAyNGggY29sbGVjdGlvbiBjb21wbGV0ZW5lc3MuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YCR7ci52YWx9IG1ML21pbiAgLS0gIFNldmVyZSBpbXBhaXJtZW50LiBOZXBocm9sb2d5IHJldmlldy4gVmVyaWZ5IGNvbGxlY3Rpb24gYWRlcXVhY3kgYmVmb3JlIGNsaW5pY2FsIHVzZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiZ2VuX2NsZWFyIiwgbmFtZToiR2VuZXJhbCBDbGVhcmFuY2UiLCByZWY6IiM1ICogU3RhbmRhcmQgcmVuYWwgcGh5c2lvbG9neSIsIHRhZzoiUmVuYWwgQ2xlYXJhbmNlIFByaW5jaXBsZSIsCiAgICAgICAgZm9ybXVsYToiQ3ggPSAoVXggeCBWKSAvIFB4IiwKICAgICAgICBub3RlOiJGdW5kYW1lbnRhbCByZW5hbCBjbGVhcmFuY2UgZXF1YXRpb24uIEN4ID0gdm9sdW1lIG9mIHBsYXNtYSBjb21wbGV0ZWx5IGNsZWFyZWQgb2Ygc3Vic3RhbmNlIFggcGVyIHVuaXQgdGltZS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InV4IixsYWJlbDoiVXJpbmUgY29uY2VudHJhdGlvbiBvZiBYIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA4MCJ9LAogICAgICAgICAge2lkOiJ2IixsYWJlbDoiVXJpbmUgZmxvdyByYXRlIChWKSIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEuMDQifSwKICAgICAgICAgIHtpZDoicHgiLGxhYmVsOiJQbGFzbWEgY29uY2VudHJhdGlvbiBvZiBYIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAxLjIifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB1eD0rdi51eCx2cj0rdi52LHB4PSt2LnB4OyBpZighdXh8fCF2cnx8IXB4fHxweDw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKHV4KnZyKS9weCkudG9GaXhlZCgyKSx1bml0OiJtTC9taW4ifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIHJldHVybiB7YzoiIzI1NjNlYiIsdDpgQ2xlYXJhbmNlIG9mIFggPSAke3IudmFsfSBtTC9taW4uIElmIHN1YnN0YW5jZSBpcyBmcmVlbHkgZmlsdGVyZWQgYW5kIG5vdCBzZWNyZXRlZC9yZWFic29yYmVkLCB0aGlzIGFwcHJveGltYXRlcyBHRlIuIENsZWFyYW5jZSA+IEdGUiAtPiBuZXQgdHVidWxhciBzZWNyZXRpb24uIENsZWFyYW5jZSA8IEdGUiAtPiBuZXQgdHVidWxhciByZWFic29ycHRpb24uYH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImVycGYiLCBuYW1lOiJFUlBGIChQQUggQ2xlYXJhbmNlKSIsIHJlZjoiIzYgKiBTbWl0aCBIVywgMTkzNyIsIHRhZzoiUmVuYWwgUGxhc21hIEZsb3ciLAogICAgICAgIGZvcm11bGE6IkVSUEYgPSAoVVBBSCB4IFYpIC8gUFBBSCIsCiAgICAgICAgbm90ZToiUEFIIGlzIH45MCUgZXh0cmFjdGVkIGluIG9uZSBwYXNzIC0+IEVSUEYgfiB0cnVlIFJQRi4gVXNlZCB3aXRoIEdGUiB0byBjYWxjdWxhdGUgZmlsdHJhdGlvbiBmcmFjdGlvbi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVwYWgiLGxhYmVsOiJVcmluZSBQQUggY29uY2VudHJhdGlvbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMTIwIn0sCiAgICAgICAgICB7aWQ6InYiLGxhYmVsOiJVcmluZSBmbG93IHJhdGUgKFYpIix1bml0OiJtTC9taW4iLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMS4wNCJ9LAogICAgICAgICAge2lkOiJwcGFoIixsYWJlbDoiUGxhc21hIFBBSCBjb25jZW50cmF0aW9uIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAwLjIifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB1PSt2LnVwYWgsdnI9K3YudixwPSt2LnBwYWg7IGlmKCF1fHwhdnJ8fCFwfHxwPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigodSp2cikvcCkudG9GaXhlZCgwKSx1bml0OiJtTC9taW4ifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49NTAwJiZ2PD03MDApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRVJQRiAke3IudmFsfSBtTC9taW4gIC0tICBXaXRoaW4gbm9ybWFsIHJhbmdlICg1MDAtNzAwKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8NTAwKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YEVSUEYgJHtyLnZhbH0gbUwvbWluICAtLSAgUmVkdWNlZCAoPDUwMCkuIFBvc3NpYmxlIGNhdXNlcyBpbmNsdWRlIHJlZHVjZWQgcmVuYWwgbWFzcywgcmVub3Zhc2N1bGFyIGRpc2Vhc2UsIHZvbHVtZSBkZXBsZXRpb24sIGNhcmRpb3JlbmFsIHN5bmRyb21lLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBFUlBGICR7ci52YWx9IG1ML21pbiAgLS0gIEVsZXZhdGVkICg+NzAwKS4gTWF5IGJlIGNvbnNpc3RlbnQgd2l0aCBlYXJseSBkaWFiZXRpYyBoeXBlcmZpbHRyYXRpb24gb3IgdmFzb2RpbGF0b3J5IHN0YXRlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJmZiIsIG5hbWU6IkZpbHRyYXRpb24gRnJhY3Rpb24iLCByZWY6IiM3ICogU3RhbmRhcmQgcmVuYWwgcGh5c2lvbG9neSIsIHRhZzoiR2xvbWVydWxhciBIZW1vZHluYW1pY3MiLAogICAgICAgIGZvcm11bGE6IkZGID0gR0ZSIC8gRVJQRiIsCiAgICAgICAgbm90ZToiTm9ybWFsIEZGID0gMC4xNS0wLjIwICgxNS0yMCUpLiBFbGV2YXRlZCBGRiBzdWdnZXN0cyBlZmZlcmVudCBhcnRlcmlvbGFyIGNvbnN0cmljdGlvbi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImdmciIsbGFiZWw6IkdGUiIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEyMCJ9LAogICAgICAgICAge2lkOiJlcnBmIixsYWJlbDoiRVJQRiIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDY1MCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGc9K3YuZ2ZyLGU9K3YuZXJwZjsgaWYoIWd8fCFlfHxlPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOihnL2UqMTAwKS50b0ZpeGVkKDEpLHVuaXQ6IiUifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49MTUmJnY8PTIwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEZGICR7ci52YWx9JSAgLS0gIE5vcm1hbCAoMTUtMjAlKS4gR2xvbWVydWxhciBoYWVtb2R5bmFtaWNzIGFwcGVhciBpbnRhY3QuYH07CiAgICAgICAgICBpZih2PjIwKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YEZGICR7ci52YWx9JSAgLS0gIEVsZXZhdGVkICg+MjAlKS4gQ29uc2lzdGVudCB3aXRoIGVmZmVyZW50IGFydGVyaW9sYXIgY29uc3RyaWN0aW9uLCBlYXJseSBkaWFiZXRpYyBuZXBocm9wYXRoeSwgb3IgbmVwaHJvdGljIHN5bmRyb21lLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBGRiAke3IudmFsfSUgIC0tICBCZWxvdyBub3JtYWwgKDwxNSUpLiBNYXkgcmVmbGVjdCBhZmZlcmVudCBhcnRlcmlvbGFyIGRpbGF0aW9uIG9yIHZhc29kaWxhdG9yeSBzdGF0ZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoibmZwIiwgbmFtZToiTmV0IEZpbHRyYXRpb24gUHJlc3N1cmUiLCByZWY6IiM4ICogR3V5dG9uICYgSGFsbCBNZWRpY2FsIFBoeXNpb2xvZ3kiLCB0YWc6Ikdsb21lcnVsYXIgRHJpdmluZyBGb3JjZSIsCiAgICAgICAgZm9ybXVsYToiTkZQID0gUEdDIC0gUEJTIC0gcGlHQyIsCiAgICAgICAgbm90ZToiTm9ybWFsIHZhbHVlczogUEdDIH4gNjAgbW1IZywgUEJTIH4gMTggbW1IZywgcGlHQyB+IDMyIG1tSGcgLT4gTkZQIH4gMTAgbW1IZy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InBnYyIsbGFiZWw6IlBHQyAgLS0gIEdsb21lcnVsYXIgY2FwaWxsYXJ5IGh5ZHJvc3RhdGljIHByZXNzdXJlIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiI2MCJ9LAogICAgICAgICAge2lkOiJwYnMiLGxhYmVsOiJQQlMgIC0tICBCb3dtYW4ncyBzcGFjZSBoeWRyb3N0YXRpYyBwcmVzc3VyZSIsdW5pdDoibW1IZyIsdHlwZToibnVtYmVyIixwaDoiMTgifSwKICAgICAgICAgIHtpZDoicGdjX29uYyIsbGFiZWw6InBpR0MgIC0tICBHbG9tZXJ1bGFyIGNhcGlsbGFyeSBvbmNvdGljIHByZXNzdXJlIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiIzMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHBnYz0rdi5wZ2MscGJzPSt2LnBicyxvbmM9K3YucGdjX29uYzsgaWYoIXBnY3x8IXBic3x8IW9uYykgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDoocGdjLXBicy1vbmMpLnRvRml4ZWQoMSksdW5pdDoibW1IZyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PjApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgTkZQID0gJHtyLnZhbH0gbW1IZyAgLS0gIFBvc2l0aXZlLiBBY3RpdmUgZmlsdHJhdGlvbiBvY2N1cnJpbmcuYH07CiAgICAgICAgICBpZih2PT09MCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBORlAgPSAwIG1tSGcgIC0tICBGaWx0cmF0aW9uIGVxdWlsaWJyaXVtLiBHRlIgPSAwIGF0IHRoaXMgcG9pbnQuYH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YE5GUCA9ICR7ci52YWx9IG1tSGcgIC0tICBOZWdhdGl2ZS4gTmV0IGZpbHRyYXRpb24gaW1wb3NzaWJsZS4gQ29uc2lkZXIgZWxldmF0ZWQgUEJTIChvYnN0cnVjdGlvbiksIHJlZHVjZWQgUEdDIChzaG9jayksIG9yIGVsZXZhdGVkIG9uY290aWMgcHJlc3N1cmUuYH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InN0YXJsaW5nIiwgbmFtZToiU3RhcmxpbmcgRXF1YXRpb24iLCByZWY6IiM5ICogU3RhcmxpbmcgRUgsIEogUGh5c2lvbCAxODk2IiwgdGFnOiJPZWRlbWEgUGh5c2lvbG9neSIsCiAgICAgICAgZm9ybXVsYToiSnYgPSBLZiBbKFBjIC0gUGkpIC0gc2lnbWEocGljIC0gcGlpKV0iLAogICAgICAgIG5vdGU6IkdvdmVybnMgZmx1aWQgbW92ZW1lbnQgYWNyb3NzIGNhcGlsbGFyeSBtZW1icmFuZXMuIFJlbGV2YW50IHRvIGdsb21lcnVsYXIgZmlsdHJhdGlvbiwgcHVsbW9uYXJ5IG9lZGVtYSwgYW5kIG5lcGhyb3RpYyBvZWRlbWEuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJwYyIsbGFiZWw6IlBjICAtLSAgQ2FwaWxsYXJ5IGh5ZHJvc3RhdGljIHByZXNzdXJlIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiIzNSJ9LAogICAgICAgICAge2lkOiJwaSIsbGFiZWw6IlBpICAtLSAgSW50ZXJzdGl0aWFsIGh5ZHJvc3RhdGljIHByZXNzdXJlIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiItMiJ9LAogICAgICAgICAge2lkOiJwaWMiLGxhYmVsOiJwaWMgIC0tICBDYXBpbGxhcnkgb25jb3RpYyBwcmVzc3VyZSIsdW5pdDoibW1IZyIsdHlwZToibnVtYmVyIixwaDoiMjgifSwKICAgICAgICAgIHtpZDoicGlpIixsYWJlbDoicGlpICAtLSAgSW50ZXJzdGl0aWFsIG9uY290aWMgcHJlc3N1cmUiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IjUifSwKICAgICAgICAgIHtpZDoic2lnbWEiLGxhYmVsOiJzaWdtYSAgLS0gIFJlZmxlY3Rpb24gY29lZmZpY2llbnQgKDAtMSkiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMC45In0sCiAgICAgICAgICB7aWQ6ImtmIixsYWJlbDoiS2YgIC0tICBGaWx0cmF0aW9uIGNvZWZmaWNpZW50Iix1bml0OiJtTC9taW4vbW1IZyIsdHlwZToibnVtYmVyIixwaDoiMS4wIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgcGM9K3YucGMscGk9K3YucGkscGljPSt2LnBpYyxwaWk9K3YucGlpLHM9K3Yuc2lnbWEsa2Y9K3Yua2Y7CiAgICAgICAgICBpZighcGN8fCFwaWN8fCFzfHwha2YpIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KGtmKigocGMtcGkpLXMqKHBpYy1waWkpKSkudG9GaXhlZCgyKSx1bml0OiJtTC9taW4gKEp2KSJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PjApIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgSnYgPSAke3IudmFsfSBtTC9taW4gIC0tICBOZXQgZmlsdHJhdGlvbiAoZmx1aWQgbGVhdmluZyBjYXBpbGxhcnkpLiBQb3NpdGl2ZSB2YWx1ZXMgZHJpdmUgb2VkZW1hIGZvcm1hdGlvbi5gfTsKICAgICAgICAgIGlmKHY8MCkgcmV0dXJuIHtjOiIjMjU2M2ViIix0OmBKdiA9ICR7ci52YWx9IG1ML21pbiAgLS0gIE5ldCByZWFic29ycHRpb24gKGZsdWlkIHJldHVybmluZyB0byBjYXBpbGxhcnkpLmB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBKdiA9IDAgIC0tICBTdGFybGluZyBlcXVpbGlicml1bS4gTm8gbmV0IGZsdWlkIG1vdmVtZW50LmB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJvbmNvdGljIiwgbmFtZToiT25jb3RpYyBQcmVzc3VyZSIsIHJlZjoiIzEwICogWndlaWZhY2ggJiBJbnRhZ2xpZXR0YSwgTWljcm92YXNjIFJlcyAxOTY4IiwgdGFnOiJQcm90ZWluIE9uY290aWMgRm9yY2UiLAogICAgICAgIGZvcm11bGE6InBpID0gMi4xQyArIDAuMTZDXjIgKyAwLjAwOUNeMyAoTGFuZGlzLVBhcHBlbmhlaW1lcikiLAogICAgICAgIG5vdGU6Ik5vcm1hbCBzZXJ1bSBvbmNvdGljIHByZXNzdXJlIH4gMjUtMjggbW1IZyAoYWxidW1pbiB+NCBnL2RMKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImFsYiIsbGFiZWw6IkFsYnVtaW4gY29uY2VudHJhdGlvbiIsdW5pdDoiZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiAyLjAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjPSt2LmFsYjsgaWYoIWN8fGM8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KDIuMSpjKzAuMTYqYypjKzAuMDA5KmMqYypjKS50b0ZpeGVkKDEpLHVuaXQ6Im1tSGcifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49MjUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgcGkgPSAke3IudmFsfSBtbUhnICAtLSAgTm9ybWFsIG9uY290aWMgcHJlc3N1cmUuIEFkZXF1YXRlIGZvcmNlIHRvIHJldGFpbiBpbnRyYXZhc2N1bGFyIGZsdWlkLmB9OwogICAgICAgICAgaWYodj49MTUpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgcGkgPSAke3IudmFsfSBtbUhnICAtLSAgUmVkdWNlZC4gT2VkZW1hIHJpc2sgaW5jcmVhc2VkLiBNb25pdG9yIGZsdWlkIGJhbGFuY2UuYH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YHBpID0gJHtyLnZhbH0gbW1IZyAgLS0gIFNldmVyZWx5IHJlZHVjZWQgKDwxNSkuIEFsYnVtaW4gY3JpdGljYWxseSBsb3cuIFByb2ZvdW5kIG9lZGVtYSBleHBlY3RlZC4gQ29uc2lkZXIgSVYgYWxidW1pbiBiZWZvcmUgbG9vcCBkaXVyZXRpY3MgaW4gcmVmcmFjdG9yeSBuZXBocm90aWMgb2VkZW1hLmB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIElJLiBTT0RJVU0sIEZMVUlEICYgT1NNT0xBTElUWSwKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIHsKICAgIGlkOiJzMiIsIGxhYmVsOiJTb2RpdW0sIEZsdWlkICYgT3Ntb2xhbGl0eSIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiZmVuYSIsIG5hbWU6IkZFTmEiLCByZWY6IktESUdPIEFLSSAyMDEyIiwgdGFnOiJBS0kgV29ya3VwIiwKICAgICAgICBmb3JtdWxhOiJGRU5hICglKSA9IFsoVU5hIC8gUE5hKSAvIChVQ3IgLyBQQ3IpXSB4IDEwMCIsCiAgICAgICAgbm90ZToiUHJlLXJlbmFsOiBGRU5hIDwxJS4gSW50cmluc2ljIChBVE4pOiBGRU5hID49MiUuIE5PVCB2YWxpZCBvbiBkaXVyZXRpY3MgIC0tICB1c2UgRkVVcmVhIGluc3RlYWQuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ1bmEiLGxhYmVsOiJVcmluZSBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIyMCJ9LAogICAgICAgICAge2lkOiJwbmEiLGxhYmVsOiJQbGFzbWEgU29kaXVtIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMTQwIn0sCiAgICAgICAgICB7aWQ6InVjciIsbGFiZWw6IlVyaW5lIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI4MCJ9LAogICAgICAgICAge2lkOiJwY3IiLGxhYmVsOiJQbGFzbWEgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuMCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVuPSt2LnVuYSxwbj0rdi5wbmEsdWM9K3YudWNyLHBjPSt2LnBjcjsgaWYoIXVufHwhcG58fCF1Y3x8IXBjfHxwbjw9MHx8dWM8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KCh1bi9wbikvKHVjL3BjKSoxMDApLnRvRml4ZWQoMiksdW5pdDoiJSJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDEpIHJldHVybiB7YzoiI2NhOGEwNCIsdDoiRkVOYSAiK3IudmFsKyIlICg8MSUpICAtLSAgUHJlLXJlbmFsIHBhdHRlcm4gb3IgaGVwYXRvcmVuYWwgc3luZHJvbWUuIEF2aWQgc29kaXVtIHJldGVudGlvbiBzdWdnZXN0cyByZWR1Y2VkIGVmZmVjdGl2ZSBjaXJjdWxhdGluZyB2b2x1bWUuIEZFTmEgaXMgdW5yZWxpYWJsZSBvbiBkaXVyZXRpY3MgIC0tICB1c2UgRkVVcmVhIGluc3RlYWQuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYodjwyKSByZXR1cm4ge2M6IiNmNTllMGIiLHQ6IkZFTmEgIityLnZhbCsiJSAoMS0yJSkgIC0tICBJbmRldGVybWluYXRlLiBGRVVyZWEsIHVyaW5lIG1pY3Jvc2NvcHksIGFuZCBmdWxsIGNsaW5pY2FsIGFzc2Vzc21lbnQgd291bGQgaGVscCBjbGFyaWZ5LiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDoiRkVOYSAiK3IudmFsKyIlICg+PTIlKSAgLS0gIENvbnNpc3RlbnQgd2l0aCBpbnRyaW5zaWMgcmVuYWwgQUtJIChBVE4gb3IgQUlOKS4gVXJpbmUgbWljcm9zY29weSBmb3IgbXVkZHktYnJvd24gY2FzdHMgYW5kIGNsaW5pY2FsIGNvcnJlbGF0aW9uIHJlY29tbWVuZGVkLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiZmV1biIsIG5hbWU6IkZFVXJlYSIsIHJlZjoiQ2Fydm91bmlzIGV0IGFsLiwgTkVKTSAyMDAyIiwgdGFnOiJBS0kgb24gRGl1cmV0aWNzIiwKICAgICAgICBmb3JtdWxhOiJGRVVyZWEgKCUpID0gWyhVVXJlYSAvIFBVcmVhKSAvIChVQ3IgLyBQQ3IpXSB4IDEwMCIsCiAgICAgICAgbm90ZToiUHJlZmVycmVkIG92ZXIgRkVOYSBvbiBkaXVyZXRpY3MuIFByZS1yZW5hbDogPDM1JS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InV1cmVhIixsYWJlbDoiVXJpbmUgVXJlYSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjMwMCJ9LAogICAgICAgICAge2lkOiJwdXVyZWEiLGxhYmVsOiJQbGFzbWEgVXJlYSAoQlVOKSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIwIn0sCiAgICAgICAgICB7aWQ6InVjciIsbGFiZWw6IlVyaW5lIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI4MCJ9LAogICAgICAgICAge2lkOiJwY3IiLGxhYmVsOiJQbGFzbWEgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuMCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHV1PSt2LnV1cmVhLHB1PSt2LnB1dXJlYSx1Yz0rdi51Y3IscGM9K3YucGNyOyBpZighdXV8fCFwdXx8IXVjfHwhcGN8fHB1PD0wfHx1Yzw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKHV1L3B1KS8odWMvcGMpKjEwMCkudG9GaXhlZCgxKSx1bml0OiIlIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8MzUpIHJldHVybiB7YzoiI2NhOGEwNCIsdDoiRkVVcmVhICIrci52YWwrIiUgKDwzNSUpICAtLSAgUHJlLXJlbmFsIHBhdHRlcm4uIE1heGltYWwgdXJlYSByZXRlbnRpb24uIFByZWZlcnJlZCBtYXJrZXIgb24gZGl1cmV0aWNzLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDoiRkVVcmVhICIrci52YWwrIiUgKD49MzUlKSAgLS0gIENvbnNpc3RlbnQgd2l0aCBpbnRyaW5zaWMgcmVuYWwgQUtJLiBUdWJ1bGFyIHVyZWEtaGFuZGxpbmcgaW1wYWlyZWQuIE5vdCBzaWduaWZpY2FudGx5IGFmZmVjdGVkIGJ5IGRpdXJldGljcy4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6Im9zbWdhcCIsIG5hbWU6Ik9zbW9sYXIgR2FwIiwgcmVmOiJTbWl0aGxpbmUgJiBHYXJkbmVyLCBBbm4gRW1lcmcgTWVkIDE5NzYiLCB0YWc6IlRveGljIEFsY29ob2wgU2NyZWVuIiwKICAgICAgICBmb3JtdWxhOiJDYWxjdWxhdGVkIE9zbSA9IDJ4TmEgKyBCVU4vMi44ICsgR2x1Y29zZS8xOFxuT3Ntb2xhciBHYXAgPSBNZWFzdXJlZCAtIENhbGN1bGF0ZWQiLAogICAgICAgIG5vdGU6Ik5vcm1hbCA8PTEwIG1Pc20va2cuIEVsZXZhdGVkIGluIHRveGljIGFsY29ob2xzLCBtYW5uaXRvbCwgc2V2ZXJlIHVyYWVtaWEuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJuYSIsbGFiZWw6IlNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjE0MCJ9LAogICAgICAgICAge2lkOiJidW4iLGxhYmVsOiJCVU4iLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIxNCJ9LAogICAgICAgICAge2lkOiJnbGMiLGxhYmVsOiJHbHVjb3NlIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMTAwIn0sCiAgICAgICAgICB7aWQ6Im1vc20iLGxhYmVsOiJNZWFzdXJlZCBPc21vbGFsaXR5Iix1bml0OiJtT3NtL2tnIix0eXBlOiJudW1iZXIiLHBoOiIyOTUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBuYT0rdi5uYSxidW49K3YuYnVuLGdsYz0rdi5nbGMsbW89K3YubW9zbTsgaWYoIW5hfHwhYnVufHwhZ2xjfHwhbW8pIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgY2FsYz0yKm5hK2J1bi8yLjgrZ2xjLzE4OwogICAgICAgICAgcmV0dXJuIHt2YWw6KG1vLWNhbGMpLnRvRml4ZWQoMSksdW5pdDoibU9zbS9rZyIsc2VjOiJDYWxjdWxhdGVkIE9zbTogIitjYWxjLnRvRml4ZWQoMCkrIiBtT3NtL2tnIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8PTEwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6Ik9zbW9sYXIgZ2FwICIrci52YWwrIiBtT3NtL2tnICAtLSAgTm9ybWFsICg8PTEwKS4gTm8gc2lnbmlmaWNhbnQgdW5tZWFzdXJlZCBvc21vbGVzIGlkZW50aWZpZWQuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYodjw9MjApIHJldHVybiB7YzoiI2NhOGEwNCIsdDoiT3Ntb2xhciBnYXAgIityLnZhbCsiIG1Pc20va2cgIC0tICBNaWxkbHkgZWxldmF0ZWQgKDEwLTIwKS4gQ29uc2lkZXIgZWFybHkgdG94aWMgYWxjb2hvbCwgbWFubml0b2wsIHByb3B5bGVuZSBnbHljb2wsIG9yIHNldmVyZSB1cmFlbWlhLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDoiT3Ntb2xhciBnYXAgIityLnZhbCsiIG1Pc20va2cgIC0tICBTaWduaWZpY2FudGx5IGVsZXZhdGVkICg+MjApLiBVcmdlbnQgYXNzZXNzbWVudCBmb3IgdG94aWMgYWxjb2hvbCAobWV0aGFub2wsIGV0aHlsZW5lIGdseWNvbCwgaXNvcHJvcGFub2wpIHdhcnJhbnRlZC4gT2J0YWluIEFCRyAgLS0gIGhpZ2ggQUcgKyBoaWdoIG9zbW9sYXIgZ2FwIGlzIGhpZ2hseSBzdWdnZXN0aXZlLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoibmFkZWYiLCBuYW1lOiJTb2RpdW0gRGVmaWNpdCIsIHJlZjoiQWRyb2d1ZSAmIE1hZGlhcywgTkVKTSAyMDAwIiwgdGFnOiJIeXBvbmF0cmFlbWlhIENvcnJlY3Rpb24iLAogICAgICAgIGZvcm11bGE6Ik5hIERlZmljaXQgPSBUQlcgeCAoVGFyZ2V0IE5hIC0gQ3VycmVudCBOYSkiLAogICAgICAgIG5vdGU6IkNSSVRJQ0FMOiBJbiBjaHJvbmljIGh5cG9uYXRyYWVtaWEgKD40OGgpLCBjb3JyZWN0IDw9OC0xMCBtRXEvTCBwZXIgMjRoIHRvIHByZXZlbnQgT0RTLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoidGJ3IixsYWJlbDoiVG90YWwgQm9keSBXYXRlciAoVEJXKSIsdW5pdDoiTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA0MiJ9LAogICAgICAgICAge2lkOiJ0YXJnZXQiLGxhYmVsOiJUYXJnZXQgU29kaXVtIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMTMwIn0sCiAgICAgICAgICB7aWQ6ImN1cnJlbnQiLGxhYmVsOiJDdXJyZW50IFNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjExNSJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHRidz0rdi50YncsdGd0PSt2LnRhcmdldCxjdXI9K3YuY3VycmVudDsgaWYoIXRid3x8IXRndHx8IWN1cikgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDoodGJ3Kih0Z3QtY3VyKSkudG9GaXhlZCgwKSx1bml0OiJtRXEgTmEgcmVxdWlyZWQifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZD0rci52YWwscmlzZT0rdi50YXJnZXQtK3YuY3VycmVudDsKICAgICAgICAgIGlmKGQ8PTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDoiTm8gc29kaXVtIGRlZmljaXQgYXQgdGFyZ2V0LiBDdXJyZW50IE5hID49IHRhcmdldC4ifTsKICAgICAgICAgIHJldHVybiB7YzoiI2VhNTgwYyIsdDpyLnZhbCsiIG1FcSBOYSBuZWVkZWQgdG8gcmFpc2UgYnkgIityaXNlKyIgbUVxL0wuIFNBRkVUWTogPD04LTEwIG1FcS9MIHBlciAyNGggKGNocm9uaWMgaHlwb25hdHJhZW1pYSkuIE1vbml0b3IgTmEgcTItNGguIElmIG92ZXJjb3JyZWN0aW9uOiBEREFWUCByZXNjdWUgcHJvdG9jb2wuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJuYWNvcnJfZ2x1Y29zZSIsIG5hbWU6IlNvZGl1bSBDb3JyZWN0aW9uICAtLSAgSHlwZXJnbHljYWVtaWEiLCByZWY6IkthdHogTUEuIE5FSk0gMTk3MyB8IEhpbGxpZXIgVEEgZXQgYWwuIEFtIEogTWVkIDE5OTkiLCB0YWc6IkNvcnJlY3RlZCBTb2RpdW0gLyBIeXBlcmdseWNhZW1pYSIsCiAgICAgICAgZm9ybXVsYToiS2F0eiAxLjY6IENvcnJlY3RlZCBOYSA9IE5hICsgMS42IHggWyhHbHVjb3NlIC0gMTAwKSAvIDEwMF1cbkhpbGxpZXIgMi40OiBDb3JyZWN0ZWQgTmEgPSBOYSArIDIuNCB4IFsoR2x1Y29zZSAtIDEwMCkgLyAxMDBdIiwKICAgICAgICBub3RlOiJIaWxsaWVyIDIuNCBwcmVmZXJyZWQgYXQgZ2x1Y29zZSA+NDAwIG1nL2RMLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoibmEiLGxhYmVsOiJNZWFzdXJlZCBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDEzMCJ9LAogICAgICAgICAge2lkOiJnbGMiLGxhYmVsOiJCbG9vZCBHbHVjb3NlIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA0NTAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBuYT0rdi5uYSwgZ2xjPSt2LmdsYzsKICAgICAgICAgIGlmKCFuYXx8IWdsY3x8Z2xjPD0xMDApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3Qga2F0ej1uYSsxLjYqKChnbGMtMTAwKS8xMDApOwogICAgICAgICAgY29uc3QgaGlsbGllcj1uYSsyLjQqKChnbGMtMTAwKS8xMDApOwogICAgICAgICAgcmV0dXJuIHt2YWw6a2F0ei50b0ZpeGVkKDEpLHVuaXQ6Im1FcS9MIChLYXR6IDEuNikiLHNlYzoiSGlsbGllciAyLjQ6ICIraGlsbGllci50b0ZpeGVkKDEpKyIgbUVxL0wifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgbmE9K3YubmEsIGdsYz0rdi5nbGM7CiAgICAgICAgICBjb25zdCBrYXR6PW5hKzEuNiooKGdsYy0xMDApLzEwMCk7CiAgICAgICAgICBjb25zdCBoaWxsaWVyPW5hKzIuNCooKGdsYy0xMDApLzEwMCk7CiAgICAgICAgICBjb25zdCBwcmVmZXJyZWQ9Z2xjPjQwMD9oaWxsaWVyOmthdHo7CiAgICAgICAgICBjb25zdCBsYWJlbD1nbGM+NDAwPyJIaWxsaWVyIDIuNCI6IkthdHogMS42IjsKICAgICAgICAgIGlmKHByZWZlcnJlZDwxMzUpIHJldHVybiB7YzoiI2RjMjYyNiIsdDoiQ29ycmVjdGVkIE5hICIrcHJlZmVycmVkLnRvRml4ZWQoMSkrIiBtRXEvTCAoIitsYWJlbCsiKSAgLS0gIFRydWUgaHlwb25hdHJhZW1pYSBhZnRlciBnbHVjb3NlIGNvcnJlY3Rpb24uICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgaWYocHJlZmVycmVkPDE0NSkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OiJDb3JyZWN0ZWQgTmEgIitwcmVmZXJyZWQudG9GaXhlZCgxKSsiIG1FcS9MICgiK2xhYmVsKyIpICAtLSAgTm9ybWFsIHJhbmdlLiBEaWx1dGlvbmFsIGh5cG9uYXRyYWVtaWEgZnJvbSBoeXBlcmdseWNhZW1pYS4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgICByZXR1cm4ge2M6IiNjYThhMDQiLHQ6IkNvcnJlY3RlZCBOYSAiK3ByZWZlcnJlZC50b0ZpeGVkKDEpKyIgbUVxL0wgKCIrbGFiZWwrIikgIC0tICBIeXBlcm5hdHJhZW1pYS4gU2lnbmlmaWNhbnQgZnJlZSB3YXRlciBkZWZpY2l0IGNvZXhpc3Rpbmcgd2l0aCBoeXBlcmdseWNhZW1pYS4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImZ3ZCIsIG5hbWU6IkZyZWUgV2F0ZXIgRGVmaWNpdCIsIHJlZjoiQWRyb2d1ZSAmIE1hZGlhcywgTkVKTSAyMDAwIiwgdGFnOiJIeXBlcm5hdHJhZW1pYSAgLS0gIEZyZWUgV2F0ZXIgUmVwbGFjZW1lbnQiLAogICAgICAgIGZvcm11bGE6IkZXRCA9IFRCVyB4IFsoTmEgLyAxNDApIC0gMV0iLAogICAgICAgIG5vdGU6IkNvcnJlY3QgPD0xMC0xMiBtRXEvTCBwZXIgMjRoIHRvIGF2b2lkIGNlcmVicmFsIG9lZGVtYS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Im5hIixsYWJlbDoiQ3VycmVudCBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDE2MCJ9LAogICAgICAgICAge2lkOiJ3dCIsbGFiZWw6IldlaWdodCIsdW5pdDoia2ciLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNzAifSwKICAgICAgICAgIHtpZDoic2V4X2FnZSIsbGFiZWw6IlNleCAmIEFnZSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTWFsZSAoYWR1bHQpIiwiRmVtYWxlIG9yIGVsZGVybHkgbWFsZSIsIkVsZGVybHkgZmVtYWxlICg+NjV5KSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBuYT0rdi5uYSwgd3Q9K3Yud3Q7CiAgICAgICAgICBpZighbmF8fCF3dHx8bmE8PTE0MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCB0YndGcmFjPXYuc2V4X2FnZT09PSJNYWxlIChhZHVsdCkiPzAuNjp2LnNleF9hZ2U9PT0iRmVtYWxlIG9yIGVsZGVybHkgbWFsZSI/MC41OjAuNDU7CiAgICAgICAgICBjb25zdCB0Ync9dGJ3RnJhYyp3dDsKICAgICAgICAgIGNvbnN0IGZ3ZD10YncqKChuYS8xNDApLTEpOwogICAgICAgICAgcmV0dXJuIHt2YWw6ZndkLnRvRml4ZWQoMSksdW5pdDoiTCBmcmVlIHdhdGVyIGRlZmljaXQiLHNlYzoiVEJXOiAiK3Ridy50b0ZpeGVkKDEpKyIgTCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBmd2Q9K3IudmFsLCBuYT0rdi5uYTsKICAgICAgICAgIGNvbnN0IGRlZmljaXQ9bmEtMTQwOwogICAgICAgICAgcmV0dXJuIHtjOiBkZWZpY2l0PjE1PyIjZGMyNjI2IjpkZWZpY2l0PjEwPyIjZWE1ODBjIjoiI2NhOGEwNCIsCiAgICAgICAgICAgIHQ6IkZyZWUgd2F0ZXIgZGVmaWNpdCBhcHByb3hpbWF0ZWx5ICIrci52YWwrIiBMLiBSZXBsYWNlIG92ZXIgYXQgbGVhc3QgIitNYXRoLmNlaWwoZGVmaWNpdC8xMCkqMjQrImggKDw9MTAtMTIgbUVxL0wgcGVyIDI0aCkuIFNlcmlhbCBOYSBxNC02aC4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImNzd19zaWFkaCIsIG5hbWU6IkNTVyB2cyBTSUFESCBEaWZmZXJlbnRpYXRvciIsIHJlZjoiRmVuc2tlIFcgZXQgYWwuLCBKQ0VNIDIwMDg7OTM6Mjk5MS0yOTk3OyBNYWVzYWthIEpLIGV0IGFsLiwgQUpLRCAyMDA5OzUzOjc3NS03ODk7IEJpdGV3IFMgZXQgYWwuLCBBbSBKIEVtZXJnIE1lZCAyMDA5OzI3OjEwODYtMTA5MyIsIHRhZzoiSHlwb25hdHJhZW1pYSAgLS0gIENlcmVicmFsIFNhbHQgV2FzdGluZyB2cyBTSUFESCIsCiAgICAgICAgZm9ybXVsYToiRkVVcmF0ZSAoJSkgPSAoVXJpbmUgVXJpYyBBY2lkIHggU2VydW0gQ3JlYXRpbmluZSkgLyAoU2VydW0gVXJpYyBBY2lkIHggVXJpbmUgQ3JlYXRpbmluZSkgeCAxMDBcbkZFUCAoJSkgPSAoVXJpbmUgUGhvc3BoYXRlIHggU2VydW0gQ3JlYXRpbmluZSkgLyAoU2VydW0gUGhvc3BoYXRlIHggVXJpbmUgQ3JlYXRpbmluZSkgeCAxMDBcblxuRGlmZmVyZW50aWF0aW9uIChGZW5za2UgSkNFTSAyMDA4OyBNYWVzYWthIEFKS0QgMjAwOSk6XG4gIEZlYXR1cmUgICAgICAgICAgICB8IENTVyAoU2FsdCBXYXN0aW5nKSAgICAgIHwgU0lBREggKFdhdGVyIFJldGVudGlvbilcbiAgVm9sdW1lIHN0YXR1cyAgICAgICB8IEh5cG92b2xhZW1pYyAoZHJ5KSAgICAgIHwgRXV2b2xhZW1pYyAobm9ybWFsKVxuICBVcmluZSB2b2x1bWUgICAgICAgIHwgSGlnaCAoPjIuNSBML2RheSkgICAgICAgfCBMb3cvTm9ybWFsXG4gIFVyaW5lIE5hICAgICAgICAgICAgfCBIaWdoICg+MTAwIG1tb2wvTCkgICAgICB8IEhpZ2ggKD4yMC0zMCBtbW9sL0wpXG4gIEZFVXJhdGUgZHVyaW5nIGh5cG9OYXwgPjExJSAgICAgICAgICAgICAgICAgICB8ID4xMSVcbiAgRkVVcmF0ZSBBRlRFUiBOYSBmaXggfCA+MTElIChQRVJTSVNUUykgICAgICAgIHwgTm9ybWFsaXNlcyAoPDEwJSlcbiAgRkVQICAgICAgICAgICAgICAgICB8IEluY3JlYXNlZCAoPjIwJSkgICAgICAgIHwgTm9ybWFsICg8PTIwJSlcbiAgVHJlYXRtZW50ICAgICAgICAgICB8IFZvbHVtZSBleHBhbnNpb24gKE5TKSAgIHwgRmx1aWQgcmVzdHJpY3Rpb25cblxuS2V5OiBUaGUgUE9TVC1DT1JSRUNUSU9OIEZFVXJhdGUgaXMgdGhlIGRlZmluaXRpdmUgZGlzY3JpbWluYXRvci4iLAogICAgICAgIG5vdGU6IkJvdGggQ1NXIGFuZCBTSUFESCBwcmVzZW50IHdpdGggaHlwb3RvbmljIGh5cG9uYXRyYWVtaWEsIGxvdyBzZXJ1bSBvc21vbGFsaXR5LCBhbmQgaW5hcHByb3ByaWF0ZWx5IGNvbmNlbnRyYXRlZCB1cmluZSAoVU9zbSA+MTAwKS4gQm90aCBoYXZlIGVsZXZhdGVkIHVyaW5lIE5hLiBUaGUgY3JpdGljYWwgZGlzdGluY3Rpb24gaXMgVk9MVU1FIFNUQVRVUyAgLS0gIENTVyBpcyBoeXBvdm9sYWVtaWMsIFNJQURIIGlzIGV1dm9sYWVtaWMgIC0tICBidXQgY2xpbmljYWwgdm9sdW1lIGFzc2Vzc21lbnQgaXMgb2Z0ZW4gdW5yZWxpYWJsZSBpbiBuZXVyb3N1cmdpY2FsIHBhdGllbnRzLlxuXG5EaWFnbm9zdGljIGFwcHJvYWNoOlxuICAxLiBDb25maXJtIGh5cG90b25pYyBoeXBvbmF0cmFlbWlhIChzZXJ1bSBPc20gPDI3NSwgdXJpbmUgT3NtID4xMDAsIHVyaW5lIE5hID4zMClcbiAgMi4gQXNzZXNzIHZvbHVtZTogQ1ZQLCBmbHVpZCBiYWxhbmNlLCB3ZWlnaHQgdHJlbmQsIHVyaW5lIG91dHB1dCAoQ1NXOiA+Mi41IEwvZGF5KVxuICAzLiBGRVVyYXRlOiBlbGV2YXRlZCBpbiBib3RoIGR1cmluZyBoeXBvbmF0cmFlbWlhOyBUSEUgS0VZIElTIFBPU1QtQ09SUkVDVElPTlxuICA0LiBGRVA6IGVsZXZhdGVkICg+MjAlKSBpbiBDU1csIG5vcm1hbCAoPD0yMCUpIGluIFNJQURIXG4gIDUuIEZsdWlkIGNoYWxsZW5nZTogMkwgTlMgaW1wcm92ZXMgTmEgLT4gQ1NXOyB3b3JzZW5zIE5hIC0+IFNJQURIXG5cbk1hbmFnZW1lbnQ6XG4gIENTVzogVm9sdW1lIHJlcGxldGlvbiB3aXRoIGlzb3RvbmljL2h5cGVydG9uaWMgc2FsaW5lICsvLSBmbHVkcm9jb3J0aXNvbmUgMC4yLTAuNCBtZy9kYXkuIEZsdWlkIHJlc3RyaWN0aW9uIGlzIENPTlRSQUlORElDQVRFRC5cbiAgU0lBREg6IEZsdWlkIHJlc3RyaWN0aW9uIDUwMC0xMDAwIG1ML2RheS4gSWYgc2V2ZXJlIChOYSA8MTIwIG9yIHN5bXB0b21hdGljKTogMyUgc2FsaW5lIDAuNS0xLjAgbUwva2cvaCB3aXRoIGNsb3NlIG1vbml0b3JpbmcgKHJpc2sgb2Ygb3ZlcmNvcnJlY3Rpb24gLT4gT0RTKS5cbiAgQm90aDogQ29ycmVjdCBOYSA8PTgtMTAgbUVxL0wgcGVyIDI0aCB0byBhdm9pZCBvc21vdGljIGRlbXllbGluYXRpb24gc3luZHJvbWUuXG5cbkxpbWl0YXRpb25zOiBEaXVyZXRpY3MsIENLRCwgYW5kIHVyaWNvc3VyaWMgZHJ1Z3MgaW50ZXJmZXJlIHdpdGggRkVVcmF0ZS9GRVAuIERyYXcgbGFicyBPRkYgZGl1cmV0aWNzLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoidV91YSIsbGFiZWw6IlVyaW5lIFVyaWMgQWNpZCIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjQuNSJ9LAogICAgICAgICAge2lkOiJzX3VhIixsYWJlbDoiU2VydW0gVXJpYyBBY2lkIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi44In0sCiAgICAgICAgICB7aWQ6InVfY3IiLGxhYmVsOiJVcmluZSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiODUifSwKICAgICAgICAgIHtpZDoic19jciIsbGFiZWw6IlNlcnVtIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIwLjkifSwKICAgICAgICAgIHtpZDoidV9waG9zIixsYWJlbDoiVXJpbmUgUGhvc3BoYXRlIChvcHRpb25hbCkiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI0MCJ9LAogICAgICAgICAge2lkOiJzX3Bob3MiLGxhYmVsOiJTZXJ1bSBQaG9zcGhhdGUgKG9wdGlvbmFsKSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjMuMCJ9LAogICAgICAgICAge2lkOiJ2b2x1bWUiLGxhYmVsOiJDbGluaWNhbCB2b2x1bWUgc3RhdHVzIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJFdXZvbGFlbWljIChub3JtYWwpIiwiSHlwb3ZvbGFlbWljIChkcnkpIiwiVW5jZXJ0YWluIl19LAogICAgICAgICAge2lkOiJ1cmluZV92b2wiLGxhYmVsOiIyNGggdXJpbmUgb3V0cHV0Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyI8Mi41IEwvZGF5IiwiPj0yLjUgTC9kYXkiLCJVbmtub3duIl19LAogICAgICAgICAge2lkOiJjb3JyZWN0ZWQiLGxhYmVsOiJJcyBoeXBvbmF0cmFlbWlhIGNvcnJlY3RlZD8iLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vICAtLSAgY3VycmVudGx5IGh5cG9uYXRyYWVtaWMiLCJZZXMgIC0tICBOYSBub3JtYWxpc2VkIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVfdWE9K3YudV91YSwgc191YT0rdi5zX3VhLCB1X2NyPSt2LnVfY3IsIHNfY3I9K3Yuc19jcjsKICAgICAgICAgIGlmKCF1X3VhfHwhc191YXx8IXVfY3J8fCFzX2NyfHxzX3VhPD0wfHx1X2NyPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGZldXJhdGU9KHVfdWEqc19jcikvKHNfdWEqdV9jcikqMTAwOwogICAgICAgICAgbGV0IGZlcD1udWxsOwogICAgICAgICAgY29uc3QgdV9wPSt2LnVfcGhvcywgc19wPSt2LnNfcGhvczsKICAgICAgICAgIGlmKHVfcCYmc19wJiZzX3A+MCYmdV9jcj4wKSBmZXA9KHVfcCpzX2NyKS8oc19wKnVfY3IpKjEwMDsKICAgICAgICAgIGxldCBzZWM9di5jb3JyZWN0ZWQ9PT0iWWVzICAtLSAgTmEgbm9ybWFsaXNlZCI/IlBvc3QtY29ycmVjdGlvbiB8ICI6IkR1cmluZyBoeXBvbmF0cmFlbWlhIHwgIjsKICAgICAgICAgIHNlYys9YEZFVXJhdGUgJHtmZXVyYXRlLnRvRml4ZWQoMSl9JWA7CiAgICAgICAgICBpZihmZXAhPT1udWxsKSBzZWMrPWAgfCBGRVAgJHtmZXAudG9GaXhlZCgxKX0lYDsKICAgICAgICAgIHNlYys9YCB8IFZvbDogJHt2LnZvbHVtZX1gOwogICAgICAgICAgcmV0dXJuIHt2YWw6ZmV1cmF0ZS50b0ZpeGVkKDEpLHVuaXQ6IiUgRkVVcmF0ZSIsc2VjOnNlYyxmZXA6ZmVwfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZmU9K3IudmFsOwogICAgICAgICAgY29uc3QgZmVwPXIuZmVwOwogICAgICAgICAgY29uc3QgY29ycmVjdGVkPXYuY29ycmVjdGVkPT09IlllcyAgLS0gIE5hIG5vcm1hbGlzZWQiOwogICAgICAgICAgY29uc3QgaHlwb3ZvbGVtaWM9di52b2x1bWU9PT0iSHlwb3ZvbGFlbWljIChkcnkpIjsKICAgICAgICAgIGNvbnN0IGV1dm9sZW1pYz12LnZvbHVtZT09PSJFdXZvbGFlbWljIChub3JtYWwpIjsKICAgICAgICAgIGNvbnN0IGhpZ2hVTz12LnVyaW5lX3ZvbD09PSI+PTIuNSBML2RheSI7CiAgICAgICAgICBsZXQgY3N3X3BvaW50cz0wLCBzaWFkaF9wb2ludHM9MDsKICAgICAgICAgIC8qIFNjb3JlIGZlYXR1cmVzICovCiAgICAgICAgICBpZihoeXBvdm9sZW1pYykgY3N3X3BvaW50cys9MjsgaWYoZXV2b2xlbWljKSBzaWFkaF9wb2ludHMrPTI7CiAgICAgICAgICBpZihoaWdoVU8pIGNzd19wb2ludHMrPTE7IGlmKHYudXJpbmVfdm9sPT09IjwyLjUgTC9kYXkiKSBzaWFkaF9wb2ludHMrPTE7CiAgICAgICAgICBpZihmZXAhPT1udWxsKXtpZihmZXA+MjApIGNzd19wb2ludHMrPTE7IGVsc2Ugc2lhZGhfcG9pbnRzKz0xO30KICAgICAgICAgIGlmKCFjb3JyZWN0ZWQpewogICAgICAgICAgICAvKiBEdXJpbmcgaHlwb25hdHJhZW1pYSAgLS0gIGJvdGggZWxldmF0ZSBGRVVyYXRlLCBzbyB1c2UgY2xpbmljYWwgZmVhdHVyZXMgKi8KICAgICAgICAgICAgY29uc3QgZmVwU3RyPWZlcCE9PW51bGw/YCBGRVAgJHtmZXAudG9GaXhlZCgxKX0lICgke2ZlcD4yMD8iPjIwJSAtPiBmYXZvdXJzIENTVyI6Ijw9MjAlIC0+IGZhdm91cnMgU0lBREgifSkuYDoiIjsKICAgICAgICAgICAgaWYoY3N3X3BvaW50cz5zaWFkaF9wb2ludHMpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgRkVVcmF0ZSAke3IudmFsfSUgZHVyaW5nIGh5cG9uYXRyYWVtaWEgKGVsZXZhdGVkIGluIGJvdGggQ1NXIGFuZCBTSUFESCkuJHtmZXBTdHJ9IENsaW5pY2FsIGZlYXR1cmVzIGZhdm91ciBDU1c6ICR7aHlwb3ZvbGVtaWM/Imh5cG92b2xhZW1pYyI6IiJ9JHtoaWdoVU8/IiBoaWdoIHVyaW5lIG91dHB1dCI6IiJ9LiBIb3dldmVyLCB0aGUgREVGSU5JVElWRSB0ZXN0IGlzIHBvc3QtY29ycmVjdGlvbiBGRVVyYXRlICAtLSAgcmVwZWF0IGFmdGVyIE5hIG5vcm1hbGlzZXMuIElmID4xMSUgcGVyc2lzdHMgLT4gQ1NXIGNvbmZpcm1lZC4gSWYgbm9ybWFsaXNlcyA8MTAlIC0+IFNJQURILiBJbW1lZGlhdGUgbWFuYWdlbWVudDogaWYgQ1NXIHN1c3BlY3RlZCwgdm9sdW1lIGV4cGFuc2lvbiB3aXRoIGlzb3RvbmljIHNhbGluZSArLy0gZmx1ZHJvY29ydGlzb25lIDAuMi0wLjQgbWcvZGF5LiBEbyBOT1QgZmx1aWQgcmVzdHJpY3QgIC0tICB0aGlzIGlzIGNvbnRyYWluZGljYXRlZCBpbiBDU1cuIENvcnJlY3QgTmEgPD04LTEwIG1FcS9MIHBlciAyNGguICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICAgIGlmKHNpYWRoX3BvaW50cz5jc3dfcG9pbnRzKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEZFVXJhdGUgJHtyLnZhbH0lIGR1cmluZyBoeXBvbmF0cmFlbWlhIChlbGV2YXRlZCBpbiBib3RoIENTVyBhbmQgU0lBREgpLiR7ZmVwU3RyfSBDbGluaWNhbCBmZWF0dXJlcyBmYXZvdXIgU0lBREg6ICR7ZXV2b2xlbWljPyJldXZvbGFlbWljIjoiIn0ke3YudXJpbmVfdm9sPT09IjwyLjUgTC9kYXkiPyIgbm9ybWFsL2xvdyB1cmluZSBvdXRwdXQiOiIifS4gUmVwZWF0IEZFVXJhdGUgYWZ0ZXIgTmEgY29ycmVjdGlvbiB0byBjb25maXJtICAtLSAgbm9ybWFsaXNhdGlvbiAoPDEwJSkgY29uZmlybXMgU0lBREguIE1hbmFnZW1lbnQ6IGZsdWlkIHJlc3RyaWN0aW9uIDUwMC0xMDAwIG1ML2RheS4gSWYgc2V2ZXJlIChOYSA8MTIwIG9yIHN5bXB0b21hdGljKTogMyUgc2FsaW5lIDAuNS0xLjAgbUwva2cvaC4gQ29ycmVjdCBOYSA8PTgtMTAgbUVxL0wgcGVyIDI0aC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgICAgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBGRVVyYXRlICR7ci52YWx9JSBkdXJpbmcgaHlwb25hdHJhZW1pYSAgLS0gIGVsZXZhdGVkIGluIEJPVEggQ1NXIGFuZCBTSUFESC4ke2ZlcFN0cn0gVm9sdW1lIHN0YXR1cyAke3Yudm9sdW1lPT09IlVuY2VydGFpbiI/InVuY2VydGFpbiAgLS0gIGNsaW5pY2FsIGFzc2Vzc21lbnQgdW5yZWxpYWJsZSBpbiB+NTAlIG9mIGNhc2VzIjoibm90ZWQifS4gVEhFIERFRklOSVRJVkUgRElTQ1JJTUlOQVRPUiBpcyBwb3N0LWNvcnJlY3Rpb24gRkVVcmF0ZTogcmVwZWF0IGFmdGVyIE5hIG5vcm1hbGlzZXMuIEZFVXJhdGUgPjExJSBwZXJzaXN0cyAtPiBDU1cuIEZFVXJhdGUgbm9ybWFsaXNlcyA8MTAlIC0+IFNJQURILiBDb25zaWRlciAyTCBOUyBmbHVpZCBjaGFsbGVuZ2U6IGltcHJvdmVzIE5hIC0+IENTVzsgd29yc2VucyBOYSAtPiBTSUFESC4gQ29ycmVjdCBOYSA8PTgtMTAgbUVxL0wgcGVyIDI0aC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8qIFBvc3QtY29ycmVjdGlvbiAgLS0gIHRoaXMgaXMgdGhlIGRlZmluaXRpdmUgdGVzdCAqLwogICAgICAgICAgICBjb25zdCBmZXBTdHI9ZmVwIT09bnVsbD9gIEZFUCAke2ZlcC50b0ZpeGVkKDEpfSUgKCR7ZmVwPjIwPyI+MjAlICAtLSAgc3VwcG9ydHMgQ1NXIjoiPD0yMCUgIC0tICBzdXBwb3J0cyBTSUFESCJ9KS5gOiIiOwogICAgICAgICAgICBpZihmZT4xMSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBGRVVyYXRlICR7ci52YWx9JSBSRU1BSU5TIEVMRVZBVEVEICg+MTElKSBhZnRlciBOYSBjb3JyZWN0aW9uICAtLSAgQ09ORklSTVMgQ2VyZWJyYWwgU2FsdCBXYXN0aW5nIChGZW5za2UgSkNFTSAyMDA4OyBNYWVzYWthIEFKS0QgMjAwOSkuJHtmZXBTdHJ9IE1hbmFnZW1lbnQ6IHZvbHVtZSByZXBsZXRpb24gd2l0aCBpc290b25pYyBzYWxpbmUuIEZsdWRyb2NvcnRpc29uZSAwLjItMC40IG1nL2RheSB0byByZWR1Y2UgcmVuYWwgc29kaXVtIGxvc3Nlcy4gRmx1aWQgcmVzdHJpY3Rpb24gaXMgQ09OVFJBSU5ESUNBVEVELiBNb25pdG9yIE5hIGNsb3NlbHkgIC0tICBDU1cgaXMgb2Z0ZW4gc2VsZi1saW1pdGluZyAoMi00IHdlZWtzIGluIHBvc3QtbmV1cm9zdXJnaWNhbCBwYXRpZW50cykuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRkVVcmF0ZSAke3IudmFsfSUgaGFzIE5PUk1BTElTRUQgKDw9MTElKSBhZnRlciBOYSBjb3JyZWN0aW9uICAtLSAgQ09ORklSTVMgU0lBREggKEZlbnNrZSBKQ0VNIDIwMDg7IE1hZXNha2EgQUpLRCAyMDA5KS4ke2ZlcFN0cn0gTWFuYWdlbWVudDogZmx1aWQgcmVzdHJpY3Rpb24gNTAwLTEwMDAgbUwvZGF5LiBGb3IgY2hyb25pYy9yZWN1cnJlbnQgU0lBREg6IGNvbnNpZGVyIHZhcHRhbiAodG9sdmFwdGFuKSwgdXJlYSAxNS02MCBnL2RheSwgb3IgZGVtZWNsb2N5Y2xpbmUuIElkZW50aWZ5IGFuZCB0cmVhdCB1bmRlcmx5aW5nIGNhdXNlIChDTlMsIHB1bG1vbmFyeSwgZHJ1Z3MsIG1hbGlnbmFuY3kpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJjb3JyY2FfZ2x1Y29zZSIsIG5hbWU6IkNvcnJlY3RlZCBDYWxjaXVtIChBbGJ1bWluKSIsIHJlZjoiUGF5bmUgZXQgYWwuLCBCTUogMTk3MzsgS0RJR08gQ0tELU1CRCAyMDE3IiwgdGFnOiJBbGJ1bWluLUFkanVzdGVkIENhbGNpdW0iLAogICAgICAgIGZvcm11bGE6IkNvcnJlY3RlZCBDYSA9IE1lYXN1cmVkIENhICsgMC44IHggKDQuMCAtIEFsYnVtaW4pIiwKICAgICAgICBub3RlOiJBbGJ1bWluLWNvcnJlY3Rpb24gY29ycmVsYXRlcyBpbXBlcmZlY3RseSB3aXRoIGlvbmlzZWQgY2FsY2l1bSwgcGFydGljdWxhcmx5IGluIGNyaXRpY2FsIGlsbG5lc3MuIElvbmlzZWQgY2FsY2l1bSBwcmVmZXJyZWQgd2hlbiBhY2N1cmFjeSBpcyBjcml0aWNhbC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImNhIixsYWJlbDoiTWVhc3VyZWQgVG90YWwgQ2FsY2l1bSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gNy44In0sCiAgICAgICAgICB7aWQ6ImFsYiIsbGFiZWw6IlNlcnVtIEFsYnVtaW4iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMi40In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgY2E9K3YuY2EsIGFsYj0rdi5hbGI7CiAgICAgICAgICBpZighY2F8fCFhbGJ8fGNhPD0wfHxhbGI8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgY29ycmVjdGVkPWNhKzAuOCooNC4wLWFsYik7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjb3JyZWN0ZWQudG9GaXhlZCgyKSx1bml0OiJtZy9kTCAoY29ycmVjdGVkKSJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDguNSkgcmV0dXJuIHtjOiIjMjU2M2ViIix0OiJDb3JyZWN0ZWQgY2FsY2l1bSAiK3IudmFsKyIgbWcvZEwgIC0tICBIeXBvY2FsY2FlbWlhLiBDb25zaWRlciBoeXBvcGFyYXRoeXJvaWRpc20sIHZpdGFtaW4gRCBkZWZpY2llbmN5LCBoeXBvbWFnbmVzYWVtaWEsIENLRCwgb3IgcGFuY3JlYXRpdGlzLiAiK0dVSURFTElORV9DTE9TSU5HfTsKICAgICAgICAgIGlmKHY8PTEwLjUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDoiQ29ycmVjdGVkIGNhbGNpdW0gIityLnZhbCsiIG1nL2RMICAtLSAgTm9ybWFsIHJhbmdlICg4LjUtMTAuNSkuICIrR1VJREVMSU5FX0NMT1NJTkd9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZWE1ODBjIix0OiJDb3JyZWN0ZWQgY2FsY2l1bSAiK3IudmFsKyIgbWcvZEwgIC0tICBIeXBlcmNhbGNhZW1pYS4gQ29uc2lkZXIgcHJpbWFyeSBoeXBlcnBhcmF0aHlyb2lkaXNtLCBtYWxpZ25hbmN5LCB2aXRhbWluIEQgdG94aWNpdHksIGdyYW51bG9tYXRvdXMgZGlzZWFzZS4gIitHVUlERUxJTkVfQ0xPU0lOR307CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gSUlJLiBBQ0lELUJBU0UsCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczMiLCBsYWJlbDoiQWNpZC1CYXNlIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJoZW5kZXJzb25faCIsIG5hbWU6IkhlbmRlcnNvbi1IYXNzZWxiYWxjaCAvIEJsb29kIEdhcyBJbnRlcnByZXRlciIsIHJlZjoiSGVuZGVyc29uIDE5MDggLyBIYXNzZWxiYWxjaCAxOTE2IiwgdGFnOiJBQkcgQWNpZC1CYXNlIEludGVycHJldGF0aW9uIiwKICAgICAgICBmb3JtdWxhOiJwSCA9IDYuMSArIGxvZyhbSENPM10gLyAoMC4wMzAxIHggUGFDTzIpKSIsCiAgICAgICAgbm90ZToiRm91bmRhdGlvbiBvZiBibG9vZCBnYXMgaW50ZXJwcmV0YXRpb24uIEhlbmRlcnNvbiBlcXVhdGlvbjogW0grXSA9IDI0IHggUENPMi9IQ08zLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoicGgiLGxhYmVsOiJNZWFzdXJlZCBwSCAoaWYgYXZhaWxhYmxlKSIsdW5pdDoiIix0eXBlOiJudW1iZXIiLHBoOiI3LjQwIn0sCiAgICAgICAgICB7aWQ6ImhjbzMiLGxhYmVsOiJIQ08zIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMjQifSwKICAgICAgICAgIHtpZDoicGNvMiIsbGFiZWw6IlBhQ08yIix1bml0OiJtbUhnIix0eXBlOiJudW1iZXIiLHBoOiI0MCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGhjbzM9K3YuaGNvMywgcGNvMj0rdi5wY28yOwogICAgICAgICAgaWYoIWhjbzN8fCFwY28yfHxoY28zPD0wfHxwY28yPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGNhbGNQSD0oNi4xK01hdGgubG9nMTAoaGNvMy8oMC4wMzAxKnBjbzIpKSk7CiAgICAgICAgICBjb25zdCBocGx1cz0yNCpwY28yL2hjbzM7CiAgICAgICAgICBjb25zdCBtZWFzUEg9K3YucGg7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjYWxjUEgudG9GaXhlZCgyKSx1bml0OiJjYWxjdWxhdGVkIHBIIixzZWM6YFtIK106ICR7aHBsdXMudG9GaXhlZCgwKX0gbm1vbC9MJHttZWFzUEg/YCB8IE1lYXN1cmVkOiAke21lYXNQSH0gfCBEZWx0YTogJHtNYXRoLmFicyhjYWxjUEgtbWVhc1BIKS50b0ZpeGVkKDMpfWA6IiJ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IHBIPStyLnZhbCwgaGNvMz0rdi5oY28zLCBwY28yPSt2LnBjbzI7CiAgICAgICAgICBsZXQgZGlzb3JkZXI9IiI7CiAgICAgICAgICBpZihwSDw3LjM1JiZwY28yPjQ1KSBkaXNvcmRlcj0iUmVzcGlyYXRvcnkgYWNpZG9zaXMiOwogICAgICAgICAgZWxzZSBpZihwSDw3LjM1JiZoY28zPDIyKSBkaXNvcmRlcj0iTWV0YWJvbGljIGFjaWRvc2lzIjsKICAgICAgICAgIGVsc2UgaWYocEg+Ny40NSYmcGNvMjwzNSkgZGlzb3JkZXI9IlJlc3BpcmF0b3J5IGFsa2Fsb3NpcyI7CiAgICAgICAgICBlbHNlIGlmKHBIPjcuNDUmJmhjbzM+MjYpIGRpc29yZGVyPSJNZXRhYm9saWMgYWxrYWxvc2lzIjsKICAgICAgICAgIGVsc2UgZGlzb3JkZXI9InBIIG5vcm1hbCAgLS0gIHBvc3NpYmxlIGNvbXBlbnNhdGVkIGRpc29yZGVyIjsKICAgICAgICAgIHJldHVybiB7YzpwSDw3LjM1PyIjZGMyNjI2IjpwSD43LjQ1PyIjN2MzYWVkIjoiIzE2YTM0YSIsCiAgICAgICAgICAgIHQ6YHBIICR7ci52YWx9IHwgUGF0dGVybjogJHtkaXNvcmRlcn0uIFdpbnRlcidzIGV4cGVjdGVkIFBhQ08yOiAkeygxLjUqaGNvMys4KS50b0ZpeGVkKDApfSArLy0gMiBtbUhnLiBGdWxsIGFuYWx5c2lzIHNob3VsZCBpbmNvcnBvcmF0ZSBBRywgZGVsdGEtZGVsdGEsIGFuZCBjb21wZW5zYXRpb24gYXNzZXNzbWVudC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiYWdhcCIsIG5hbWU6IkFuaW9uIEdhcCAoQWxidW1pbi1Db3JyZWN0ZWQpIiwgcmVmOiJGaWdnZSBldCBhbC4sIEogTGFiIENsaW4gTWVkIDE5OTIiLCB0YWc6IkhBR01BIFNjcmVlbiIsCiAgICAgICAgZm9ybXVsYToiQUcgPSBOYSAtIChDbCArIEhDTzMpXG5Db3JyZWN0ZWQgQUcgPSBBRyArIDIuNSB4ICg0LjAgLSBBbGJ1bWluKSIsCiAgICAgICAgbm90ZToiQWx3YXlzIGNvcnJlY3QgZm9yIGh5cG9hbGJ1bWluYWVtaWEuIEVhY2ggMSBnL2RMIGZhbGwgcmVkdWNlcyBBRyBieSB+Mi41LiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoibmEiLGxhYmVsOiJTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIxNDAifSwKICAgICAgICAgIHtpZDoiY2wiLGxhYmVsOiJDaGxvcmlkZSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjEwMiJ9LAogICAgICAgICAge2lkOiJoY28zIixsYWJlbDoiQmljYXJib25hdGUiLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIyNCJ9LAogICAgICAgICAge2lkOiJhbGIiLGxhYmVsOiJBbGJ1bWluIix1bml0OiJnL2RMIix0eXBlOiJudW1iZXIiLHBoOiI0LjAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBuYT0rdi5uYSxjbD0rdi5jbCxoY28zPSt2LmhjbzMsYWxiPSt2LmFsYjsgaWYoIW5hfHwhY2x8fCFoY28zKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGFnPW5hLWNsLWhjbzMsIGNvcnI9YWxiP2FnKzIuNSooNC4wLWFsYik6YWc7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjb3JyLnRvRml4ZWQoMSksdW5pdDoibUVxL0wiLHNlYzpgUmF3IEFHOiAke2FnfWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PD0xMikgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBDb3JyZWN0ZWQgQUcgJHtyLnZhbH0gIC0tICBOb3JtYWwgKDw9MTIpLiBJZiBhY2lkb3NpcyBwcmVzZW50LCBub24tYW5pb24gZ2FwIChoeXBlcmNobG9yYWVtaWMpIHBhdHRlcm4uIENvbnNpZGVyIEdJIGxvc3MsIFJUQSwgc2FsaW5lIGV4Y2Vzcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8PTIwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YENvcnJlY3RlZCBBRyAke3IudmFsfSAgLS0gIEVsZXZhdGVkICgxMi0yMCkuIEhBR01BLiBNVURQSUxFUyBkaWZmZXJlbnRpYWw6IE1ldGhhbm9sLCBVcmFlbWlhLCBES0EvQUtBLCBQcm9weWxlbmUgZ2x5Y29sLCBJc29uaWF6aWQvSXJvbiwgTGFjdGljIGFjaWRvc2lzLCBFdGh5bGVuZSBnbHljb2wsIFNhbGljeWxhdGVzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBDb3JyZWN0ZWQgQUcgJHtyLnZhbH0gIC0tICBNYXJrZWRseSBlbGV2YXRlZCAoPjIwKS4gU2V2ZXJlIEhBR01BLiBVcmdlbnQ6IGxhY3RhdGUsIGtldG9uZXMsIHNhbGljeWxhdGUsIG9zbW9sYXIgZ2FwLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJkZWx0YSIsIG5hbWU6IkRlbHRhLURlbHRhIFJhdGlvIiwgcmVmOiJOYXJpbnMgJiBFbW1ldHQsIE1lZGljaW5lIDE5ODAiLCB0YWc6Ik1peGVkIEFjaWQtQmFzZSBEZXRlY3Rpb24iLAogICAgICAgIGZvcm11bGE6IkRlbHRhRGVsdGEgPSAoQUcgLSAxMikgLyAoMjQgLSBIQ08zKSIsCiAgICAgICAgbm90ZToiPDE6IGNvbmN1cnJlbnQgTkFHTUEuID4yOiBjb25jdXJyZW50IG1ldGFib2xpYyBhbGthbG9zaXMuIDEtMjogcHVyZSBIQUdNQS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImFnIixsYWJlbDoiQ29ycmVjdGVkIEFuaW9uIEdhcCIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjI0In0sCiAgICAgICAgICB7aWQ6ImhjbzMiLGxhYmVsOiJNZWFzdXJlZCBIQ08zIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMTgifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhZz0rdi5hZyxoY28zPSt2LmhjbzM7IGlmKCFhZ3x8IWhjbzN8fGFnPD0xMikgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDooKGFnLTEyKS8oMjQtaGNvMykpLnRvRml4ZWQoMiksdW5pdDoicmF0aW8ifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodjwxLjApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgRGVsdGFEZWx0YSAke3IudmFsfSAoPDEuMCkgIC0tICBNaXhlZCBIQUdNQSBhbmQgbm9uLWFuaW9uIGdhcCBtZXRhYm9saWMgYWNpZG9zaXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PD0yLjApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRGVsdGFEZWx0YSAke3IudmFsfSAoMS4wLTIuMCkgIC0tICBQdXJlIEhBR01BLiBCaWNhcmJvbmF0ZSBmZWxsIHByb3BvcnRpb25hbGx5IHRvIEFHIHJpc2UuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiM3YzNhZWQiLHQ6YERlbHRhRGVsdGEgJHtyLnZhbH0gKD4yLjApICAtLSAgQ29uY3VycmVudCBtZXRhYm9saWMgYWxrYWxvc2lzIG1hc2tpbmcgYWNpZG9zaXMgc2V2ZXJpdHkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6IndpbnRlcnMiLCBuYW1lOiJXaW50ZXIncyBGb3JtdWxhIiwgcmVmOiJBbGJlcnQgZXQgYWwuLCBBbm4gSW50ZXJuIE1lZCAxOTY3IiwgdGFnOiJSZXNwaXJhdG9yeSBDb21wZW5zYXRpb24gQ2hlY2siLAogICAgICAgIGZvcm11bGE6IkV4cGVjdGVkIFBhQ08yID0gKDEuNSB4IEhDTzMpICsgOCArLy0gMiIsCiAgICAgICAgbm90ZToiUHJlZGljdHMgcmVzcGlyYXRvcnkgY29tcGVuc2F0aW9uIGluIHB1cmUgbWV0YWJvbGljIGFjaWRvc2lzLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiaGNvMyIsbGFiZWw6IkhDTzMiLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIxMiJ9LAogICAgICAgICAge2lkOiJwY28yIixsYWJlbDoiTWVhc3VyZWQgUGFDTzIiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IjI4In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgaGNvMz0rdi5oY28zOyBpZighaGNvM3x8aGNvMzw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBleHA9MS41KmhjbzMrODsKICAgICAgICAgIHJldHVybiB7dmFsOmAkeyhleHAtMikudG9GaXhlZCgwKX0tJHsoZXhwKzIpLnRvRml4ZWQoMCl9YCx1bml0OiJtbUhnIixzZWM6di5wY28yP2BNZWFzdXJlZDogJHt2LnBjbzJ9IG1tSGdgOiIifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgaGNvMz0rdi5oY28zLHBjbzI9K3YucGNvMixleHA9MS41KmhjbzMrODsKICAgICAgICAgIGlmKCFwY28yKSByZXR1cm4ge2M6IiM2YjcyODAiLHQ6YEV4cGVjdGVkIFBhQ08yOiAkeyhleHAtMikudG9GaXhlZCgwKX0tJHsoZXhwKzIpLnRvRml4ZWQoMCl9IG1tSGcuIEVudGVyIG1lYXN1cmVkIFBhQ08yIHRvIGNoZWNrIGZvciBjb25jdXJyZW50IHJlc3BpcmF0b3J5IGRpc29yZGVyLmB9OwogICAgICAgICAgaWYocGNvMj5leHArMikgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBQYUNPMiAke3BjbzJ9IGFib3ZlIGV4cGVjdGVkICgkeyhleHAtMikudG9GaXhlZCgwKX0tJHsoZXhwKzIpLnRvRml4ZWQoMCl9KSAgLS0gIGNvbmN1cnJlbnQgcmVzcGlyYXRvcnkgYWNpZG9zaXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihwY28yPGV4cC0yKSByZXR1cm4ge2M6IiM3YzNhZWQiLHQ6YFBhQ08yICR7cGNvMn0gYmVsb3cgZXhwZWN0ZWQgIC0tICBjb25jdXJyZW50IHJlc3BpcmF0b3J5IGFsa2Fsb3Npcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgUGFDTzIgJHtwY28yfSB3aXRoaW4gZXhwZWN0ZWQgcmFuZ2UgIC0tICBhcHByb3ByaWF0ZSBjb21wZW5zYXRpb24gZm9yIHB1cmUgbWV0YWJvbGljIGFjaWRvc2lzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ1YWciLCBuYW1lOiJVcmluZSBBbmlvbiBHYXAiLCByZWY6IkJhdHRsZSBldCBhbC4sIE5FSk0gMTk4OCIsIHRhZzoiUlRBIHZzIEdJIExvc3MiLAogICAgICAgIGZvcm11bGE6IlVBRyA9IFVOYSArIFVLIC0gVUNsIiwKICAgICAgICBub3RlOiJOZWdhdGl2ZSA9IGhpZ2ggTkg0KyA9IEdJIGxvc3MuIFBvc2l0aXZlID0gbG93IE5INCsgPSBSVEEuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ1bmEiLGxhYmVsOiJVcmluZSBOYSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjQwIn0sCiAgICAgICAgICB7aWQ6InVrIixsYWJlbDoiVXJpbmUgSyIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjIwIn0sCiAgICAgICAgICB7aWQ6InVjbCIsbGFiZWw6IlVyaW5lIENsIix1bml0OiJtRXEvTCIsdHlwZToibnVtYmVyIixwaDoiMzUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB1bj0rdi51bmEsdWs9K3YudWssdWM9K3YudWNsOyBpZighdW58fCF1a3x8IXVjKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOih1bit1ay11YykudG9GaXhlZCgwKSx1bml0OiJtRXEvTCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgVUFHICR7ci52YWx9ICAtLSAgTmVnYXRpdmUuIEludGFjdCByZW5hbCBhY2lkaWZpY2F0aW9uLiBOQUdNQSBsaWtlbHkgZnJvbSBHSSBiaWNhcmJvbmF0ZSBsb3NzIChkaWFycmhvZWEsIGZpc3R1bGEpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBVQUcgJHtyLnZhbH0gIC0tICBQb3NpdGl2ZS4gSW1wYWlyZWQgTkg0KyBleGNyZXRpb24gY29uc2lzdGVudCB3aXRoIFJUQS4gVHlwZSAxIChkaXN0YWwsIHVyaW5lIHBIID41LjUpLCBUeXBlIDIgKHByb3hpbWFsKSwgb3IgVHlwZSA0IChoeXBlcmthbGFlbWljKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICBdCiAgfSwKCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBJVi4gQUtJICYgUklTSyBTQ09SRVMsCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczQiLCBsYWJlbDoiQUtJICYgUmlzayBTY29yZXMiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6Im1laHJhbiIsIG5hbWU6Ik1laHJhbiBDSU4gU2NvcmUiLCByZWY6Ik1laHJhbiBldCBhbC4sIEpBQ0MgMjAwNCIsIHRhZzoiQ29udHJhc3QtSW5kdWNlZCBBS0kiLAogICAgICAgIGZvcm11bGE6IlNjb3JlID0gNShIeXBvdGVuc2lvbikgKyA1KElBQlApICsgNShDSEYpICsgNChBZ2U+NzUpICsgMyhBbmFlbWlhKSArIDMoRE0pICsgNChDcj4xLjUpICsgZmxvb3IoVm9sLzEwMCkiLAogICAgICAgIG5vdGU6Ijw9NSB+Ny41JSwgNi0xMCB+MTQlLCAxMS0xNSB+MjYlLCA+PTE2IH41NyUgQ0lOIHJpc2suIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJodG4iLGxhYmVsOiJIeXBvdGVuc2lvbiAoU0JQIDw4MCA+PTFoIC8gdmFzb3ByZXNzb3JzKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiaWFicCIsbGFiZWw6IklBQlAgaW4gdXNlIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJjaGYiLGxhYmVsOiJDSEYgKE5ZSEEgSUlJLUlWIC8gcHVsbW9uYXJ5IG9lZGVtYSkiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImFnZTc1IixsYWJlbDoiQWdlID43NSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiYW5hZW1pYSIsbGFiZWw6IkFuYWVtaWEgKEhjdCA8MzklIE0sIDwzNiUgRikiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImRtIixsYWJlbDoiRGlhYmV0ZXMiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNyMTUiLGxhYmVsOiJDcmVhdGluaW5lID4xLjUgbWcvZEwiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNvbnRyYXN0IixsYWJlbDoiQ29udHJhc3QgVm9sdW1lIix1bml0OiJtTCIsdHlwZToibnVtYmVyIixwaDoiMTUwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgbGV0IHM9MDsKICAgICAgICAgIGlmKHYuaHRuKSBzKz01OyBpZih2LmlhYnApIHMrPTU7IGlmKHYuY2hmKSBzKz01OwogICAgICAgICAgaWYodi5hZ2U3NSkgcys9NDsgaWYodi5hbmFlbWlhKSBzKz0zOyBpZih2LmRtKSBzKz0zOyBpZih2LmNyMTUpIHMrPTQ7CiAgICAgICAgICBjb25zdCBjPSt2LmNvbnRyYXN0OyBpZihjPjApIHMrPU1hdGguZmxvb3IoYy8xMDApOwogICAgICAgICAgcmV0dXJuIHt2YWw6cyx1bml0OiJwb2ludHMifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9ci52YWw7CiAgICAgICAgICBpZih2PD01KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YFNjb3JlICR7dn0gKDw9NSkgIC0tICBMb3cgQ0lOIHJpc2sgKH43LjUlKS4gU3RhbmRhcmQgaHlkcmF0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjw9MTApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgU2NvcmUgJHt2fSAoNi0xMCkgIC0tICBNb2RlcmF0ZSByaXNrICh+MTQlKS4gQWdncmVzc2l2ZSBJViBzYWxpbmUgaHlkcmF0aW9uLiBNaW5pbWlzZSBjb250cmFzdC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8PTE1KSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YFNjb3JlICR7dn0gKDExLTE1KSAgLS0gIEhpZ2ggcmlzayAofjI2JSkuIE1heGltYWwgcHJvcGh5bGF4aXMuIENvbnNpZGVyIG5vbi1jb250cmFzdCBhbHRlcm5hdGl2ZXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFNjb3JlICR7dn0gKD49MTYpICAtLSAgVmVyeSBoaWdoIHJpc2sgKH41NyUpLiBOb24tY29udHJhc3QgYWx0ZXJuYXRpdmVzIHN0cm9uZ2x5IHByZWZlcnJlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoicmlmbGVfa2RpZ28iLCBuYW1lOiJSSUZMRSAmIEtESUdPIEFLSSBTdGFnaW5nIiwgcmVmOiJCZWxsb21vIGV0IGFsLiwgQ3JpdCBDYXJlIDIwMDQ7IEtESUdPIEFLSSAyMDEyIiwgdGFnOiJBS0kgQ2xhc3NpZmljYXRpb24iLAogICAgICAgIGZvcm11bGE6IktESUdPOiBTdGFnZSAxOiBDciB4MS41LTEuOSBvciBePj0wLjMgfCBTdGFnZSAyOiB4Mi4wLTIuOSB8IFN0YWdlIDM6IHgzLjAgb3IgPj00LjAgb3IgUlJUIiwKICAgICAgICBub3RlOiJLRElHTyAyMDEyIHN1cGVyc2VkZXMgUklGTEUuIEJhc2VsaW5lID0gbG93ZXN0IHZhbHVlIHdpdGhpbiAzIG1vbnRocy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InNjcl9iYXNlIixsYWJlbDoiQmFzZWxpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjAuOSJ9LAogICAgICAgICAge2lkOiJzY3Jfbm93IixsYWJlbDoiQ3VycmVudCBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi43In0sCiAgICAgICAgICB7aWQ6InNjcl80OGgiLGxhYmVsOiJDcmVhdGluaW5lIDQ4aCBhZ28gKGlmIGF2YWlsYWJsZSkiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIxLjEifSwKICAgICAgICAgIHtpZDoicnJ0IixsYWJlbDoiUmVuYWwgUmVwbGFjZW1lbnQgVGhlcmFweSBpbml0aWF0ZWQ/Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJObyIsIlllcyAgLS0gIGF1dG8gU3RhZ2UgMyJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBiYXNlPSt2LnNjcl9iYXNlLCBub3c9K3Yuc2NyX25vdywgczQ4PSt2LnNjcl80OGg7CiAgICAgICAgICBpZighYmFzZXx8IW5vdykgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCByYXRpbz1ub3cvYmFzZTsKICAgICAgICAgIGNvbnN0IHJpc2U0OD0oczQ4PjApPyhub3ctczQ4KTowOwogICAgICAgICAgbGV0IHN0YWdlPTA7CiAgICAgICAgICBpZihyYXRpbz49M3x8bm93Pj00LjB8fHYucnJ0PT09IlllcyAgLS0gIGF1dG8gU3RhZ2UgMyIpIHN0YWdlPTM7CiAgICAgICAgICBlbHNlIGlmKHJhdGlvPj0yLjApIHN0YWdlPTI7CiAgICAgICAgICBlbHNlIGlmKHJhdGlvPj0xLjV8fHJpc2U0OD49MC4zKSBzdGFnZT0xOwogICAgICAgICAgcmV0dXJuIHt2YWw6c3RhZ2U9PT0wPyJObyBBS0kiOnN0YWdlLHVuaXQ6c3RhZ2U9PT0wPyIiOiJLRElHTyBTdGFnZSIsc2VjOmBSYXRpbzogJHtyYXRpby50b0ZpeGVkKDIpfXhgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3Qgc3RhZ2U9ci52YWw7CiAgICAgICAgICBpZihzdGFnZT09PSJObyBBS0kiKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YE5vIEFLSSBjcml0ZXJpYSBtZXQuIE1vbml0b3IgaWYgY2xpbmljYWwgc3VzcGljaW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgY29uc3QgaW5mbz17CiAgICAgICAgICAgIDE6e2M6IiNjYThhMDQiLHQ6YEtESUdPIFN0YWdlIDEuIE5lcGhyb3RveGluIHJldmlldywgZG9zZSBhZGp1c3RtZW50LCBoYWVtb2R5bmFtaWMgYXNzZXNzbWVudC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfSwKICAgICAgICAgICAgMjp7YzoiI2VhNTgwYyIsdDpgS0RJR08gU3RhZ2UgMi4gUHJvbXB0IG5lcGhyb2xvZ3kgcmV2aWV3LiBOZXBocm90b3hpbiBhdm9pZGFuY2UsIGhhZW1vZHluYW1pYyBvcHRpbWlzYXRpb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH0sCiAgICAgICAgICAgIDM6e2M6IiNkYzI2MjYiLHQ6YEtESUdPIFN0YWdlIDMgIC0tICBTZXZlcmUgQUtJLiBVcmdlbnQgbmVwaHJvbG9neSBpbnB1dC4gQ29uc2lkZXIgUlJULiAke0dVSURFTElORV9DTE9TSU5HfWB9LAogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiBpbmZvW3N0YWdlXXx8e2M6IiM2YjcyODAiLHQ6IlZlcmlmeSBpbnB1dHMuIn07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImFpbl9yaXNrIiwgbmFtZToiQWN1dGUgSW50ZXJzdGl0aWFsIE5lcGhyaXRpcyAoQUlOKSBSaXNrIENhbGN1bGF0b3IiLCByZWY6Ik1vbGVkaW5hIERHIGV0IGFsLiwgTmVwaHJvbCBEaWFsIFRyYW5zcGxhbnQgMjAyMjszNzoyMjE0LTIyMjI7IE1vbGVkaW5hIERHIGV0IGFsLiwgSkFTTiAyMDI0IChleHRlcm5hbCB2YWxpZGF0aW9uKSIsIHRhZzoiQUlOICAtLSAgQmlvcHN5IERlY2lzaW9uIFN1cHBvcnQiLAogICAgICAgIGZvcm11bGE6IlN1bSA9IDAuODM2NzUxOCB4IGxuKENyKSArICgtMC45MTgxOTM4IHggbG4oQlVOL0NyKSkgKyAoLTAuMDUwMTIwMyB4IDEwMDAgeCAoU0cgLSAxKSkgKyBwcm90ZWluX2NvZWZmICsgMC43NzAzOTggKyBsbihwcmV2YWxlbmNlLzAuMjMpXG5Qcm90ZWluIGNvZWZmaWNpZW50ID0gMC45MzYwMTI3IGlmIGRpcHN0aWNrIDw9MSssIGVsc2UgMFxuJSBQcm9iYWJpbGl0eSBvZiBBSU4gPSAxMDAgeCBlXnN1bSAvICgxICsgZV5zdW0pXG5cbkFVQzogMC43OCAodHJhaW5pbmcpLCAwLjczIChpbnRlcm5hbCB2YWxpZGF0aW9uKSwgMC43NCAoZXh0ZXJuYWwgQkJDSSBjb2hvcnQpIiwKICAgICAgICBub3RlOiJWYWxpZGF0ZWQgNC12YXJpYWJsZSBsb2dpc3RpYyByZWdyZXNzaW9uIG1vZGVsIGlkZW50aWZpZXMgcGF0aWVudHMgYXQgcmlzayBvZiBiaW9wc3ktcHJvdmVuIEFJTiB1c2luZyBFSFIgZGF0YS4gRGV2ZWxvcGVkIGF0IFlhbGUgKG49MzkzLCA4NiBBSU4gb24gYmlvcHN5KSwgZXh0ZXJuYWxseSB2YWxpZGF0ZWQgaW4gdGhlIEJpb3BzeSBCaW9iYW5rIENvaG9ydCBJbml0aWF0aXZlIChCQkNJOyBuPTExMTgsIDExOSBBSU4pIGFuZCBhZ2FpbiBpbiBKQVNOIDIwMjQuIEhpZ2hlciBwcm9iYWJpbGl0eSBpbmRpY2F0ZXMgZ3JlYXRlciBsaWtlbGlob29kIG9mIEFJTiBvbiBiaW9wc3ksIGd1aWRpbmcgZGVjaXNpb25zIGFib3V0IHdobyBzaG91bGQgdW5kZXJnbyBraWRuZXkgYmlvcHN5LiBQYXJ0aWN1bGFybHkgaGVscGZ1bCB3aXRoIGF0eXBpY2FsIG9yIHN1YmNsaW5pY2FsIHByZXNlbnRhdGlvbnMgd2hlcmUgdGhlIGNsYXNzaWMgdHJpYWQgKHJhc2gsIGZldmVyLCBlb3Npbm9waGlsaWEpIGlzIGFic2VudCAofjkwJSBvZiBjYXNlcykuIEFJTiBhY2NvdW50cyBmb3IgMTUtMjclIG9mIHVuZXhwbGFpbmVkIEFLSSBvbiBiaW9wc3kuIE1vc3QgY29tbW9uIGN1bHByaXRzOiBQUElzLCBhbnRpYmlvdGljcywgTlNBSURzLCBjaGVja3BvaW50IGluaGliaXRvcnMuIFRyZWF0bWVudDogd2l0aGRyYXcgb2ZmZW5kaW5nIGRydWc7IGlmIG5vIENyIHJlY292ZXJ5IGluIDUtNyBkYXlzLCBzdGFydCBwcmVkbmlzb25lIDEgbWcva2cgKEdvbnphbGV6LCBLaWRuZXkgSW50IDIwMDggIC0tICBlYXJsaWVyIHN0ZXJvaWRzIGltcHJvdmUgcmVjb3ZlcnkpLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiY3IiLGxhYmVsOiJTZXJ1bSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi41In0sCiAgICAgICAgICB7aWQ6ImJ1biIsbGFiZWw6IkJsb29kIFVyZWEgTml0cm9nZW4gKEJVTikiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIyOCJ9LAogICAgICAgICAge2lkOiJ1c2ciLGxhYmVsOiJVcmluZSBTcGVjaWZpYyBHcmF2aXR5IChkaXBzdGljaykiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMS4wMTIifSwKICAgICAgICAgIHtpZDoidV9wcm90ZWluIixsYWJlbDoiVXJpbmUgRGlwc3RpY2sgUHJvdGVpbiIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiMSsgb3IgbG93ZXIiLCIyKyBvciBoaWdoZXIiXX0sCiAgICAgICAgICB7aWQ6InByZXZhbGVuY2UiLGxhYmVsOiJMb2NhbCBBSU4gcHJldmFsZW5jZSBhbW9uZyBiaW9wc2llcyAoZGVyaXZhdGlvbiBjb2hvcnQ6IDAuMjM7IHZhcmllcyBieSBjZW50cmUsIGUuZy4gSkhIIDAuMDUsIFlhbGUgMC4xNykiLHVuaXQ6IiIsdHlwZToibnVtYmVyIixwaDoiMC4yMyJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGNyPSt2LmNyLCBidW49K3YuYnVuLCBzZz0rdi51c2csIHByZXY9K3YucHJldmFsZW5jZXx8MC4yMzsKICAgICAgICAgIGlmKCFjcnx8IWJ1bnx8IXNnfHxjcjw9MHx8YnVuPD0wfHxzZzwxLjB8fHNnPjEuMDUwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGJ1bkNyUmF0aW89YnVuL2NyOwogICAgICAgICAgY29uc3QgcHJvdENvZWZmPXYudV9wcm90ZWluPT09IjErIG9yIGxvd2VyIj8wLjkzNjAxMjc6MDsKICAgICAgICAgIGNvbnN0IHN1bT0wLjgzNjc1MTgqTWF0aC5sb2coY3IpKygtMC45MTgxOTM4Kk1hdGgubG9nKGJ1bkNyUmF0aW8pKSsoLTAuMDUwMTIwMyoxMDAwKihzZy0xKSkrcHJvdENvZWZmKzAuNzcwMzk4K01hdGgubG9nKHByZXYvMC4yMyk7CiAgICAgICAgICBjb25zdCBwcm9iPTEwMCooTWF0aC5leHAoc3VtKS8oMStNYXRoLmV4cChzdW0pKSk7CiAgICAgICAgICByZXR1cm4ge3ZhbDpwcm9iLnRvRml4ZWQoMSksdW5pdDoiJSBwcm9iYWJpbGl0eSBvZiBBSU4gb24gYmlvcHN5IixzZWM6YEJVTjpDciByYXRpbzogJHtidW5DclJhdGlvLnRvRml4ZWQoMSl9IHwgU0c6ICR7c2d9IHwgUHJvdGVpbjogJHt2LnVfcHJvdGVpbn0gfCBMb2NhbCBwcmV2YWxlbmNlOiAke3ByZXZ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IHByb2I9K3IudmFsOwogICAgICAgICAgY29uc3QgY3I9K3YuY3IsIGJ1bj0rdi5idW47CiAgICAgICAgICBjb25zdCByYXRpbz1idW4vY3I7CiAgICAgICAgICBsZXQgbXNnPWBBSU4gcHJvYmFiaWxpdHk6ICR7ci52YWx9JSAoTW9sZWRpbmEgbW9kZWwsIEFVQyAwLjczLTAuNzgpLiBgOwogICAgICAgICAgaWYocHJvYj49NTApIHJldHVybiB7YzoiI2RjMjYyNiIsdDptc2crYEhJR0ggcHJvYmFiaWxpdHkgb2YgQUlOIG9uIGJpb3BzeS4gRmVhdHVyZXMgZmF2b3VyaW5nIEFJTjogJHtjcj4xLjU/ImVsZXZhdGVkIGNyZWF0aW5pbmUsICI6IiJ9JHtyYXRpbzwyMD8ibG93IEJVTjpDciByYXRpbyAoaW50cmluc2ljIHJlbmFsIHBhdHRlcm4pLCAiOiIifSR7di51X3Byb3RlaW49PT0iMSsgb3IgbG93ZXIiPyJhYnNlbnQgb3IgbWluaW1hbCBwcm90ZWludXJpYSAodHlwaWNhbCBvZiBBSU4pLiAiOiIifVN0cm9uZyBpbmRpY2F0aW9uIGZvciBraWRuZXkgYmlvcHN5LiBXaXRoZHJhdyBzdXNwZWN0ZWQgZHJ1ZyBpbW1lZGlhdGVseSAoUFBJcywgYW50aWJpb3RpY3MsIE5TQUlEcywgY2hlY2twb2ludCBpbmhpYml0b3JzKS4gSWYgYmlvcHN5IGNvbmZpcm1zIEFJTiBhbmQgbm8gQ3IgaW1wcm92ZW1lbnQgaW4gNS03IGRheXMsIGluaXRpYXRlIHByZWRuaXNvbmUgMSBtZy9rZy9kYXkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihwcm9iPj0yNSkgcmV0dXJuIHtjOiIjZWE1ODBjIix0Om1zZytgTU9ERVJBVEUgcHJvYmFiaWxpdHkuIENvbnNpZGVyIGtpZG5leSBiaW9wc3ksIGVzcGVjaWFsbHkgaWYgQUtJIGlzIHVuZXhwbGFpbmVkIG9yIGEgc3Rlcm9pZC1yZXNwb25zaXZlIEFJTiBkaWFnbm9zaXMgd291bGQgY2hhbmdlIG1hbmFnZW1lbnQuIFJldmlldyBtZWRpY2F0aW9ucyBmb3IgY3VscHJpdCBkcnVncyAoUFBJcyBhcmUgbm93IHRoZSBtb3N0IGNvbW1vbiBjYXVzZSkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihwcm9iPj0xMCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0Om1zZytgTE9XLU1PREVSQVRFIHByb2JhYmlsaXR5LiBBSU4gbGVzcyBsaWtlbHkgYnV0IGNhbm5vdCBiZSBleGNsdWRlZC4gTW9uaXRvciByZW5hbCBmdW5jdGlvbiBjbG9zZWx5LiBJZiBBS0kgcGVyc2lzdHMgb3Igd29yc2VucyB3aXRob3V0IGNsZWFyIGFldGlvbG9neSwgcmVjb25zaWRlciBiaW9wc3kuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6bXNnK2BMT1cgcHJvYmFiaWxpdHkgb2YgQUlOLiBDb25zaWRlciBhbHRlcm5hdGl2ZSBkaWFnbm9zZXMgKEFUTiwgcHJlLXJlbmFsLCBvYnN0cnVjdGl2ZSkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAoKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFYuIEtJRE5FWSBGQUlMVVJFIFJJU0sgIC0tICBLRlJFLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InM1IiwgbGFiZWw6IktpZG5leSBGYWlsdXJlIFJpc2sgIC0tICBLRlJFIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJrZnJlNCIsIG5hbWU6IktGUkUgNC1WYXJpYWJsZSIsIHJlZjoiVGFuZ3JpIGV0IGFsLiwgSkFNQSAyMDExIiwgdGFnOiIyeXIgJiA1eXIgRVNSRCBQcm9iYWJpbGl0eSIsCiAgICAgICAgZm9ybXVsYToiUmlzazJnciA9IDEgLSAwLjk4MzJeZXhwKExQKVxuTFAgPSAtMC4yMjAxKEFnZS8xMC03LjAzNikgKyAwLjI0NjcoTWFsZS0wLjU2NDIpIC0gMC41NTY3KGVHRlIvNS03LjIyMikgKyAwLjQ1MTAobG5BQ1ItNS4xMzcpIiwKICAgICAgICBub3RlOiJBQ1IgaW4gbWcvZy4gVmFsaWRhdGVkIENLRCBHMy1HNS4gR3VpZGVzIHRpbWluZyBvZiBhY2Nlc3MgY3JlYXRpb24gYW5kIHRyYW5zcGxhbnQgcmVmZXJyYWwuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJhZ2UiLGxhYmVsOiJBZ2UiLHVuaXQ6InllYXJzIix0eXBlOiJudW1iZXIiLHBoOiI2MCJ9LAogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1hbGUiLCJGZW1hbGUiXX0sCiAgICAgICAgICB7aWQ6ImVnZnIiLGxhYmVsOiJlR0ZSIix1bml0OiJtTC9taW4vMS43M21eMiIsdHlwZToibnVtYmVyIixwaDoiMjUifSwKICAgICAgICAgIHtpZDoiYWNyIixsYWJlbDoiVXJpbmUgQUNSIix1bml0OiJtZy9nIix0eXBlOiJudW1iZXIiLHBoOiIzMDAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhZ2U9K3YuYWdlLGVnZnI9K3YuZWdmcixhY3I9K3YuYWNyOyBpZighYWdlfHwhZWdmcnx8IWFjcnx8YWNyPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IG09di5zZXg9PT0iTWFsZSI/MTowOwogICAgICAgICAgY29uc3QgbHA9LTAuMjIwMSooYWdlLzEwLTcuMDM2KSswLjI0NjcqKG0tMC41NjQyKS0wLjU1NjcqKGVnZnIvNS03LjIyMikrMC40NTEwKihNYXRoLmxvZyhhY3IpLTUuMTM3KTsKICAgICAgICAgIGNvbnN0IHIyPSgxLU1hdGgucG93KDAuOTgzMixNYXRoLmV4cChscCkpKSoxMDAsIHI1PSgxLU1hdGgucG93KDAuOTM2NSxNYXRoLmV4cChscCkpKSoxMDA7CiAgICAgICAgICByZXR1cm4ge3ZhbDpyMi50b0ZpeGVkKDEpLHVuaXQ6IiUgMnlyIHJpc2siLHNlYzpgNXlyOiAke3I1LnRvRml4ZWQoMSl9JWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDMpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgMnlyIHJpc2sgJHtyLnZhbH0lICAtLSAgTG93LiBPcHRpbWlzZSBtb2RpZmlhYmxlIHJpc2sgZmFjdG9ycy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8MTApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgMnlyIHJpc2sgJHtyLnZhbH0lICAtLSAgTW9kZXJhdGUuIE5lcGhyb2xvZ3kgcmVmZXJyYWwuIEJlZ2luIFJSVCBlZHVjYXRpb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PDI1KSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YDJ5ciByaXNrICR7ci52YWx9JSAgLS0gIEhpZ2guIEFjdGl2ZSBSUlQgcHJlcGFyYXRpb24uIEFjY2VzcyBwbGFubmluZyBhbmQgdHJhbnNwbGFudCByZWZlcnJhbC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgMnlyIHJpc2sgJHtyLnZhbH0lICAtLSAgVmVyeSBoaWdoLiBVcmdlbnQgTURUIGlucHV0LiBQcmlvcml0aXNlIGFjY2VzcyBhbmQgdHJhbnNwbGFudCBsaXN0aW5nLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFZJLiBDS0QtTUJELAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InM2IiwgbGFiZWw6IkNLRC1NQkQiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6ImNvcnJjYSIsIG5hbWU6IkNvcnJlY3RlZCBDYWxjaXVtIiwgcmVmOiJQYXluZSBldCBhbC4sIEJNSiAxOTczIiwgdGFnOiJBbGJ1bWluLUFkanVzdGVkIENhbGNpdW0iLAogICAgICAgIGZvcm11bGE6IkNvcnJlY3RlZCBDYSA9IE1lYXN1cmVkIENhICsgMC44IHggKDQuMCAtIEFsYnVtaW4pIiwKICAgICAgICBub3RlOiJJb25pc2VkIGNhbGNpdW0gcHJlZmVycmVkIGluIGNyaXRpY2FsIGlsbG5lc3MuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJjYSIsbGFiZWw6Ik1lYXN1cmVkIFRvdGFsIENhbGNpdW0iLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI3LjgifSwKICAgICAgICAgIHtpZDoiYWxiIixsYWJlbDoiQWxidW1pbiIsdW5pdDoiZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi41In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgY2E9K3YuY2EsYWxiPSt2LmFsYjsgaWYoIWNhfHwhYWxiKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOihjYSswLjgqKDQtYWxiKSkudG9GaXhlZCgyKSx1bml0OiJtZy9kTCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDguNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBDb3JyZWN0ZWQgQ2EgJHtyLnZhbH0gIC0tICBIeXBvY2FsY2FlbWlhLiBDaGVjayBQVEgsIHZpdGFtaW4gRCwgcGhvc3BoYXRlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodj4xMC41KSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YENvcnJlY3RlZCBDYSAke3IudmFsfSAgLS0gIEh5cGVyY2FsY2FlbWlhLiBSZXZpZXcgY2FsY2l1bSBiaW5kZXJzIGFuZCB2aXRhbWluIEQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YENvcnJlY3RlZCBDYSAke3IudmFsfSAgLS0gIE5vcm1hbCAoOC41LTEwLjUpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJjYXBob3MiLCBuYW1lOiJDYWxjaXVtLVBob3NwaGF0ZSBQcm9kdWN0IiwgcmVmOiJLRElHTyBDS0QtTUJEIDIwMTciLCB0YWc6IlZhc2N1bGFyIENhbGNpZmljYXRpb24gUmlzayIsCiAgICAgICAgZm9ybXVsYToiQ2EgeCBQaG9zcGhhdGUgKGJvdGggbWcvZEwpIiwKICAgICAgICBub3RlOiI+NTUgbWdeMi9kTF4yIGFzc29jaWF0ZWQgd2l0aCBlbGV2YXRlZCBDViBtb3J0YWxpdHkgaW4gZGlhbHlzaXMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJjYSIsbGFiZWw6IkNvcnJlY3RlZCBDYWxjaXVtIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiOS41In0sCiAgICAgICAgICB7aWQ6InBob3MiLGxhYmVsOiJQaG9zcGhhdGUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI1LjUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjYT0rdi5jYSxwPSt2LnBob3M7IGlmKCFjYXx8IXApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KGNhKnApLnRvRml4ZWQoMSksdW5pdDoibWdeMi9kTF4yIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8NTUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQ2F4UGhvcyAke3IudmFsfSAgLS0gIEJlbG93IDU1LiBDb250aW51ZSBtaW5lcmFsIG1hbmFnZW1lbnQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YENheFBob3MgJHtyLnZhbH0gIC0tICBFbGV2YXRlZCAoPjU1KS4gU2lnbmlmaWNhbnQgY2FsY2lmaWNhdGlvbiByaXNrLiBSZXN0cmljdCBkaWV0YXJ5IHBob3NwaGF0ZSwgbm9uLWNhbGNpdW0gYmluZGVycyBwcmVmZXJyZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gVklJLiBIRVBBVE8tUkVOQUwgJiBBU0NJVEVTLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InM3IiwgbGFiZWw6IkhlcGF0by1SZW5hbCAmIEFzY2l0ZXMiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6Im1lbGQiLCBuYW1lOiJNRUxEIFNjb3JlIiwgcmVmOiJLYW1hdGggZXQgYWwuLCBIZXBhdG9sb2d5IDIwMDEiLCB0YWc6IkxpdmVyIERpc2Vhc2UgU2V2ZXJpdHkiLAogICAgICAgIGZvcm11bGE6Ik1FTEQgPSAzLjc4eGxuKEJpbGkpICsgMTEuMnhsbihJTlIpICsgOS41N3hsbihDcikgKyA2LjQzIiwKICAgICAgICBub3RlOiJMaXZlciB0cmFuc3BsYW50IGFsbG9jYXRpb24uIENyIGNhcHBlZCBhdCA0LjAuIElmIGRpYWx5c2lzID49Mngvd2VlayBzZXQgQ3IgPSA0LjAuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJiaWxpIixsYWJlbDoiQmlsaXJ1YmluIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi41In0sCiAgICAgICAgICB7aWQ6ImluciIsbGFiZWw6IklOUiIsdW5pdDoiIix0eXBlOiJudW1iZXIiLHBoOiIxLjgifSwKICAgICAgICAgIHtpZDoiY3IiLGxhYmVsOiJDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMS41In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgYmk9K3YuYmlsaSxpcj0rdi5pbnIsY3I9K3YuY3I7IGlmKCFiaXx8IWlyfHwhY3IpIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgQj1NYXRoLm1heChiaSwxKSxJPU1hdGgubWF4KGlyLDEpLEM9TWF0aC5taW4oTWF0aC5tYXgoY3IsMSksNCk7CiAgICAgICAgICByZXR1cm4ge3ZhbDpNYXRoLnJvdW5kKDMuNzgqTWF0aC5sb2coQikrMTEuMipNYXRoLmxvZyhJKSs5LjU3Kk1hdGgubG9nKEMpKzYuNDMpLHVuaXQ6InBvaW50cyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj1yLnZhbDsKICAgICAgICAgIGlmKHY8MTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgTUVMRCAke3Z9ICAtLSAgOTAtZGF5IG1vcnRhbGl0eSB+MiUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PDIwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YE1FTEQgJHt2fSAgLS0gIDkwLWRheSBtb3J0YWxpdHkgfjYlLiBDb25zaWRlciB0cmFuc3BsYW50IGV2YWx1YXRpb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PDMwKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YE1FTEQgJHt2fSAgLS0gIDkwLWRheSBtb3J0YWxpdHkgfjIwJS4gSGlnaCB0cmFuc3BsYW50IHByaW9yaXR5LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBNRUxEICR7dn0gIC0tICA5MC1kYXkgbW9ydGFsaXR5ID41MCUuIFVyZ2VudCB0cmFuc3BsYW50LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJzYWFnIiwgbmFtZToiU0FBRyIsIHJlZjoiUnVueW9uIGV0IGFsLiwgQW5uIEludGVybiBNZWQgMTk5MiIsIHRhZzoiUG9ydGFsIHZzIE5vbi1Qb3J0YWwgQXNjaXRlcyIsCiAgICAgICAgZm9ybXVsYToiU0FBRyA9IFNlcnVtIEFsYnVtaW4gLSBBc2NpdGVzIEFsYnVtaW5cbj49MS4xID0gcG9ydGFsIGh5cGVydGVuc2lvbiAoOTclIGFjY3VyYWN5KSIsCiAgICAgICAgbm90ZToiU2ltdWx0YW5lb3VzIHNhbXBsZXMgcmVxdWlyZWQuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJzYWxiIixsYWJlbDoiU2VydW0gQWxidW1pbiIsdW5pdDoiZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMy44In0sCiAgICAgICAgICB7aWQ6ImFhbGIiLGxhYmVsOiJBc2NpdGVzIEFsYnVtaW4iLHVuaXQ6ImcvZEwiLHR5cGU6Im51bWJlciIscGg6IjEuMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHM9K3Yuc2FsYixhPSt2LmFhbGI7IGlmKCFzfHwhYSkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDoocy1hKS50b0ZpeGVkKDIpLHVuaXQ6ImcvZEwifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9K3IudmFsOwogICAgICAgICAgaWYodj49MS4xKSByZXR1cm4ge2M6IiM3YzNhZWQiLHQ6YFNBQUcgJHtyLnZhbH0gPj0xLjEgIC0tICBQb3J0YWwgaHlwZXJ0ZW5zaW9uICg5NyUgYWNjdXJhY3kpLiBDaXJyaG9zaXMsIGNhcmRpYWMgYXNjaXRlcywgQnVkZC1DaGlhcmkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YFNBQUcgJHtyLnZhbH0gPDEuMSAgLS0gIE5vbi1wb3J0YWwuIEV4dWRhdGl2ZTogcGVyaXRvbmVhbCBtYWxpZ25hbmN5LCBUQiwgcGFuY3JlYXRpdGlzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFZJSUkuIE5FUEhST1RJQyBTWU5EUk9NRSwKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIHsKICAgIGlkOiJzOCIsIGxhYmVsOiJOZXBocm90aWMgU3luZHJvbWUiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6InVwY3Jfc3RhZ2luZyIsIG5hbWU6IlVQQ1IgJiBQcm90ZWludXJpYSBTdGFnaW5nIiwgcmVmOiJLRElHTyBDS0QgMjAxMjsgS0RJR08gR2xvbWVydWxhciBEaXNlYXNlcyAyMDIxIiwgdGFnOiJQcm90ZWludXJpYSBTdGFnaW5nIiwKICAgICAgICBmb3JtdWxhOiJVUENSIChtZy9nKSA9IFtVIFByb3RlaW4gLyBVIENyZWF0aW5pbmVdIHggMTAwIiwKICAgICAgICBub3RlOiJOZXBocm90aWMtcmFuZ2U6IFVQQ1IgPj0zNTAwIG1nL2cgKD49My41IGcvMjRoKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVfcHJvdCIsbGFiZWw6IlVyaW5lIFRvdGFsIFByb3RlaW4iLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIzNTAifSwKICAgICAgICAgIHtpZDoidV9jciIsbGFiZWw6IlVyaW5lIENyZWF0aW5pbmUiLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIxMDAifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB1cD0rdi51X3Byb3QsIHVjPSt2LnVfY3I7CiAgICAgICAgICBpZighdXB8fCF1Y3x8dWM8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KCh1cC91YykqMTAwKS50b0ZpeGVkKDApLHVuaXQ6Im1nL2ciLHNlYzpgfiR7KCh1cC91YykqMTAwLzEwMDApLnRvRml4ZWQoMil9IGcvZGF5YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCB2PStyLnZhbDsKICAgICAgICAgIGlmKHY8MTUwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YFVQQ1IgJHtyLnZhbH0gIC0tICBOb3JtYWwgKDwxNTApLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjwxMDAwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YFVQQ1IgJHtyLnZhbH0gIC0tICBTaWduaWZpY2FudCBwcm90ZWludXJpYS4gUkFBUyBibG9ja2FkZSBhbmQgU0dMVDJpIGNvbnNpZGVyYXRpb24gcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PDM1MDApIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgVVBDUiAke3IudmFsfSAgLS0gIEhlYXZ5IHN1Yi1uZXBocm90aWMgcHJvdGVpbnVyaWEuIE5lcGhyb2xvZ3kgcmVmZXJyYWwuIENvbnNpZGVyIGJpb3BzeS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgVVBDUiAke3IudmFsfSAgLS0gIE5lcGhyb3RpYy1yYW5nZSAoPj0zNTAwKS4gUmVuYWwgYmlvcHN5IHN0cm9uZ2x5IHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJzZWxlY3Rpdml0eSIsIG5hbWU6IlNlbGVjdGl2aXR5IEluZGV4IiwgcmVmOiJDYW1lcm9uICYgQmxhbmRmb3JkLCBMYW5jZXQgMTk2NiIsIHRhZzoiU2VsZWN0aXZlIHZzIE5vbi1TZWxlY3RpdmUiLAogICAgICAgIGZvcm11bGE6IlNJID0gKFVJZ0cvUElnRykgLyAoVVRyYW5zZmVycmluL1BUcmFuc2ZlcnJpbilcbjwwLjEgc2VsZWN0aXZlIChNQ0QpLiA+MC4yIG5vbi1zZWxlY3RpdmUiLAogICAgICAgIG5vdGU6IlJldGFpbnMgdXRpbGl0eSBpbiBwYWVkaWF0cmljIG5lcGhyb3RpYyBzeW5kcm9tZS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVpZ2ciLGxhYmVsOiJVcmluZSBJZ0ciLHVuaXQ6Im1nL2RMIix0eXBlOiJudW1iZXIiLHBoOiI1In0sCiAgICAgICAgICB7aWQ6InBpZ2ciLGxhYmVsOiJQbGFzbWEgSWdHIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMTIwMCJ9LAogICAgICAgICAge2lkOiJ1dGYiLGxhYmVsOiJVcmluZSBUcmFuc2ZlcnJpbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjMwIn0sCiAgICAgICAgICB7aWQ6InB0ZiIsbGFiZWw6IlBsYXNtYSBUcmFuc2ZlcnJpbiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjI1MCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVpPSt2LnVpZ2cscGk9K3YucGlnZyx1dD0rdi51dGYscHQ9K3YucHRmOwogICAgICAgICAgaWYoIXVpfHwhcGl8fCF1dHx8IXB0fHxwaTw9MHx8cHQ8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KCh1aS9waSkvKHV0L3B0KSkudG9GaXhlZCgzKSx1bml0OiJyYXRpbyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj0rci52YWw7CiAgICAgICAgICBpZih2PDAuMSkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBTSSAke3IudmFsfSAgLS0gIEhpZ2hseSBzZWxlY3RpdmUuIEZhdm91cnMgTUNELiBTdHJvbmcgc3Rlcm9pZCByZXNwb25zZSBleHBlY3RlZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHY8MC4yKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YFNJICR7ci52YWx9ICAtLSAgSW50ZXJtZWRpYXRlLiBNQ0Qgb3IgZWFybHkgRlNHUy4gQmlvcHN5IGluZGljYXRlZCBpbiBhZHVsdHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFNJICR7ci52YWx9ICAtLSAgTm9uLXNlbGVjdGl2ZS4gRmF2b3VycyBGU0dTLCBtZW1icmFub3VzLCBvciBzZWNvbmRhcnkgR04uIEJpb3BzeSBpbmRpY2F0ZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gSVguIFJBQVMgJiBIWVBFUlRFTlNJT04sCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczkiLCBsYWJlbDoiUkFBUyAmIEh5cGVydGVuc2lvbiIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiYXJyIiwgbmFtZToiQWxkb3N0ZXJvbmUtUmVuaW4gUmF0aW8gKEFSUikiLCByZWY6IkZ1bmRlciBldCBhbC4sIEpDRU0gMjAxNiIsIHRhZzoiUHJpbWFyeSBBbGRvc3Rlcm9uaXNtIFNjcmVlbiIsCiAgICAgICAgZm9ybXVsYToiQVJSID0gUEFDIChuZy9kTCkgLyBQUkEgKG5nL21ML2gpXG5Qb3NpdGl2ZTogQVJSID49MjAgQU5EIFBBQyA+PTE1IG5nL2RMIiwKICAgICAgICBub3RlOiJDb2xsZWN0IG9mZiBzcGlyb25vbGFjdG9uZSA+PTYgd2Vla3MuIE5vcm1hbGlzZSBLKyBmaXJzdC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImFsZG8iLGxhYmVsOiJQbGFzbWEgQWxkb3N0ZXJvbmUgKFBBQykiLHVuaXQ6Im5nL2RMIix0eXBlOiJudW1iZXIiLHBoOiIxOCJ9LAogICAgICAgICAge2lkOiJwcmEiLGxhYmVsOiJQbGFzbWEgUmVuaW4gQWN0aXZpdHkgKFBSQSkiLHVuaXQ6Im5nL21ML2giLHR5cGU6Im51bWJlciIscGg6IjAuNDUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhPSt2LmFsZG8scD0rdi5wcmE7CiAgICAgICAgICBpZighYXx8IXB8fHA8PTApIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6KGEvcCkudG9GaXhlZCgxKSx1bml0OiJBUlIiLHNlYzpgUEFDOiAke2F9IG5nL2RMIHwgUFJBOiAke3B9IG5nL21ML2hgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgYXJyPStyLnZhbCxhbGRvPSt2LmFsZG87CiAgICAgICAgICBpZihhcnI+PTIwJiZhbGRvPj0xNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBBUlIgJHtyLnZhbH0gd2l0aCBQQUMgJHthbGRvfSAgLS0gIFBvc2l0aXZlIHNjcmVlbi4gQ29uZmlybWF0b3J5IHRlc3RpbmcgaW5kaWNhdGVkIChvcmFsIHNvZGl1bSBsb2FkaW5nIG9yIElWIHNhbGluZSBpbmZ1c2lvbikuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihhcnI+PTIwKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEFSUiAke3IudmFsfSAgLS0gIFJhdGlvIGVsZXZhdGVkIGJ1dCBQQUMgJHthbGRvfSBiZWxvdyAxNS4gQm9yZGVybGluZS4gTG93IFBSQSBjYW4gYXJ0ZWZhY3R1YWxseSBlbGV2YXRlIEFSUi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQVJSICR7ci52YWx9ICAtLSAgTmVnYXRpdmUgc2NyZWVuLiBQcmltYXJ5IGFsZG9zdGVyb25pc20gbGVzcyBsaWtlbHkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InJlbmluX3BoZW5vIiwgbmFtZToiW1JFRl0gUmVuaW4gUGhlbm90eXBlICYgRHJ1ZyBTZWxlY3Rpb24iLCByZWY6IldpbGxpYW1zIGV0IGFsLiwgQk1KIDIwMDQ7IExhcmFnaCwgQW0gSiBNZWQgMTk3OCIsIHRhZzoiUFJBLUd1aWRlZCBUaGVyYXB5IiwKICAgICAgICBmb3JtdWxhOiJMb3cgUmVuaW46IFBSQSA8MC42NSAtPiBWLWRydWdzIChWb2x1bWUpXG5IaWdoIFJlbmluOiBQUkEgPj0wLjY1IC0+IFItZHJ1Z3MgKFJBQVMpIiwKICAgICAgICBub3RlOiJSRUZFUkVOQ0UgUEFORUwgIC0tICBUaGlzIGlzIG5vdCBhIHZhbGlkYXRlZCBzY29yaW5nIHRvb2wuIFB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEgYXJlIHByZXNlbnRlZCBmb3IgY2xpbmljYWwgcmVmZXJlbmNlIG9ubHkuIEludGVycHJldGF0aW9uIHJlcXVpcmVzIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudC5cblxuUFJBLWd1aWRlZCBkcnVnIHNlbGVjdGlvbiBwYWlycyB3ZWxsIHdpdGggdGhlIEFCQ0QgdHJlYXRtZW50IHJ1bGUuIiwKICAgICAgICBpbnB1dHM6W10sCiAgICAgICAgY29tcHV0ZSgpeyByZXR1cm4ge3ZhbDoiUmVmZXJlbmNlIFBhbmVsIix1bml0OiJTZWUgZ3VpZGVsaW5lIGNyaXRlcmlhIGFib3ZlIn07IH0sCiAgICAgICAgaW50ZXJwcmV0KCl7IHJldHVybiB7YzoiIzYzNjZmMSIsdDpgVGhpcyBpcyBhIHJlZmVyZW5jZSBwYW5lbCBzdW1tYXJpc2luZyBwdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhLiBObyBjb21wb3NpdGUgc2NvcmUgaXMgY29tcHV0ZWQuIEFwcGx5IHRoZXNlIGNyaXRlcmlhIHVzaW5nIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCB3aXRoaW4geW91ciBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InJlc19odG4iLCBuYW1lOiJSZXNpc3RhbnQgSHlwZXJ0ZW5zaW9uIiwgcmVmOiJDYXJleSBldCBhbC4sIEh5cGVydGVuc2lvbiAyMDE4IiwgdGFnOiJSZXNpc3RhbnQgSFROIiwKICAgICAgICBmb3JtdWxhOiJCUCA+dGFyZ2V0IEFORCA+PTMgZHJ1Z3MgYXQgb3B0aW1hbCBkb3NlcyBBTkQgaW5jbHVkZXMgZGl1cmV0aWMiLAogICAgICAgIG5vdGU6IkdVSURFTElORS1CQVNFRCBUT09MICAtLSAgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5Db25maXJtIHRydWUgcmVzaXN0YW5jZTogYWRoZXJlbmNlIHZlcmlmaWVkLCB3aGl0ZS1jb2F0IGV4Y2x1ZGVkLCBzZWNvbmRhcnkgY2F1c2VzIHNjcmVlbmVkLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYnBfdGFyZ2V0IixsYWJlbDoiQlAgYWJvdmUgdGFyZ2V0IGRlc3BpdGUgdHJlYXRtZW50Iix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJkcnVnczMiLGxhYmVsOiJPbiA+PTMgZHJ1ZyBjbGFzc2VzIGF0IG9wdGltYWwgZG9zZXMiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImRpdXJldGljIixsYWJlbDoiUmVnaW1lbiBpbmNsdWRlcyBhIGRpdXJldGljIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJhZGhlcmVuY2UiLGxhYmVsOiJBZGhlcmVuY2UgY29uZmlybWVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJzZWNvbmRhcnkiLGxhYmVsOiJTZWNvbmRhcnkgY2F1c2VzIGV4Y2x1ZGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHBvc3M9di5icF90YXJnZXQmJnYuZHJ1Z3MzJiZ2LmRpdXJldGljOwogICAgICAgICAgY29uc3QgY29uZmlybWVkPXBvc3MmJnYuYWRoZXJlbmNlJiZ2LnNlY29uZGFyeTsKICAgICAgICAgIHJldHVybiB7dmFsOmNvbmZpcm1lZD8iVFJVRSBSRVNJU1RBTlQgSFROIjpwb3NzPyJQT1NTSUJMRSAoVU5DT05GSVJNRUQpIjoiRE9FUyBOT1QgTUVFVCBDUklURVJJQSIsdW5pdDoiIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBpZihyLnZhbD09PSJUUlVFIFJFU0lTVEFOVCBIVE4iKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFRydWUgcmVzaXN0YW50IEhUTiBjb25maXJtZWQuIENvbnNpZGVyIHNwaXJvbm9sYWN0b25lIGFzIDR0aCBhZ2VudC4gUkROIGVsaWdpYmlsaXR5IGFzc2Vzc21lbnQgaWYgZUdGUiA+NDAuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyLnZhbC5pbmNsdWRlcygiVU5DT05GSVJNRUQiKSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBQb3NzaWJseSByZXNpc3RhbnQuIENvbmZpcm0gYWRoZXJlbmNlLCBwZXJmb3JtIEFCUE0sIHNjcmVlbiBzZWNvbmRhcnkgY2F1c2VzIGJlZm9yZSBsYWJlbGxpbmcuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YERvZXMgbm90IG1lZXQgcmVzaXN0YW50IEhUTiBjcml0ZXJpYS4gT3B0aW1pc2UgY3VycmVudCByZWdpbWVuLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFguIENBUkRJT1JFTkFMIFNZTkRST01FLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InMxMCIsIGxhYmVsOiJDYXJkaW9yZW5hbCBTeW5kcm9tZSIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiY3JzMSIsIG5hbWU6IltSRUZdIENSUyBUeXBlIDEgKEFjdXRlIEhGIC0+IEFLSSkiLCByZWY6IlJvbmNvIGV0IGFsLiwgSkFDQyAyMDA4IiwgdGFnOiJBY3V0ZSBDUlMiLAogICAgICAgIGZvcm11bGE6IlJlbmFsIFBlcmZ1c2lvbiBQcmVzc3VyZSA9IE1BUCAtIENWUCIsCiAgICAgICAgbm90ZToiUkVGRVJFTkNFIFBBTkVMICAtLSAgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cblZlbm91cyBjb25nZXN0aW9uIGNvbnRyaWJ1dGVzIHRvIEFLSSBhcyBtdWNoIGFzIHJlZHVjZWQgY2FyZGlhYyBvdXRwdXQuIiwKICAgICAgICBpbnB1dHM6W10sCiAgICAgICAgY29tcHV0ZSgpeyByZXR1cm4ge3ZhbDoiUmVmZXJlbmNlIFBhbmVsIix1bml0OiJTZWUgZ3VpZGVsaW5lIGNyaXRlcmlhIGFib3ZlIn07IH0sCiAgICAgICAgaW50ZXJwcmV0KCl7IHJldHVybiB7YzoiIzYzNjZmMSIsdDpgVGhpcyBpcyBhIHJlZmVyZW5jZSBwYW5lbCBzdW1tYXJpc2luZyBwdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhLiBObyBjb21wb3NpdGUgc2NvcmUgaXMgY29tcHV0ZWQuIEFwcGx5IHRoZXNlIGNyaXRlcmlhIHVzaW5nIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCB3aXRoaW4geW91ciBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImZlbmFfY2FyZGlvIiwgbmFtZToiRkVOYSBpbiBDYXJkaW9yZW5hbCIsIHJlZjoiTXVsbGVucyBldCBhbC4sIEpBQ0MgMjAwOSIsIHRhZzoiRkVOYSBpbiBWb2x1bWUgT3ZlcmxvYWQiLAogICAgICAgIGZvcm11bGE6IkZFTmEgPDElIHdpdGggdm9sdW1lIG92ZXJsb2FkID0gZWZmZWN0aXZlIGFydGVyaWFsIHVuZGVyZmlsbGluZyIsCiAgICAgICAgbm90ZToiR1VJREVMSU5FLUJBU0VEIFRPT0wgIC0tICBUaGlzIGNhbGN1bGF0b3IgYXBwbGllcyBwdWJsaXNoZWQgY2xpbmljYWwgdGhyZXNob2xkcyBidXQgaXMgbm90IGl0c2VsZiBhIHZhbGlkYXRlZCBjb21wb3NpdGUgc2NvcmluZyBpbnN0cnVtZW50LiBJbnRlcnByZXQgd2l0aGluIGNsaW5pY2FsIGNvbnRleHQuXG5cblBhcmFkb3ggb2YgQ1JTOiBGRU5hIDwxJSBkZXNwaXRlIGZsdWlkIG92ZXJsb2FkLiBMb3cgRUFCViB0cmlnZ2VycyBhdmlkIE5hIHJldGVudGlvbi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVuYSIsbGFiZWw6IlVyaW5lIFNvZGl1bSIsdW5pdDoibUVxL0wiLHR5cGU6Im51bWJlciIscGg6IjEyIn0sCiAgICAgICAgICB7aWQ6InBuYSIsbGFiZWw6IlBsYXNtYSBTb2RpdW0iLHVuaXQ6Im1FcS9MIix0eXBlOiJudW1iZXIiLHBoOiIxNDAifSwKICAgICAgICAgIHtpZDoidWNyIixsYWJlbDoiVXJpbmUgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjYwIn0sCiAgICAgICAgICB7aWQ6InBjciIsbGFiZWw6IlBsYXNtYSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMi41In0sCiAgICAgICAgICB7aWQ6InZvbCIsbGFiZWw6IlZvbHVtZSBzdGF0dXMiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIlZvbHVtZSBvdmVybG9hZGVkIiwiVm9sdW1lIGRlcGxldGUiLCJFdXZvbGFlbWljIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHVuPSt2LnVuYSxwbj0rdi5wbmEsdWM9K3YudWNyLHBjPSt2LnBjcjsKICAgICAgICAgIGlmKCF1bnx8IXBufHwhdWN8fCFwY3x8cG48PTB8fHVjPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIHJldHVybiB7dmFsOigodW4vcG4pLyh1Yy9wYykqMTAwKS50b0ZpeGVkKDIpLHVuaXQ6IiUifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZmVuYT0rci52YWw7CiAgICAgICAgICBpZihmZW5hPDEmJnYudm9sPT09IlZvbHVtZSBvdmVybG9hZGVkIikgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBGRU5hICR7ci52YWx9JSB3aXRoIG92ZXJsb2FkICAtLSAgQ2xhc3NpYyBDUlMuIEF2aWQgTmEgcmV0ZW50aW9uIGRlc3BpdGUgZmx1aWQgZXhjZXNzLiBPcHRpbWlzZSBDTywgYWdncmVzc2l2ZSBkaXVyZXNpcyBvciBVRi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKGZlbmE8MSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBGRU5hICR7ci52YWx9JSAgLS0gIFByZS1yZW5hbC4gQWRkcmVzcyBlZmZlY3RpdmUgY2lyY3VsYXRpbmcgdm9sdW1lLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBGRU5hICR7ci52YWx9JSAoPj0xJSkgIC0tICBJbnRyaW5zaWMgY29tcG9uZW50LiBSZXZpZXcgZm9yIGNvbmN1cnJlbnQgQVROLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFhJLiBHTE9NRVJVTEFSIERJU0VBU0VTLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InMxMSIsIGxhYmVsOiJHbG9tZXJ1bGFyIERpc2Vhc2VzIiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJhbnRpX2dibSIsIG5hbWU6IltSRUZdIEFudGktR0JNIERpc2Vhc2UiLCByZWY6IlB1c2V5IENELCBLaWRuZXkgSW50IDIwMDMiLCB0YWc6Ikdvb2RwYXN0dXJlIC8gQW50aS1HQk0iLAogICAgICAgIGZvcm11bGE6IkFudGktR0JNIHRpdHJlIHBvc2l0aXZlICsgUlBHTiArLy0gcHVsbW9uYXJ5IGhhZW1vcnJoYWdlIiwKICAgICAgICBub3RlOiJSRUZFUkVOQ0UgUEFORUwgIC0tICBUaGlzIGlzIG5vdCBhIHZhbGlkYXRlZCBzY29yaW5nIHRvb2wuIFB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEgYXJlIHByZXNlbnRlZCBmb3IgY2xpbmljYWwgcmVmZXJlbmNlIG9ubHkuIEludGVycHJldGF0aW9uIHJlcXVpcmVzIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudC5cblxuTUVESUNBTCBFTUVSR0VOQ1kuIFRyZWF0IHdpdGhvdXQgYXdhaXRpbmcgYmlvcHN5IGlmIGNsaW5pY2FsIHBpY3R1cmUgY2xlYXIuIiwKICAgICAgICBpbnB1dHM6W10sCiAgICAgICAgY29tcHV0ZSgpeyByZXR1cm4ge3ZhbDoiUmVmZXJlbmNlIFBhbmVsIix1bml0OiJTZWUgZ3VpZGVsaW5lIGNyaXRlcmlhIGFib3ZlIn07IH0sCiAgICAgICAgaW50ZXJwcmV0KCl7IHJldHVybiB7YzoiIzYzNjZmMSIsdDpgVGhpcyBpcyBhIHJlZmVyZW5jZSBwYW5lbCBzdW1tYXJpc2luZyBwdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhLiBObyBjb21wb3NpdGUgc2NvcmUgaXMgY29tcHV0ZWQuIEFwcGx5IHRoZXNlIGNyaXRlcmlhIHVzaW5nIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCB3aXRoaW4geW91ciBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImFuY2EiLCBuYW1lOiJbUkVGXSBBTkNBLUFzc29jaWF0ZWQgVmFzY3VsaXRpcyIsIHJlZjoiSmVubmV0dGUgZXQgYWwuLCBBcnRocml0aXMgUmhldW0gMjAxMyIsIHRhZzoiQUFWICAtLSAgR1BBL01QQSIsCiAgICAgICAgZm9ybXVsYToiQU5DQSAoUFIzIG9yIE1QTykgcG9zaXRpdmUgKyBSUEdOIG9yIHN5c3RlbWljIHZhc2N1bGl0aXMiLAogICAgICAgIG5vdGU6IlJFRkVSRU5DRSBQQU5FTCAgLS0gIFRoaXMgaXMgbm90IGEgdmFsaWRhdGVkIHNjb3JpbmcgdG9vbC4gUHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYSBhcmUgcHJlc2VudGVkIGZvciBjbGluaWNhbCByZWZlcmVuY2Ugb25seS4gSW50ZXJwcmV0YXRpb24gcmVxdWlyZXMgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50LlxuXG5SUEdOIGlzIGEgbmVwaHJvbG9neSBlbWVyZ2VuY3kgcmVxdWlyaW5nIHNhbWUtZGF5IGV2YWx1YXRpb24uIiwKICAgICAgICBpbnB1dHM6W10sCiAgICAgICAgY29tcHV0ZSgpeyByZXR1cm4ge3ZhbDoiUmVmZXJlbmNlIFBhbmVsIix1bml0OiJTZWUgZ3VpZGVsaW5lIGNyaXRlcmlhIGFib3ZlIn07IH0sCiAgICAgICAgaW50ZXJwcmV0KCl7IHJldHVybiB7YzoiIzYzNjZmMSIsdDpgVGhpcyBpcyBhIHJlZmVyZW5jZSBwYW5lbCBzdW1tYXJpc2luZyBwdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhLiBObyBjb21wb3NpdGUgc2NvcmUgaXMgY29tcHV0ZWQuIEFwcGx5IHRoZXNlIGNyaXRlcmlhIHVzaW5nIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudCB3aXRoaW4geW91ciBpbnN0aXR1dGlvbmFsIHByb3RvY29scy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ImNvbXBsZW1lbnRfYWN0IiwgbmFtZToiW1JFRl0gQ29tcGxlbWVudCBQYXR0ZXJuIiwgcmVmOiJTZXRoaSAmIEZlcnZlbnphLCBORUpNIDIwMTIiLCB0YWc6IkMzL0M0IERpZmZlcmVudGlhdGlvbiIsCiAgICAgICAgZm9ybXVsYToiQzMgTG93ICsgQzQgTG93ID0gQ2xhc3NpY2FsIChTTEUsIElDLU1QR04pXG5DMyBMb3cgKyBDNCBOb3JtYWwgPSBBbHRlcm5hdGl2ZSAoQzNHLCBQU0dOLCBhSFVTKSIsCiAgICAgICAgbm90ZToiUkVGRVJFTkNFIFBBTkVMICAtLSAgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cbkVzc2VudGlhbCBpbiBHTiB3b3JrdXAuIFBhdHRlcm4gbmFycm93cyBkaWZmZXJlbnRpYWwgYmVmb3JlIGJpb3BzeS4iLAogICAgICAgIGlucHV0czpbXSwKICAgICAgICBjb21wdXRlKCl7IHJldHVybiB7dmFsOiJSZWZlcmVuY2UgUGFuZWwiLHVuaXQ6IlNlZSBndWlkZWxpbmUgY3JpdGVyaWEgYWJvdmUifTsgfSwKICAgICAgICBpbnRlcnByZXQoKXsgcmV0dXJuIHtjOiIjNjM2NmYxIix0OmBUaGlzIGlzIGEgcmVmZXJlbmNlIHBhbmVsIHN1bW1hcmlzaW5nIHB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEuIE5vIGNvbXBvc2l0ZSBzY29yZSBpcyBjb21wdXRlZC4gQXBwbHkgdGhlc2UgY3JpdGVyaWEgdXNpbmcgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50IHdpdGhpbiB5b3VyIGluc3RpdHV0aW9uYWwgcHJvdG9jb2xzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OyB9CiAgICAgIH0sCiAgICBdCiAgfSwKCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBYSUkuIFZBU0NVTEFSIE5FUEhST0xPR1ksCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczEyIiwgbGFiZWw6IlZhc2N1bGFyIE5lcGhyb2xvZ3kiLAogICAgY2FsY3M6WwogICAgXQogIH0sCgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gWElJSS4gSEFFTUFUT0xPR0lDICAtLSAgVE1BLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InMxMyIsIGxhYmVsOiJIYWVtYXRvbG9naWMgIC0tICBUTUEiLAogICAgY2FsY3M6WwogICAgICB7CiAgICAgICAgaWQ6InRtYSIsIG5hbWU6IltSRUZdIFRNQSBEaWFnbm9zdGljIFBhdHRlcm4iLCByZWY6Ikdlb3JnZSBKTiwgTkVKTSAyMDA2IiwgdGFnOiJUaHJvbWJvdGljIE1pY3JvYW5naW9wYXRoeSIsCiAgICAgICAgZm9ybXVsYToiVE1BID0gQUtJICsgTUFIQSAoc2NoaXN0b2N5dGVzICsgbmVnIENvb21icykgKyBUaHJvbWJvY3l0b3BlbmlhICsgRWxldmF0ZWQgTERIIiwKICAgICAgICBub3RlOiJSRUZFUkVOQ0UgUEFORUwgIC0tICBUaGlzIGlzIG5vdCBhIHZhbGlkYXRlZCBzY29yaW5nIHRvb2wuIFB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEgYXJlIHByZXNlbnRlZCBmb3IgY2xpbmljYWwgcmVmZXJlbmNlIG9ubHkuIEludGVycHJldGF0aW9uIHJlcXVpcmVzIGluZGVwZW5kZW50IGNsaW5pY2FsIGp1ZGdlbWVudC5cblxuQURBTVRTMTMgaXMgdGhlIGtleSB0ZXN0IGRpZmZlcmVudGlhdGluZyBUVFAgZnJvbSBvdGhlciBUTUFzLiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJhZGFtdHMxMyIsIG5hbWU6IkFEQU1UUzEzIEludGVycHJldGF0aW9uIiwgcmVmOiJTYWRsZXIgSkUsIE5FSk0gMjAwNCIsIHRhZzoiVFRQIHZzIGFIVVMiLAogICAgICAgIGZvcm11bGE6IjwxMCUgPSBUVFAgfCAxMC01MCUgPSBJbmRldGVybWluYXRlIHwgPjUwJSA9IFRUUCBleGNsdWRlZCIsCiAgICAgICAgbm90ZToiR1VJREVMSU5FLUJBU0VEIFRPT0wgIC0tICBUaGlzIGNhbGN1bGF0b3IgYXBwbGllcyBwdWJsaXNoZWQgY2xpbmljYWwgdGhyZXNob2xkcyBidXQgaXMgbm90IGl0c2VsZiBhIHZhbGlkYXRlZCBjb21wb3NpdGUgc2NvcmluZyBpbnN0cnVtZW50LiBJbnRlcnByZXQgd2l0aGluIGNsaW5pY2FsIGNvbnRleHQuXG5cbkFEQU1UUzEzIGNsZWF2ZXMgdWx0cmEtbGFyZ2UgVldGIG11bHRpbWVycy4gQ2FuIGJlIGRlcGxldGVkIGluIHNlcHNpcyAgLS0gIGludGVycHJldCBjYXV0aW91c2x5LiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYWRhbXRzMTMiLGxhYmVsOiJBREFNVFMxMyBBY3Rpdml0eSIsdW5pdDoiJSIsdHlwZToibnVtYmVyIixwaDoiOCJ9LAogICAgICAgICAge2lkOiJpbmhpYml0b3IiLGxhYmVsOiJBbnRpLUFEQU1UUzEzIGFudGlib2R5IHBvc2l0aXZlIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGE9K3YuYWRhbXRzMTM7IGlmKCFhJiZhIT09MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBjYXQ9YTwxMD8iVFRQIjphPD01MD8iSW5kZXRlcm1pbmF0ZSI6IlRUUCBFeGNsdWRlZCI7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjYXQsdW5pdDpgQURBTVRTMTM6ICR7YX0lYH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGE9K3YuYWRhbXRzMTM7CiAgICAgICAgICBpZihhPDEwKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEFEQU1UUzEzICR7YX0lICAtLSAgVFRQLiAke3YuaW5oaWJpdG9yPyJBY3F1aXJlZCAoYW50aWJvZHkrKSI6IkNvbmdlbml0YWwgaWYgYW50aWJvZHktIn0uIFBsYXNtYSBleGNoYW5nZSArIHN0ZXJvaWRzICsgcml0dXhpbWFiLiBDYXBsYWNpenVtYWIgaWYgYXZhaWxhYmxlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoYTw9NTApIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgQURBTVRTMTMgJHthfSUgIC0tICBJbmRldGVybWluYXRlLiBOb3QgY2xhc3NpYyBUVFAuIENsaW5pY2FsIGp1ZGdlbWVudC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQURBTVRTMTMgJHthfSUgIC0tICBUVFAgZXhjbHVkZWQuIENvbnNpZGVyOiBhSFVTIChlY3VsaXp1bWFiKSwgU1RFQy1IVVMgKHN1cHBvcnRpdmUpLCBkcnVnLWluZHVjZWQsIEhFTExQLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFhJVi4gT0JTVEVUUklDIE5FUEhST0xPR1ksCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczE0IiwgbGFiZWw6Ik9ic3RldHJpYyBOZXBocm9sb2d5IiwKICAgIGNhbGNzOlsKICAgICAgewogICAgICAgIGlkOiJwZV91cGNyIiwgbmFtZToiUHJlZWNsYW1wc2lhIFByb3RlaW51cmlhIiwgcmVmOiJBQ09HIFByYWN0aWNlIEJ1bGxldGluIDIyMiwgMjAyMCIsIHRhZzoiUHJvdGVpbnVyaWEgaW4gUHJlZ25hbmN5IiwKICAgICAgICBmb3JtdWxhOiJVUENSID49MC4zIG1nL21nID0gc2lnbmlmaWNhbnQgcHJvdGVpbnVyaWEgaW4gcHJlZ25hbmN5IiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCAgLS0gIFRoaXMgY2FsY3VsYXRvciBhcHBsaWVzIHB1Ymxpc2hlZCBjbGluaWNhbCB0aHJlc2hvbGRzIGJ1dCBpcyBub3QgaXRzZWxmIGEgdmFsaWRhdGVkIGNvbXBvc2l0ZSBzY29yaW5nIGluc3RydW1lbnQuIEludGVycHJldCB3aXRoaW4gY2xpbmljYWwgY29udGV4dC5cblxuUmVxdWlyZXMgbmV3LW9uc2V0IEhUTiA+PTE0MC85MCBhZnRlciAyMCB3ZWVrcyBmb3IgcHJlZWNsYW1wc2lhIGRpYWdub3Npcy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InVwY3IiLGxhYmVsOiJTcG90IFVyaW5lIFBDUiIsdW5pdDoibWcvbWciLHR5cGU6Im51bWJlciIscGg6IjAuNDUifSwKICAgICAgICAgIHtpZDoic2JwIixsYWJlbDoiU3lzdG9saWMgQlAiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6IjE1MCJ9LAogICAgICAgICAge2lkOiJkYnAiLGxhYmVsOiJEaWFzdG9saWMgQlAiLHVuaXQ6Im1tSGciLHR5cGU6Im51bWJlciIscGg6Ijk4In0sCiAgICAgICAgICB7aWQ6ImdhIixsYWJlbDoiR2VzdGF0aW9uYWwgQWdlIix1bml0OiJ3ZWVrcyIsdHlwZToibnVtYmVyIixwaDoiMzIifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCB1cGNyPSt2LnVwY3IsZ2E9K3YuZ2E7IGlmKCF1cGNyfHwhZ2EpIHJldHVybiBudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6dXBjci50b0ZpeGVkKDIpLHVuaXQ6Im1nL21nIFVQQ1IifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgdXBjcj0rci52YWwsc2JwPSt2LnNicCxkYnA9K3YuZGJwLGdhPSt2LmdhOwogICAgICAgICAgY29uc3QgaHRuPXNicD49MTQwfHxkYnA+PTkwOwogICAgICAgICAgaWYodXBjcj49MC4zJiZodG4pIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgVVBDUiAke3IudmFsfSB3aXRoIEhUTiBhdCAke2dhfXdrICAtLSAgUHJlZWNsYW1wc2lhIGNyaXRlcmlhIG1ldC4gTUZNIHJlZmVycmFsLiBBbnRpaHlwZXJ0ZW5zaXZlcy4gRm9ldGFsIHN1cnZlaWxsYW5jZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHVwY3I+PTAuMykgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBVUENSICR7ci52YWx9ICAtLSAgU2lnbmlmaWNhbnQgcHJvdGVpbnVyaWEgYXQgJHtnYX13ayB3aXRob3V0IEhUTiB5ZXQuIE1vbml0b3IgY2xvc2VseS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgVVBDUiAke3IudmFsfSAgLS0gIEJlbG93IHRocmVzaG9sZC4gUm91dGluZSBtb25pdG9yaW5nLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJzZmx0X3BsZ2YiLCBuYW1lOiJzRmx0LTEvUGxHRiBSYXRpbyIsIHJlZjoiVmVybG9ocmVuIGV0IGFsLiwgQW0gSiBPYnN0ZXQgR3luZWNvbCAyMDEyIiwgdGFnOiJQcmVlY2xhbXBzaWEgUHJlZGljdGlvbiIsCiAgICAgICAgZm9ybXVsYToiPDM4ID0gbG93IHJpc2sgKHJ1bGUgb3V0KSB8ID44NSAoMjAtMzR3aykgb3IgPjExMCAoPjM0d2spID0gaGlnaCByaXNrIiwKICAgICAgICBub3RlOiJSYXRpbyA8MzggaGFzIDk5JSBOUFYgZm9yIHByZWVjbGFtcHNpYSB3aXRoaW4gMSB3ZWVrIChQUk9HTk9TSVMgdHJpYWwpLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoic2ZsdCIsbGFiZWw6InNGbHQtMSIsdW5pdDoicGcvbUwiLHR5cGU6Im51bWJlciIscGg6IjUyMDAifSwKICAgICAgICAgIHtpZDoicGxnZiIsbGFiZWw6IlBsR0YiLHVuaXQ6InBnL21MIix0eXBlOiJudW1iZXIiLHBoOiI0NSJ9LAogICAgICAgICAge2lkOiJnYSIsbGFiZWw6Ikdlc3RhdGlvbmFsIEFnZSIsdW5pdDoid2Vla3MiLHR5cGU6Im51bWJlciIscGg6IjMwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3Qgcz0rdi5zZmx0LHA9K3YucGxnZixnPSt2LmdhOwogICAgICAgICAgaWYoIXN8fCFwfHwhZ3x8cDw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICByZXR1cm4ge3ZhbDoocy9wKS50b0ZpeGVkKDEpLHVuaXQ6InNGbHQtMS9QbEdGIHJhdGlvIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IHJhdGlvPStyLnZhbCxnYT0rdi5nYTsKICAgICAgICAgIGNvbnN0IHRocmVzaG9sZD1nYTw9MzQ/ODU6MTEwOwogICAgICAgICAgaWYocmF0aW88MzgpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgUmF0aW8gJHtyLnZhbH0gKDwzOCkgIC0tICBMT1cgUklTSy4gUHJlZWNsYW1wc2lhIHJ1bGVkIG91dCBmb3IgMSB3ZWVrIChOUFYgOTklKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHJhdGlvPHRocmVzaG9sZCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBSYXRpbyAke3IudmFsfSAgLS0gIEludGVybWVkaWF0ZS4gSW5jcmVhc2VkIHN1cnZlaWxsYW5jZS4gTUZNIHJldmlldy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgUmF0aW8gJHtyLnZhbH0gKD49JHt0aHJlc2hvbGR9KSAgLS0gIEhJR0ggUklTSy4gUHJlZWNsYW1wc2lhIGltbWluZW50LiBVcmdlbnQgTUZNL29ic3RldHJpYyByZXZpZXcuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0sCgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gWFYuIFJDQyAmIE9OQ09MT0dZLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InMxNSIsIGxhYmVsOiJSQ0MgJiBPbmNvbG9neSIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiaW1kYyIsIG5hbWU6IklNREMgQ3JpdGVyaWEgKEhlbmcpIiwgcmVmOiJIZW5nIGV0IGFsLiwgTGFuY2V0IE9uY29sIDIwMDkiLCB0YWc6Im1SQ0MgUHJvZ25vc2lzIiwKICAgICAgICBmb3JtdWxhOiIwID0gRmF2b3VyYWJsZSB8IDEtMiA9IEludGVybWVkaWF0ZSB8ID49MyA9IFBvb3IiLAogICAgICAgIG5vdGU6IlZhbGlkYXRlZCBpbiB0YXJnZXRlZCB0aGVyYXB5IGVyYS4gR3VpZGVzIGltbXVub3RoZXJhcHkgc2VsZWN0aW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoia3BzIixsYWJlbDoiS1BTIDw4MCUiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6InRpbWUxeXIiLGxhYmVsOiJEeCB0byBzeXN0ZW1pYyBUeCA8MSB5ZWFyIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJoYl9sb3ciLGxhYmVsOiJIYiBiZWxvdyBMTE4iLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNhX2hpZ2giLGxhYmVsOiJDb3JyZWN0ZWQgQ2EgYWJvdmUgVUxOIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJuZXV0IixsYWJlbDoiTmV1dHJvcGhpbHMgYWJvdmUgVUxOIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJwbHQiLGxhYmVsOiJQbGF0ZWxldHMgYWJvdmUgVUxOIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIHJldHVybiB7dmFsOlt2Lmtwcyx2LnRpbWUxeXIsdi5oYl9sb3csdi5jYV9oaWdoLHYubmV1dCx2LnBsdF0uZmlsdGVyKEJvb2xlYW4pLmxlbmd0aCx1bml0OiJyaXNrIGZhY3RvcnMifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyKXsKICAgICAgICAgIGNvbnN0IHY9ci52YWw7CiAgICAgICAgICBpZih2PT09MCkgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmAke3Z9IGZhY3RvcnMgIC0tICBGYXZvdXJhYmxlLiBNZWRpYW4gT1MgfjQzbW8uIElPIGNvbWJpbmF0aW9ucyBvciBzdW5pdGluaWIuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PD0yKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YCR7dn0gZmFjdG9yKHMpICAtLSAgSW50ZXJtZWRpYXRlLiBNZWRpYW4gT1MgfjIzbW8uIE5pdm8raXBpIG9yIHBlbWJybytheGkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YCR7dn0gZmFjdG9ycyAgLS0gIFBvb3IuIE1lZGlhbiBPUyB+OG1vLiBOaXZvK2lwaSBvciBjYWJvK25pdm8uIEVhcmx5IHBhbGxpYXRpdmUgY2FyZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoicmVuYWxfbmVwaCIsIG5hbWU6IlJFTkFMIE5lcGhyb21ldHJ5IFNjb3JlIiwgcmVmOiJLdXRpa292ICYgVXp6bywgSiBVcm9sIDIwMDkiLCB0YWc6IlN1cmdpY2FsIENvbXBsZXhpdHkiLAogICAgICAgIGZvcm11bGE6IlNjb3JlID0gUiArIEUgKyBOICsgQSArIExcbkxvdyA0LTYgfCBNb2RlcmF0ZSA3LTkgfCBIaWdoIDEwLTEyIiwKICAgICAgICBub3RlOiJHdWlkZXMgcGFydGlhbCB2cyByYWRpY2FsIG5lcGhyZWN0b215IGRlY2lzaW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiciIsbGFiZWw6IlIgKFJhZGl1cykiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIjw9NGNtICgxKSIsIjQtN2NtICgyKSIsIj43Y20gKDMpIl19LAogICAgICAgICAge2lkOiJlIixsYWJlbDoiRSAoRXhvcGh5dGljKSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiPj01MCUgKDEpIiwiPDUwJSAoMikiLCJFbmRvcGh5dGljICgzKSJdfSwKICAgICAgICAgIHtpZDoibiIsbGFiZWw6Ik4gKE5lYXJuZXNzIHRvIHNpbnVzKSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiPj03bW0gKDEpIiwiNC02bW0gKDIpIiwiPDRtbSAoMykiXX0sCiAgICAgICAgICB7aWQ6ImwiLGxhYmVsOiJMIChMb2NhdGlvbikiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIkFib3ZlL2JlbG93IHBvbGFyICgxKSIsIkNyb3NzZXMgcG9sYXIgKDIpIiwiQmV0d2VlbiBwb2xhciAoMykiXX0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgcHRzPXM9PnBhcnNlSW50KHMubWF0Y2goL1woKFxkKylcKS8pPy5bMV18fCIwIik7CiAgICAgICAgICByZXR1cm4ge3ZhbDpbdi5yLHYuZSx2Lm4sdi5sXS5yZWR1Y2UoKGEseCk9PmErcHRzKHgpLDApLHVuaXQ6InBvaW50cyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj1yLnZhbDsKICAgICAgICAgIGlmKHY8PTYpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgUkVOQUwgJHt2fSAgLS0gIExvdyBjb21wbGV4aXR5LiBQYXJ0aWFsIG5lcGhyZWN0b215IHByZWZlcnJlZCBhbmQgZmVhc2libGUuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZih2PD05KSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YFJFTkFMICR7dn0gIC0tICBNb2RlcmF0ZSBjb21wbGV4aXR5LiBQYXJ0aWFsIG1heSBiZSBmZWFzaWJsZSB3aXRoIGV4cGVyaWVuY2VkIHN1cmdlb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFJFTkFMICR7dn0gIC0tICBIaWdoIGNvbXBsZXhpdHkuIFJhZGljYWwgbmVwaHJlY3RvbXkgb2Z0ZW4gcmVxdWlyZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InN0b25lIiwgbmFtZToiU1RPTkUgU2NvcmUiLCByZWY6Ik1vb3JlIGV0IGFsLiwgQW5uIEVtZXJnIE1lZCAyMDE0IiwgdGFnOiJVcmV0ZXJhbCBTdG9uZSBQcm9iYWJpbGl0eSIsCiAgICAgICAgZm9ybXVsYToiU2NvcmUgPSBTZXggKyBUaW1pbmcgKyBPcmlnaW4gKyBOYXVzZWEgKyBFcnl0aHJvY3l0ZXMiLAogICAgICAgIG5vdGU6IlByZWRpY3RzIHVyZXRlcmFsIHN0b25lIHByb2JhYmlsaXR5IGJlZm9yZSBDVCBLVUIuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJzZXgiLGxhYmVsOiJTZXgiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIkZlbWFsZSAoMCkiLCJNYWxlICgzKSJdfSwKICAgICAgICAgIHtpZDoidGltaW5nIixsYWJlbDoiU3VkZGVuIG9uc2V0Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJObyAoMCkiLCJZZXMgKDMpIl19LAogICAgICAgICAge2lkOiJvcmlnaW4iLGxhYmVsOiJGbGFuay9ncm9pbiBwYWluIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJObyAoMCkiLCJZZXMgKDMpIl19LAogICAgICAgICAge2lkOiJuYXVzZWEiLGxhYmVsOiJOYXVzZWEvdm9taXRpbmciLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vICgwKSIsIlllcyAoMSkiXX0sCiAgICAgICAgICB7aWQ6ImVyeXRoIixsYWJlbDoiSGFlbWF0dXJpYSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTm8gKDApIiwiWWVzICgzKSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBwdHM9cz0+cGFyc2VJbnQocy5tYXRjaCgvXCgoXGQrKVwpLyk/LlsxXXx8IjAiKTsKICAgICAgICAgIHJldHVybiB7dmFsOlt2LnNleCx2LnRpbWluZyx2Lm9yaWdpbix2Lm5hdXNlYSx2LmVyeXRoXS5yZWR1Y2UoKGEseCk9PmErcHRzKHgpLDApLHVuaXQ6InBvaW50cyJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgY29uc3Qgdj1yLnZhbDsKICAgICAgICAgIGlmKHY8PTUpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgU2NvcmUgJHt2fSAgLS0gIExvdyBwcm9iYWJpbGl0eSAofjklKS4gQ29uc2lkZXIgYWx0ZXJuYXRpdmVzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYodjw9OSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBTY29yZSAke3Z9ICAtLSAgTW9kZXJhdGUgKH41MSUpLiBDVCBLVUIgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YFNjb3JlICR7dn0gIC0tICBIaWdoICh+ODklKS4gQ1QgS1VCLiBVcm9sb2d5IGlmID41bW0sIG9ic3RydWN0aW9uLCBvciBmZXZlci4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoiaXJhZV9yZW5hbCIsIG5hbWU6ImlyQUUgUmVuYWwgVG94aWNpdHkgIC0tICBOZXBocml0aXMgKEFTQ08gMjAxOCkiLCByZWY6IkJyYWhtZXIgSlIsIExhY2NoZXR0aSBDLCBTY2huZWlkZXIgQkogZXQgYWwuLCBKQ08gMjAxODszNigxNyk6MTcxNC0xNzY4IChBU0NPIEd1aWRlbGluZSBTNi4wLTYuMikiLCB0YWc6IkltbXVuZSBDaGVja3BvaW50IEluaGliaXRvciBOZXBocm90b3hpY2l0eSIsCiAgICAgICAgZm9ybXVsYToiQVNDTyBTNi4xIE5lcGhyaXRpcyBHcmFkaW5nIChFeHBlcnQgQ29uc2Vuc3VzKTpcbiAgRzE6IENyZWF0aW5pbmUgbGV2ZWwgaW5jcmVhc2Ugb2YgPjAuMyBtZy9kTDsgY3JlYXRpbmluZSAxLjUtMi4weCBvdmVyIGJhc2VsaW5lXG4gIEcyOiBDcmVhdGluaW5lIDItM3ggYWJvdmUgYmFzZWxpbmVcbiAgRzM6IENyZWF0aW5pbmUgPjN4IGJhc2VsaW5lIG9yID40LjAgbWcvZEw7IGhvc3BpdGFsaXNhdGlvbiBpbmRpY2F0ZWRcbiAgRzQ6IExpZmUtdGhyZWF0ZW5pbmcgY29uc2VxdWVuY2VzOyBkaWFseXNpcyBpbmRpY2F0ZWQiLAogICAgICAgIG5vdGU6IlM2LjAgRGlhZ25vc2lzICYgTW9uaXRvcmluZzogTW9uaXRvciBDciBwcmlvciB0byBldmVyeSBkb3NlLiBSb3V0aW5lIHVyaW5hbHlzaXMgaXMgbm90IG5lY2Vzc2FyeSBvdGhlciB0aGFuIHRvIHJ1bGUgb3V0IFVUSXMuIElmIG5vIHBvdGVudGlhbCBhbHRlcm5hdGl2ZSBjYXVzZSBvZiBBS0kgaWRlbnRpZmllZCwgZm9yZWdvIGJpb3BzeSBhbmQgcHJvY2VlZCBkaXJlY3RseSB3aXRoIGltbXVub3N1cHByZXNzaXZlIHRoZXJhcHkgIC0tICBzd2lmdCB0cmVhdG1lbnQgb2YgdGhlIGF1dG9pbW11bmUgY29tcG9uZW50IGlzIGltcG9ydGFudC4gUmVmbGV4IGtpZG5leSBiaW9wc3kgc2hvdWxkIGJlIERJU0NPVVJBR0VEIHVudGlsIGNvcnRpY29zdGVyb2lkIHRyZWF0bWVudCBoYXMgYmVlbiBhdHRlbXB0ZWQuXG5cblM2LjEgTWFuYWdlbWVudDpcbiAgRzEgIC0tICBDb25zaWRlciB0ZW1wb3JhcmlseSBob2xkaW5nIElDUGkgcGVuZGluZyBldmFsdWF0aW9uIG9mIGFsdGVybmF0aXZlIGFldGlvbG9naWVzIChyZWNlbnQgSVYgY29udHJhc3QsIG1lZGljYXRpb25zLCBmbHVpZCBzdGF0dXMpLiBBIGNoYW5nZSBzdGlsbCA8MS41eCBVTE4gY291bGQgYmUgbWVhbmluZ2Z1bC5cbiAgRzIgIC0tICBIb2xkIElDUGkgdGVtcG9yYXJpbHkuIE5lcGhyb2xvZ3kgY29uc3VsdC4gUnVsZSBvdXQgb3RoZXIgY2F1c2VzOyBpZiBleGNsdWRlZCwgcHJlZG5pc29uZSAwLjUtMSBtZy9rZy9kLiBJZiB3b3JzZW5pbmcgb3Igbm8gaW1wcm92ZW1lbnQ6IDEtMiBtZy9rZy9kIGFuZCBwZXJtYW5lbnRseSBkaXNjb250aW51ZS4gSWYgaW1wcm92ZWQgdG8gPD1HMSwgdGFwZXIgc3Rlcm9pZHMgb3ZlciA0LTYgd2Vla3MuIERpc2N1c3MgcmVzdW1wdGlvbiB3aXRoIHBhdGllbnQgKHJpc2tzIHZzIGJlbmVmaXRzKS5cbiAgRzMgIC0tICBQZXJtYW5lbnRseSBkaXNjb250aW51ZSBJQ1BpLiBOZXBocm9sb2d5IGNvbnN1bHQuIFN0ZXJvaWRzIDEtMiBtZy9rZy9kLiBNb25pdG9yIENyIHdlZWtseS5cbiAgRzQgIC0tICBBcyBHMyArIHVyZ2VudCBkaWFseXNpcy5cblxuUzYuMiBGb2xsb3ctdXA6XG4gIEcxICAtLSAgSWYgaW1wcm92ZWQgdG8gYmFzZWxpbmUsIHJlc3VtZSByb3V0aW5lIG1vbml0b3JpbmcuXG4gIEcyICAtLSAgVGFwZXIgc3Rlcm9pZHMgb3ZlciA+PTMgd2Vla3M7IGlmIHBlcnNpc3RlbnQgPjcgZGF5cywgdHJlYXQgYXMgRzMuXG4gIEczICAtLSAgVGFwZXIgb3ZlciA+PTQgd2Vla3M7IGlmIHBlcnNpc3RlbnQgPjMtNSBkYXlzLCBjb25zaWRlciBteWNvcGhlbm9sYXRlLlxuICBHNCAgLS0gIFRhcGVyIG92ZXIgPj00IHdlZWtzOyBpZiBwZXJzaXN0ZW50ID4yLTMgZGF5cywgY29uc2lkZXIgbXljb3BoZW5vbGF0ZS5cblxuQWxsIHJlY29tbWVuZGF0aW9ucyBhcmUgZXhwZXJ0IGNvbnNlbnN1cyBiYXNlZCwgd2l0aCBiZW5lZml0cyBvdXR3ZWlnaGluZyBoYXJtcy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImNyX2Jhc2UiLGxhYmVsOiJCYXNlbGluZSBDcmVhdGluaW5lIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiMC45In0sCiAgICAgICAgICB7aWQ6ImNyX25vdyIsbGFiZWw6IkN1cnJlbnQgQ3JlYXRpbmluZSIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIuNCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGJhc2U9K3YuY3JfYmFzZSwgbm93PSt2LmNyX25vdzsKICAgICAgICAgIGlmKCFiYXNlfHwhbm93fHxiYXNlPD0wKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHJhdGlvPW5vdy9iYXNlLCByaXNlPW5vdy1iYXNlOwogICAgICAgICAgbGV0IGdyYWRlPTA7CiAgICAgICAgICBpZihub3c+NC4wfHxyYXRpbz4zLjApIGdyYWRlPTM7CiAgICAgICAgICBpZihyYXRpbz49Mi4wJiZncmFkZTwzKSBncmFkZT0yOwogICAgICAgICAgaWYoKHJhdGlvPj0xLjV8fHJpc2U+MC4zKSYmZ3JhZGU8MikgZ3JhZGU9MTsKICAgICAgICAgIHJldHVybiB7dmFsOiJHcmFkZSAiK2dyYWRlLHVuaXQ6IihDciAiK3JhdGlvLnRvRml4ZWQoMikrInggYmFzZWxpbmU7IHJpc2UgIityaXNlLnRvRml4ZWQoMikrIiBtZy9kTCkifTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgYmFzZT0rdi5jcl9iYXNlLCBub3c9K3YuY3Jfbm93OwogICAgICAgICAgY29uc3QgcmF0aW89bm93L2Jhc2UsIHJpc2U9bm93LWJhc2U7CiAgICAgICAgICBpZihub3c+NC4wfHxyYXRpbz4zLjApIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgR1JBREUgMyAgLS0gIENyZWF0aW5pbmUgJHtyYXRpby50b0ZpeGVkKDEpfXggYmFzZWxpbmUke25vdz40LjA/IiAoPjQuMCBtZy9kTCkiOiIifS4gSG9zcGl0YWxpc2F0aW9uIGluZGljYXRlZC4gUEVSTUFORU5UTFkgRElTQ09OVElOVUUgSUNQaS4gTmVwaHJvbG9neSBjb25zdWx0LiBFdmFsdWF0ZSBmb3Igb3RoZXIgY2F1c2VzIChJViBjb250cmFzdCwgbWVkaWNhdGlvbnMsIGZsdWlkIHN0YXR1cykuIENvcnRpY29zdGVyb2lkcyAxLTIgbWcva2cvZCBwcmVkbmlzb25lIGVxdWl2YWxlbnQuIFJlZmxleCBiaW9wc3kgZGlzY291cmFnZWQgdW50aWwgc3Rlcm9pZHMgYXR0ZW1wdGVkLiBNb25pdG9yIENyIHdlZWtseS4gSWYgaW1wcm92ZWQgdG8gPD1HMSwgdGFwZXIgb3ZlciA+PTQgd2Vla3MuIElmIHBlcnNpc3RlbnQgPjMtNSBkYXlzIG9yIHdvcnNlbmluZywgY29uc2lkZXIgbXljb3BoZW5vbGF0ZS4gTm90ZTogYWxzbyBldmFsdWF0ZSBmb3IgRzQgaWYgZGlhbHlzaXMgaXMgaW5kaWNhdGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYocmF0aW8+PTIuMCkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBHUkFERSAyICAtLSAgQ3JlYXRpbmluZSAke3JhdGlvLnRvRml4ZWQoMSl9eCBiYXNlbGluZS4gSE9MRCBJQ1BpIHRlbXBvcmFyaWx5LiBOZXBocm9sb2d5IGNvbnN1bHQuIEV2YWx1YXRlIGZvciBvdGhlciBjYXVzZXMgKElWIGNvbnRyYXN0LCBtZWRpY2F0aW9ucywgZmx1aWQgc3RhdHVzKS4gSWYgb3RoZXIgYWV0aW9sb2dpZXMgcnVsZWQgb3V0OiBwcmVkbmlzb25lIDAuNS0xIG1nL2tnL2QuIElmIHdvcnNlbmluZyBvciBubyBpbXByb3ZlbWVudDogZXNjYWxhdGUgdG8gMS0yIG1nL2tnL2QgYW5kIHBlcm1hbmVudGx5IGRpc2NvbnRpbnVlIElDUGkuIElmIGltcHJvdmVkIHRvIDw9RzEsIHRhcGVyIHN0ZXJvaWRzIG92ZXIgNC02IHdlZWtzLiBJZiBubyByZWN1cnJlbmNlLCBkaXNjdXNzIHJlc3VtcHRpb24gd2l0aCBwYXRpZW50IChyaXNrcyB2cyBiZW5lZml0cykuIElmIHBlcnNpc3RlbnQgPjcgZGF5cyBvciB3b3JzZW5pbmcsIHRyZWF0IGFzIEczLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYocmF0aW8+PTEuNXx8cmlzZT4wLjMpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgR1JBREUgMSAgLS0gIENyZWF0aW5pbmUgJHtyYXRpby50b0ZpeGVkKDIpfXggYmFzZWxpbmUgKHJpc2UgJHtyaXNlLnRvRml4ZWQoMil9IG1nL2RMKS4gQ29uc2lkZXIgdGVtcG9yYXJpbHkgaG9sZGluZyBJQ1BpIHBlbmRpbmcgZXZhbHVhdGlvbiBvZiBhbHRlcm5hdGl2ZSBhZXRpb2xvZ2llcyAocmVjZW50IElWIGNvbnRyYXN0LCBtZWRpY2F0aW9ucywgZmx1aWQgc3RhdHVzLCBiYXNlbGluZSByZW5hbCBmdW5jdGlvbikuIE5vdGU6IGEgY2hhbmdlIHN0aWxsIDwxLjV4IFVMTiBjb3VsZCBiZSBtZWFuaW5nZnVsLiBJZiBpbXByb3ZlZCB0byBiYXNlbGluZSwgcmVzdW1lIHJvdXRpbmUgY3JlYXRpbmluZSBtb25pdG9yaW5nLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBObyBzaWduaWZpY2FudCBjcmVhdGluaW5lIHJpc2UgKCR7cmF0aW8udG9GaXhlZCgyKX14IGJhc2VsaW5lKS4gQ29udGludWUgSUNQaSB3aXRoIHJvdXRpbmUgbW9uaXRvcmluZyAgLS0gIGNoZWNrIGNyZWF0aW5pbmUgcHJpb3IgdG8gZXZlcnkgZG9zZSBwZXIgQVNDTyBTNi4wLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIHsKICAgICAgICBpZDoiY3BfYWtpIiwgbmFtZToiQ2lzcGxhdGluLUFzc29jaWF0ZWQgQUtJIChDUC1BS0kpIFJpc2sgQ2FsY3VsYXRvciIsIHJlZjoiR3VwdGEgUywgR2xlemVybWFuIElHLCBIaXJzY2ggSlMgZXQgYWwuLCBCTUogMjAyNDszODQ6ZTA3NzE2OTsgbj0yNDcxNzsgQy1zdGF0aXN0aWMgMC43NSIsIHRhZzoiQ2lzcGxhdGluIE5lcGhyb3RveGljaXR5ICAtLSAgVmFsaWRhdGVkIFJpc2sgUHJlZGljdGlvbiIsCiAgICAgICAgZm9ybXVsYToiUmlzayAlID0gMTAwIC8gKDEgKyBlXigteCkpLCB3aGVyZSB4ID0gLTMuNjg2NjU5ICsgZihBZ2UpIC0gZihNZykgLSBmKEhnYikgKyBmKFdCQykgLSBmKEFsYikgKyBmKENpc3BsYXRpbikgKyBmKFBsdCkgLSBmKFNDcikgKyAwLjI3Mzk5NTJ4SFROICsgMC4yNTI4NTUxeERNXG5cbkVhY2ggY29udGludW91cyB2YXJpYWJsZSB1c2VzIHJlc3RyaWN0ZWQgY3ViaWMgc3BsaW5lcyAoUkNTKS4gRnVsbCBjb2VmZmljaWVudHMgcHVibGlzaGVkIGluIHRoZSBCTUogc3VwcGxlbWVudC5cblxuQ1AtQUtJIGRlZmluZWQgYXM6ID49Mi1mb2xkIHJpc2UgaW4gc2VydW0gY3JlYXRpbmluZSBPUiBraWRuZXkgcmVwbGFjZW1lbnQgdGhlcmFweSB3aXRoaW4gMTQgZGF5cyBvZiBmaXJzdCBJViBjaXNwbGF0aW4gZG9zZS4iLAogICAgICAgIG5vdGU6IlVzZSB0aGUgbW9zdCByZWNlbnQgbGFiIHZhbHVlcyBvYnRhaW5lZCBwcmlvciB0byByZWNlaXZpbmcgY2lzcGxhdGluLiBWYWxpZGF0ZWQgYWNyb3NzIDYgVVMgYWNhZGVtaWMgY2FuY2VyIGNlbnRyZXMgKG49MjQsNzE3OyBkZXJpdmF0aW9uIDExLDc2NiwgdmFsaWRhdGlvbiAxMiw5NTEpLiBDUC1BS0kgaW5jaWRlbmNlOiA1LjIlIChkZXJpdmF0aW9uKSwgMy4zJSAodmFsaWRhdGlvbikuIEMtc3RhdGlzdGljIDAuNzUgIC0tICBzdXBlcmlvciB0byBhbGwgcHJpb3IgbW9kZWxzIChDIDAuNjAtMC42OCkuIFN0YWdlIDMgQ1AtQUtJIGFzc29jaWF0ZWQgd2l0aCA0LjYzeCBoYXphcmQgb2YgOTAtZGF5IG1vcnRhbGl0eS4gVW5pdCBjb252ZXJzaW9uczogU2NyIGlucHV0IGluIHVtb2wvTCAtPiBjb252ZXJ0ZWQgdG8gbWcvZEwgKC84OC40KTsgQWxiIGlucHV0IGluIGcvTCAtPiBnL2RMICgvMTApOyBNZyBpbnB1dCBpbiBtbW9sL0wgLT4gbWcvZEwgKHgyLjQzKTsgSGdiIGlucHV0IGluIGcvTCAtPiBnL2RMICgvMTApLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYWdlIixsYWJlbDoiQWdlIix1bml0OiJ5ZWFycyIsdHlwZToibnVtYmVyIixwaDoiNjIifSwKICAgICAgICAgIHtpZDoiaHRuIixsYWJlbDoiSGlzdG9yeSBvZiBoeXBlcnRlbnNpb24iLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vIiwiWWVzIl19LAogICAgICAgICAge2lkOiJkbSIsbGFiZWw6Ikhpc3Rvcnkgb2YgZGlhYmV0ZXMgbWVsbGl0dXMiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5vIiwiWWVzIl19LAogICAgICAgICAge2lkOiJkb3NlIixsYWJlbDoiQ2lzcGxhdGluIGRvc2UiLHVuaXQ6Im1nIix0eXBlOiJudW1iZXIiLHBoOiIxNDAifSwKICAgICAgICAgIHtpZDoic2NyIixsYWJlbDoiU2VydW0gY3JlYXRpbmluZSIsdW5pdDoidW1vbC9MIix0eXBlOiJudW1iZXIiLHBoOiI4NSJ9LAogICAgICAgICAge2lkOiJhbGIiLGxhYmVsOiJBbGJ1bWluIix1bml0OiJnL0wiLHR5cGU6Im51bWJlciIscGg6IjM4In0sCiAgICAgICAgICB7aWQ6Im1nX3ZhbCIsbGFiZWw6Ik1hZ25lc2l1bSIsdW5pdDoibW1vbC9MIix0eXBlOiJudW1iZXIiLHBoOiIwLjgyIn0sCiAgICAgICAgICB7aWQ6ImhnYiIsbGFiZWw6IkhhZW1vZ2xvYmluIix1bml0OiJnL0wiLHR5cGU6Im51bWJlciIscGg6IjEyNSJ9LAogICAgICAgICAge2lkOiJ3YmMiLGxhYmVsOiJXaGl0ZSBibG9vZCBjZWxsIGNvdW50Iix1bml0OiJ4IDEwXjkgY2VsbHMvTCIsdHlwZToibnVtYmVyIixwaDoiNy41In0sCiAgICAgICAgICB7aWQ6InBsdCIsbGFiZWw6IlBsYXRlbGV0IGNvdW50Iix1bml0OiJ4IDEwXjkvTCIsdHlwZToibnVtYmVyIixwaDoiMjUwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgYWdlPSt2LmFnZSwgZG9zZT0rdi5kb3NlLCBzY3JTST0rdi5zY3IsIGFsYlNJPSt2LmFsYiwgbWdTST0rdi5tZ192YWwsIGhnYlNJPSt2LmhnYiwgd2JjUmF3PSt2LndiYywgcGx0UmF3PSt2LnBsdDsKICAgICAgICAgIGlmKCFhZ2V8fCFkb3NlfHwhc2NyU0l8fCFhbGJTSXx8IW1nU0l8fCFoZ2JTSXx8IXdiY1Jhd3x8IXBsdFJhdykgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBodG49di5odG49PT0iWWVzIj8xOjAsIGRtPXYuZG09PT0iWWVzIj8xOjA7CiAgICAgICAgICAvKiBDb252ZXJ0IFNJIC0+IG1vZGVsIHVuaXRzIChtZy9kTCwgZy9kTCwgeDEwXjMvdUwpICovCiAgICAgICAgICBjb25zdCBzY3I9c2NyU0kvODguNDsgICAvKiB1bW9sL0wgLT4gbWcvZEwgKi8KICAgICAgICAgIGNvbnN0IGFsYj1hbGJTSS8xMDsgICAgIC8qIGcvTCAtPiBnL2RMICovCiAgICAgICAgICBjb25zdCBtZz1tZ1NJKjIuNDM7ICAgICAvKiBtbW9sL0wgLT4gbWcvZEwgKi8KICAgICAgICAgIGNvbnN0IGhnYj1oZ2JTSS8xMDsgICAgIC8qIGcvTCAtPiBnL2RMICovCiAgICAgICAgICBjb25zdCB3YmM9d2JjUmF3OyAgICAgICAvKiB4MTBeOS9MID0geDEwXjMvdUwgKi8KICAgICAgICAgIGNvbnN0IHBsdD1wbHRSYXc7ICAgICAgIC8qIHgxMF45L0wgPSB4MTBeMy91TCAqLwogICAgICAgICAgLyogSGVscGVyOiAodmFsIC0ga25vdCkrIF4zICovCiAgICAgICAgICBjb25zdCBwMz0odmFsLGtub3QpPT57Y29uc3QgZD12YWwta25vdDsgcmV0dXJuIGQ+MD9kKmQqZDowO307CiAgICAgICAgICAvKiBBZ2UgUkNTICovCiAgICAgICAgICBjb25zdCBmQWdlPTAuMDQ0MjE0MjUqYWdlKzAuMDAwMDE4MzQ4NSpwMyhhZ2UsMzApLTAuMDAwMjE2MzIyNypwMyhhZ2UsNTEpKzAuMDAwNDM5NDkwOSpwMyhhZ2UsNTkpLTAuMDAwMjkwNzMwNypwMyhhZ2UsNjYpKzAuMDAwMDQ5MjE0MSpwMyhhZ2UsNzYpOwogICAgICAgICAgLyogTWFnbmVzaXVtIFJDUyAoc3VidHJhY3QpICovCiAgICAgICAgICBjb25zdCBmTWc9MC4yNTI1MTE1Km1nLTUuODAxOTY5KnAzKG1nLDEuNykrMjkuODk1MjEqcDMobWcsMS45NDU2KS00My43NTA1NCpwMyhtZywyLjEpKzE4LjIzNzg4KnAzKG1nLDIuMikrMS40MTk0MTQqcDMobWcsMi40MzIpOwogICAgICAgICAgLyogSGVtb2dsb2JpbiBSQ1MgKHN1YnRyYWN0KSAqLwogICAgICAgICAgY29uc3QgZkhnYj0wLjA0NDcxMTE4KmhnYi0wLjAwOTk4NDY0MipwMyhoZ2IsOS4xKSswLjA3NDk5NTY2KnAzKGhnYiwxMS42KS0wLjEzNTU5NTMqcDMoaGdiLDEyLjgpKzAuMDg1OTUzNjkqcDMoaGdiLDEzLjkpLTAuMDE1MzY5NDIqcDMoaGdiLDE1LjUpOwogICAgICAgICAgLyogV0JDIFJDUyAoYWRkKSAqLwogICAgICAgICAgY29uc3QgZldiYz0wLjAxOTkzNzM2KndiYy0wLjAwMzIzNzEyNipwMyh3YmMsMy44KSswLjAyMTc2OTk4KnAzKHdiYyw1LjgpLTAuMDMxNzg0MTMqcDMod2JjLDcuMSkrMC4wMTQxMTI0NipwMyh3YmMsOC44KS0wLjAwMDg2MTE3ODcqcDMod2JjLDE0LjUpOwogICAgICAgICAgLyogQWxidW1pbiBSQ1MgKHN1YnRyYWN0KSAqLwogICAgICAgICAgY29uc3QgZkFsYj0wLjQ5OTA2MTcqYWxiLTAuMDI2ODE1NDgqcDMoYWxiLDMpKzQuMzEyOTUzKnAzKGFsYiwzLjgpLTEzLjUwNDk1KnAzKGFsYiw0LjEpKzEwLjY2NzI0KnAzKGFsYiw0LjMpLTEuNDQ4NDMyKnAzKGFsYiw0LjcpOwogICAgICAgICAgLyogQ2lzcGxhdGluIGRvc2UgUkNTIChhZGQpICovCiAgICAgICAgICBjb25zdCBmQ2lzPTAuMDQ3MDgxODUqZG9zZS0wLjAwMDAxMDI4Mzk3KnAzKGRvc2UsMzgpKzAuMDAwMDIzOTE2NDQqcDMoZG9zZSw2NSktMC4wMDAwMTUyMTYxNCpwMyhkb3NlLDkwKSswLjAwMDAwMjAzOTA0MipwMyhkb3NlLDE1MCktMC4wMDAwMDA0NTUzNjk1KnAzKGRvc2UsMjIwKTsKICAgICAgICAgIC8qIFBsYXRlbGV0IFJDUyAoYWRkKSAqLwogICAgICAgICAgY29uc3QgZlBsdD0wLjAwMzk3NTY2KnBsdC0wLjAwMDAwMDUxNDUwMDQqcDMocGx0LDEzNykrMC4wMDAwMDIyMjc0NSpwMyhwbHQsMjEwKS0wLjAwMDAwMjQ1OTAwNSpwMyhwbHQsMjU1KSswLjAwMDAwMDc2MzEwNTUqcDMocGx0LDMxMiktMC4wMDAwMDAwMTcwNTA2MypwMyhwbHQsNDg4KTsKICAgICAgICAgIC8qIEJhc2VsaW5lIFNDciBSQ1MgKHN1YnRyYWN0KSAqLwogICAgICAgICAgY29uc3QgZlNjcj00LjYyNjgwMipzY3IrOTQuMDA2OTYqcDMoc2NyLDAuNiktMTg3Ljk1NjEqcDMoc2NyLDAuNykrMjMyLjc1NjcqcDMoc2NyLDAuOSktMTUzLjc3OTYqcDMoc2NyLDEuMCkrMTQuOTcyMDYqcDMoc2NyLDEuMyk7CiAgICAgICAgICBjb25zdCB4PS0zLjY4NjY1OStmQWdlLWZNZy1mSGdiK2ZXYmMtZkFsYitmQ2lzK2ZQbHQtZlNjciswLjI3Mzk5NTIqaHRuKzAuMjUyODU1MSpkbTsKICAgICAgICAgIGNvbnN0IHJpc2s9MTAwLygxK01hdGguZXhwKC14KSk7CiAgICAgICAgICByZXR1cm4ge3ZhbDpyaXNrLnRvRml4ZWQoMSksdW5pdDoiJSByaXNrIG9mIENQLUFLSSIsc2VjOmBTY3IgJHtzY3IudG9GaXhlZCgyKX0gbWcvZEwgfCBBbGIgJHthbGIudG9GaXhlZCgxKX0gZy9kTCB8IE1nICR7bWcudG9GaXhlZCgyKX0gbWcvZEwgfCBIZ2IgJHtoZ2IudG9GaXhlZCgxKX0gZy9kTCB8IEhUTjoke2h0bn0gRE06JHtkbX1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3Qgcmlzaz0rci52YWw7CiAgICAgICAgICBpZihyaXNrPDMpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQ1AtQUtJIHJpc2s6ICR7ci52YWx9JSAgLS0gIExPVy4gU3RhbmRhcmQgY2lzcGxhdGluIGh5ZHJhdGlvbiBwcm90b2NvbCAoMS0yTCBOUyBwcmUvcG9zdCkuIElWIE1nIHN1cHBsZW1lbnRhdGlvbiByZWNvbW1lbmRlZC4gTW9uaXRvciBTY3IgZGF5cyAzLCA3LCAxNCBhZnRlciBjaXNwbGF0aW4uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihyaXNrPDgpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgQ1AtQUtJIHJpc2s6ICR7ci52YWx9JSAgLS0gIE1PREVSQVRFLiBFbnN1cmUgYWdncmVzc2l2ZSBoeWRyYXRpb24uIElWIE1nIHN1cHBsZW1lbnRhdGlvbiAoOC0xNiBtRXEpLiBBdm9pZCBjb25jdXJyZW50IG5lcGhyb3RveGlucyAoTlNBSURzLCBhbWlub2dseWNvc2lkZXMpLiBNb25pdG9yIFNjciBjbG9zZWx5IChkYXlzIDMsIDcsIDE0KS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHJpc2s8MTUpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgQ1AtQUtJIHJpc2s6ICR7ci52YWx9JSAgLS0gIEhJR0guIENvbnNpZGVyIGVuaGFuY2VkIGh5ZHJhdGlvbi4gSVYgTWcgbWFuZGF0b3J5LiBNaW5pbWlzZSBhbGwgY29uY3VycmVudCBuZXBocm90b3hpbnMuIENvbnNpZGVyIHdoZXRoZXIgY2FyYm9wbGF0aW4gc3Vic3RpdHV0aW9uIGlzIG9uY29sb2dpY2FsbHkgYXBwcm9wcmlhdGUuIENsb3NlIHJlbmFsIG1vbml0b3JpbmcgKFNjciBldmVyeSAyLTMgZGF5cyBmb3IgMTQgZGF5cykuIE5lcGhyb2xvZ3kgaW5wdXQgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YENQLUFLSSByaXNrOiAke3IudmFsfSUgIC0tICBWRVJZIEhJR0guIFN0cm9uZ2x5IGNvbnNpZGVyIGNhcmJvcGxhdGluIHN1YnN0aXR1dGlvbiBvciBkb3NlIHJlZHVjdGlvbiBpZiBvbmNvbG9naWNhbGx5IGZlYXNpYmxlLiBJZiBjaXNwbGF0aW4gZXNzZW50aWFsOiBtYXhpbWlzZSBoeWRyYXRpb24sIElWIE1nLCBzdHJpY3QgbmVwaHJvdG94aW4gYXZvaWRhbmNlLCBkYWlseSBTY3IgbW9uaXRvcmluZyBmb3IgMTQgZGF5cy4gUHJlLXRyZWF0bWVudCBuZXBocm9sb2d5IGNvbnN1bHRhdGlvbiByZWNvbW1lbmRlZC4gU3RhZ2UgMyBDUC1BS0kgYXNzb2NpYXRlZCB3aXRoIDQuNjN4IGhhemFyZCBvZiA5MC1kYXkgbW9ydGFsaXR5IChHdXB0YSBCTUogMjAyNCkuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAoKICAgIF0KICB9LAoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIC8vIFhWSS4gU1BFQ0lBTElTVCBJTkRJQ0VTLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InMxNiIsIGxhYmVsOiJTcGVjaWFsaXN0IEluZGljZXMiLAogICAgY2FsY3M6WwogICAgXQogIH0sCgogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgLy8gWFZJSS4gRElBTFlTSVMgJiBWQVNDVUxBUiBBQ0NFU1MsCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICB7CiAgICBpZDoiczE3IiwgbGFiZWw6ICJUcmFuc3BsYW50IE5lcGhyb2xvZ3kiLAogICAgY2FsY3M6IFsKICAgICAgewogICAgICAgIGlkOiJ0eF9jdl9zY3JlZW4iLCBuYW1lOiJbUkVGXSBDYXJkaW92YXNjdWxhciBTY3JlZW5pbmcgVHJpZ2dlciIsIHJlZjoiS0RJR08gVHJhbnNwbGFudCBDYW5kaWRhY3kgMjAyMCBTMTMuMzsgS0RPUUkgQ29tbWVudGFyeSAyMDIxOyBBQ0MvQUhBIFBlcmlvcGVyYXRpdmUgR3VpZGVsaW5lcyIsIHRhZzoiUHJlLVRyYW5zcGxhbnQgQ1YgUmlzayAgLS0gIE1hbmRhdG9yeSBXb3JrdXAgQ3JpdGVyaWEiLAogICAgICAgIGZvcm11bGE6Ik1hbmRhdG9yeSBwcmUtdHJhbnNwbGFudCBjYXJkaWFjIHdvcmt1cCB0cmlnZ2VyZWQgaWYgQU5ZIG9mOlxuICAqIERpYWJldGVzIG1lbGxpdHVzIChUeXBlIDEgb3IgVHlwZSAyKVxuICAqIFByaW9yIGNvcm9uYXJ5IGFydGVyeSBkaXNlYXNlIChDQUQpXG4gICogRnVuY3Rpb25hbCBjYXBhY2l0eSA8NCBNRVRzXG4gICogQWdlID49NjAgeWVhcnMgKHNvbWUgY2VudHJlcyA+PTUwKVxuICAqIFBlcmlwaGVyYWwgdmFzY3VsYXIgZGlzZWFzZSAoUFZEKVxuICAqIENlcmVicm92YXNjdWxhciBkaXNlYXNlIChDVkEvVElBKVxuICAqIEN1cnJlbnQgb3IgZm9ybWVyIHNtb2tlciAoPjEwIHBhY2steWVhcnMpXG4gICogSGVhcnQgZmFpbHVyZSAoYW55IE5ZSEEgY2xhc3MpXG4gICogPj0zIHRyYWRpdGlvbmFsIGNhcmRpb3Zhc2N1bGFyIHJpc2sgZmFjdG9ycyIsCiAgICAgICAgbm90ZToiUkVGRVJFTkNFIFBBTkVMICAtLSAgVGhpcyBpcyBub3QgYSB2YWxpZGF0ZWQgc2NvcmluZyB0b29sLiBQdWJsaXNoZWQgZ3VpZGVsaW5lIGNyaXRlcmlhIGFyZSBwcmVzZW50ZWQgZm9yIGNsaW5pY2FsIHJlZmVyZW5jZSBvbmx5LiBJbnRlcnByZXRhdGlvbiByZXF1aXJlcyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuXG5cbktESUdPIDIwMjAgU3RhdGVtZW50IDEzLjMgcmVjb21tZW5kcyBjYXJkaW92YXNjdWxhciBldmFsdWF0aW9uIG9mIGFsbCB0cmFuc3BsYW50IGNhbmRpZGF0ZXMuIFRoZSBleHRlbnQgb2Ygd29ya3VwIGRlcGVuZHMgb24gcmlzayBmYWN0b3IgYnVyZGVuLiBIaWdoLXJpc2sgcGF0aWVudHMgcmVxdWlyZSBub24taW52YXNpdmUgY2FyZGlhYyBzdHJlc3MgdGVzdGluZyAoZXhlcmNpc2Ugb3IgcGhhcm1hY29sb2dpY2FsIHN0cmVzcyBlY2hvY2FyZGlvZ3JhcGh5LCBvciBteW9jYXJkaWFsIHBlcmZ1c2lvbiBpbWFnaW5nKSBhbmQsIGlmIHBvc2l0aXZlLCBjb3JvbmFyeSBhbmdpb2dyYXBoeS4gTG93LXJpc2sgcGF0aWVudHMgbWF5IHByb2NlZWQgd2l0aCByZXN0aW5nIGVjaG9jYXJkaW9ncmFwaHkgYW5kIEVDRyBhbG9uZS4gVGhpcyBjYWxjdWxhdG9yIGlkZW50aWZpZXMgd2hldGhlciBtYW5kYXRvcnkgZXh0ZW5kZWQgY2FyZGlhYyB3b3JrdXAgaXMgdHJpZ2dlcmVkLiIsCiAgICAgICAgaW5wdXRzOltdLAogICAgICAgIGNvbXB1dGUoKXsgcmV0dXJuIHt2YWw6IlJlZmVyZW5jZSBQYW5lbCIsdW5pdDoiU2VlIGd1aWRlbGluZSBjcml0ZXJpYSBhYm92ZSJ9OyB9LAogICAgICAgIGludGVycHJldCgpeyByZXR1cm4ge2M6IiM2MzY2ZjEiLHQ6YFRoaXMgaXMgYSByZWZlcmVuY2UgcGFuZWwgc3VtbWFyaXNpbmcgcHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYS4gTm8gY29tcG9zaXRlIHNjb3JlIGlzIGNvbXB1dGVkLiBBcHBseSB0aGVzZSBjcml0ZXJpYSB1c2luZyBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQgd2l0aGluIHlvdXIgaW5zdGl0dXRpb25hbCBwcm90b2NvbHMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07IH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9tYWxpZ193YWl0IiwgbmFtZToiW1JFRl0gTWFsaWduYW5jeSBXYWl0aW5nIFBlcmlvZCBBZHZpc29yIiwgcmVmOiJBU1QgQ29uc2Vuc3VzIChTYXdpbnNraSBldCBhbC4sIEFtIEogVHJhbnNwbGFudCAyMDIwKTsgS0RJR08gMjAyMCBTMTE7IElzcmFlbCBQZW5uIElUVFIiLCB0YWc6IlByZS1UcmFuc3BsYW50IENhbmNlciBSZW1pc3Npb24gIC0tICBNaW5pbXVtIFdhaXQgQmVmb3JlIExpc3RpbmciLAogICAgICAgIGZvcm11bGE6Ik1pbmltdW0gcmVjb21tZW5kZWQgd2FpdGluZyBwZXJpb2QgZnJvbSBjdXJhdGl2ZSB0cmVhdG1lbnQgdG8gdHJhbnNwbGFudCBsaXN0aW5nOlxuICBObyBtYW5kYXRvcnkgd2FpdDogTm9uLW1lbGFub21hIHNraW4gY2FuY2VyIChCQ0MvU0NDKSwgaW5jaWRlbnRhbCByZW5hbCBtYXNzIDw9MWNtLCBHbGVhc29uIDw9NiBwcm9zdGF0ZSAobG93LXJpc2spLCBpbiBzaXR1IGNlcnZpY2FsIChDSU4pLCBzdXBlcmZpY2lhbCBibGFkZGVyIChUYSBsb3ctZ3JhZGUpXG4gIDIgeWVhcnM6IE1vc3Qgc29saWQgb3JnYW4gdHVtb3VycyBhZnRlciBjdXJhdGl2ZSByZXNlY3Rpb24gKGJyZWFzdCwgY29sb24sIGx1bmcsIGV0Yy4pXG4gIDIgeWVhcnM6IEhhZW1hdG9sb2dpY2FsIG1hbGlnbmFuY2llcyAobHltcGhvbWEsIGxldWthZW1pYSkgYWZ0ZXIgY29tcGxldGUgcmVtaXNzaW9uXG4gIDUgeWVhcnM6IE1lbGFub21hIChzdGFnZSBJL0lJKSwgaW52YXNpdmUgYnJlYXN0IChzdGFnZSBJSSspLCBzeW1wdG9tYXRpYyBSQ0MgPlQxXG4gIENhc2UtYnktY2FzZTogTWVsYW5vbWEgc3RhZ2UgSUlJKywgbVJDQywgYWN0aXZlIGhhZW1hdG9sb2dpY2FsIG1hbGlnbmFuY3kiLAogICAgICAgIG5vdGU6IlJFRkVSRU5DRSBQQU5FTCAgLS0gIFRoaXMgaXMgbm90IGEgdmFsaWRhdGVkIHNjb3JpbmcgdG9vbC4gUHVibGlzaGVkIGd1aWRlbGluZSBjcml0ZXJpYSBhcmUgcHJlc2VudGVkIGZvciBjbGluaWNhbCByZWZlcmVuY2Ugb25seS4gSW50ZXJwcmV0YXRpb24gcmVxdWlyZXMgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50LlxuXG5UaGUgQVNUIGNvbnNlbnN1cyAoU2F3aW5za2kgZXQgYWwuLCAyMDIwKSBhbmQgS0RJR08gMjAyMCBTMTEgcHJvdmlkZSBldmlkZW5jZS1iYXNlZCB3YWl0aW5nIHBlcmlvZCByZWNvbW1lbmRhdGlvbnMuIFRoZSBJc3JhZWwgUGVubiBJbnRlcm5hdGlvbmFsIFRyYW5zcGxhbnQgVHVtb3VyIFJlZ2lzdHJ5IChJVFRSKSBwcm92aWRlcyB0aGUgbGFyZ2VzdCBkYXRhc2V0IG9uIHBvc3QtdHJhbnNwbGFudCBjYW5jZXIgcmVjdXJyZW5jZS4gS2V5IHByaW5jaXBsZTogaW1tdW5vc3VwcHJlc3Npb24gYWNjZWxlcmF0ZXMgcmVjdXJyZW5jZSBvZiBvY2N1bHQgbWFsaWduYW5jeS4gVGhlc2UgYXJlIG1pbmltdW0gcmVjb21tZW5kZWQgd2FpdCB0aW1lczsgaW5kaXZpZHVhbCBhc3Nlc3NtZW50IHdpdGggb25jb2xvZ3kgaXMgZXNzZW50aWFsLiBTb21lIGNlbnRyZXMgYXBwbHkgbG9uZ2VyIHdhaXRpbmcgcGVyaW9kcyBmb3IgYWdncmVzc2l2ZSBoaXN0b2xvZ2llcy4iLAogICAgICAgIGlucHV0czpbXSwKICAgICAgICBjb21wdXRlKCl7IHJldHVybiB7dmFsOiJSZWZlcmVuY2UgUGFuZWwiLHVuaXQ6IlNlZSBndWlkZWxpbmUgY3JpdGVyaWEgYWJvdmUifTsgfSwKICAgICAgICBpbnRlcnByZXQoKXsgcmV0dXJuIHtjOiIjNjM2NmYxIix0OmBUaGlzIGlzIGEgcmVmZXJlbmNlIHBhbmVsIHN1bW1hcmlzaW5nIHB1Ymxpc2hlZCBndWlkZWxpbmUgY3JpdGVyaWEuIE5vIGNvbXBvc2l0ZSBzY29yZSBpcyBjb21wdXRlZC4gQXBwbHkgdGhlc2UgY3JpdGVyaWEgdXNpbmcgaW5kZXBlbmRlbnQgY2xpbmljYWwganVkZ2VtZW50IHdpdGhpbiB5b3VyIGluc3RpdHV0aW9uYWwgcHJvdG9jb2xzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OyB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoidHhfYm1pIiwgbmFtZToiQk1JICYgT2Jlc2l0eSBDYW5kaWRhY3kgQXNzZXNzbWVudCIsIHJlZjoiS0RJR08gVHJhbnNwbGFudCBDYW5kaWRhY3kgMjAyMCBTNjsgS0RPUUkgQ29tbWVudGFyeSAyMDIxIiwgdGFnOiJQcmUtVHJhbnNwbGFudCBCTUkgIC0tICBMaXN0aW5nIEVsaWdpYmlsaXR5IiwKICAgICAgICBmb3JtdWxhOiJCTUkgPSBXZWlnaHQgKGtnKSAvIEhlaWdodCAobSleMlxuS0RJR08gMjAyMCBndWlkYW5jZTpcbiAgQk1JIDwxOC41OiBVbmRlcndlaWdodCAgLS0gIG51dHJpdGlvbmFsIGFzc2Vzc21lbnRcbiAgQk1JIDE4LjUtMjkuOTogR2VuZXJhbGx5IGFjY2VwdGFibGUgZm9yIGxpc3RpbmdcbiAgQk1JIDMwLTM0Ljk6IEFjY2VwdGFibGUgIC0tICBsaWZlc3R5bGUgb3B0aW1pc2F0aW9uIHJlY29tbWVuZGVkXG4gIEJNSSAzNS0zOS45OiBTdHJvbmcgY29uc2lkZXJhdGlvbiBmb3Igd2VpZ2h0IHJlZHVjdGlvbiBiZWZvcmUgbGlzdGluZ1xuICBCTUkgPj00MDogTW9zdCBjZW50cmVzIHJlcXVpcmUgd2VpZ2h0IHJlZHVjdGlvbiBwcm9ncmFtbWUgKGJhcmlhdHJpYy9saWZlc3R5bGUpIGJlZm9yZSBsaXN0aW5nIiwKICAgICAgICBub3RlOiJHVUlERUxJTkUtQkFTRUQgVE9PTCAgLS0gIFRoaXMgY2FsY3VsYXRvciBhcHBsaWVzIHB1Ymxpc2hlZCBjbGluaWNhbCB0aHJlc2hvbGRzIGJ1dCBpcyBub3QgaXRzZWxmIGEgdmFsaWRhdGVkIGNvbXBvc2l0ZSBzY29yaW5nIGluc3RydW1lbnQuIEludGVycHJldCB3aXRoaW4gY2xpbmljYWwgY29udGV4dC5cblxuT2Jlc2l0eSBpbmNyZWFzZXMgcGVyaW9wZXJhdGl2ZSByaXNrICh3b3VuZCBjb21wbGljYXRpb25zLCBkZWxheWVkIGdyYWZ0IGZ1bmN0aW9uLCBjYXJkaW92YXNjdWxhciBldmVudHMpIGFuZCByZWR1Y2VzIGdyYWZ0IHN1cnZpdmFsLiBLRElHTyAyMDIwIFM2IHJlY29tbWVuZHMgd2VpZ2h0IG1hbmFnZW1lbnQgZm9yIGNhbmRpZGF0ZXMgd2l0aCBCTUkgPj0zNSBhbmQgc3Ryb25nbHkgcmVjb21tZW5kcyBpdCBmb3IgQk1JID49NDAuIFRoZXJlIGlzIG5vIGFic29sdXRlIEJNSSBjb250cmFpbmRpY2F0aW9uIGluIEtESUdPLCBidXQgbWFueSB0cmFuc3BsYW50IGNlbnRyZXMgYXBwbHkgYSBCTUkgPj00MCAoc29tZSA+PTM1KSBhcyBhIHJlbGF0aXZlIGNvbnRyYWluZGljYXRpb24gdG8gbGlzdGluZyB1bnRpbCB3ZWlnaHQgcmVkdWN0aW9uIGlzIGFjaGlldmVkLiBVbmRlcndlaWdodCAoQk1JIDwxOC41KSB3YXJyYW50cyBudXRyaXRpb25hbCBhc3Nlc3NtZW50IGFzIHNhcmNvcGVuaWEgYW5kIGZyYWlsdHkgaW5kZXBlbmRlbnRseSBwcmVkaWN0IHBvb3IgdHJhbnNwbGFudCBvdXRjb21lcy4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Ind0IixsYWJlbDoiV2VpZ2h0Iix1bml0OiJrZyIsdHlwZToibnVtYmVyIixwaDoiZS5nLiA5NSJ9LAogICAgICAgICAge2lkOiJodCIsbGFiZWw6IkhlaWdodCIsdW5pdDoiY20iLHR5cGU6Im51bWJlciIscGg6ImUuZy4gMTcwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3Qgd3Q9K3Yud3QsIGh0PSt2Lmh0OwogICAgICAgICAgaWYoIXd0fHwhaHR8fHd0PD0wfHxodDw9MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCBodG0gPSBodC8xMDA7CiAgICAgICAgICBjb25zdCBibWkgPSB3dC8oaHRtKmh0bSk7CiAgICAgICAgICBsZXQgY2F0ID0gIiI7CiAgICAgICAgICBpZihibWk8MTguNSkgY2F0PSJVbmRlcndlaWdodCI7CiAgICAgICAgICBlbHNlIGlmKGJtaTwyNSkgY2F0PSJOb3JtYWwgd2VpZ2h0IjsKICAgICAgICAgIGVsc2UgaWYoYm1pPDMwKSBjYXQ9Ik92ZXJ3ZWlnaHQiOwogICAgICAgICAgZWxzZSBpZihibWk8MzUpIGNhdD0iT2Jlc2UgY2xhc3MgSSI7CiAgICAgICAgICBlbHNlIGlmKGJtaTw0MCkgY2F0PSJPYmVzZSBjbGFzcyBJSSI7CiAgICAgICAgICBlbHNlIGNhdD0iT2Jlc2UgY2xhc3MgSUlJIChtb3JiaWQpIjsKICAgICAgICAgIHJldHVybiB7dmFsOmJtaS50b0ZpeGVkKDEpLHVuaXQ6ImtnL21eMiIsc2VjOmBDYXRlZ29yeTogJHtjYXR9IHwgV3Q6ICR7d3R9IGtnIHwgSHQ6ICR7aHR9IGNtYH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCBibWk9K3IudmFsOwogICAgICAgICAgaWYoYm1pPDE4LjUpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgQk1JICR7ci52YWx9ICAtLSAgVW5kZXJ3ZWlnaHQuIE51dHJpdGlvbmFsIGFzc2Vzc21lbnQgYW5kIGRpZXRldGljIGlucHV0IGFyZSByZWNvbW1lbmRlZC4gU2FyY29wZW5pYSBhbmQgZnJhaWx0eSBzY3JlZW5pbmcgKEZyaWVkIGNyaXRlcmlhKSBzaG91bGQgYmUgcGVyZm9ybWVkIGFzIGJvdGggaW5kZXBlbmRlbnRseSBwcmVkaWN0IHBvb3IgdHJhbnNwbGFudCBvdXRjb21lcy4gSW52ZXN0aWdhdGUgZm9yIG1hbG51dHJpdGlvbiwgY2hyb25pYyBpbmZsYW1tYXRpb24sIG9yIG9jY3VsdCBtYWxpZ25hbmN5IGFzIGFwcHJvcHJpYXRlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoYm1pPDMwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEJNSSAke3IudmFsfSAgLS0gIFdpdGhpbiB0aGUgZ2VuZXJhbGx5IGFjY2VwdGFibGUgcmFuZ2UgZm9yIHRyYW5zcGxhbnQgbGlzdGluZy4gU3RhbmRhcmQgcGVyaW9wZXJhdGl2ZSByaXNrIGFwcGxpZXMuIENhcmRpb3Zhc2N1bGFyIHJpc2sgZmFjdG9yIG9wdGltaXNhdGlvbiBhbmQgbWFpbnRlbmFuY2Ugb2YgaGVhbHRoeSB3ZWlnaHQgYXJlIHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoYm1pPDM1KSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEJNSSAke3IudmFsfSAgLS0gIE9iZXNlIGNsYXNzIEkuIExpc3RpbmcgaXMgZ2VuZXJhbGx5IGFjY2VwdGFibGUgYXQgbW9zdCBjZW50cmVzLCBidXQgbGlmZXN0eWxlIG9wdGltaXNhdGlvbiBpcyByZWNvbW1lbmRlZCB0byByZWR1Y2UgcGVyaW9wZXJhdGl2ZSByaXNrICh3b3VuZCBjb21wbGljYXRpb25zLCBkZWxheWVkIGdyYWZ0IGZ1bmN0aW9uLCBjYXJkaW92YXNjdWxhciBldmVudHMpLiBTdHJ1Y3R1cmVkIGRpZXRhcnkgY291bnNlbGxpbmcgYW5kIGV4ZXJjaXNlIHByb2dyYW1tZSBhcmUgYWR2aXNhYmxlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoYm1pPDQwKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YEJNSSAke3IudmFsfSAgLS0gIE9iZXNlIGNsYXNzIElJLiBTdHJvbmcgY29uc2lkZXJhdGlvbiBmb3IgYSBzdXBlcnZpc2VkIHdlaWdodCByZWR1Y3Rpb24gcHJvZ3JhbW1lIGJlZm9yZSB0cmFuc3BsYW50IGxpc3RpbmcgaXMgcmVjb21tZW5kZWQuIFNvbWUgY2VudHJlcyBhcHBseSBCTUkgPj0zNSBhcyBhIHJlbGF0aXZlIGNvbnRyYWluZGljYXRpb24gdW50aWwgd2VpZ2h0IGxvc3MgaXMgYWNoaWV2ZWQuIEJhcmlhdHJpYyBzdXJnZXJ5IHJlZmVycmFsIG1heSBiZSBhcHByb3ByaWF0ZSBpbiBzZWxlY3RlZCBwYXRpZW50cy4gUGVyaW9wZXJhdGl2ZSByaXNrIGlzIHNpZ25pZmljYW50bHkgaW5jcmVhc2VkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBCTUkgJHtyLnZhbH0gIC0tICBPYmVzZSBjbGFzcyBJSUkuIE1vc3QgdHJhbnNwbGFudCBjZW50cmVzIHJlcXVpcmUgYSBzdXBlcnZpc2VkIHdlaWdodCByZWR1Y3Rpb24gcHJvZ3JhbW1lIG9yIGJhcmlhdHJpYyBzdXJnZXJ5IGJlZm9yZSBsaXN0aW5nIGNhbiBwcm9jZWVkLiBQZXJpb3BlcmF0aXZlIHJpc2sgKHdvdW5kIGluZmVjdGlvbiwgZGVoaXNjZW5jZSwgdGhyb21ib2VtYm9saXNtLCBkZWxheWVkIGdyYWZ0IGZ1bmN0aW9uLCBjYXJkaW92YXNjdWxhciBldmVudHMpIGlzIHN1YnN0YW50aWFsbHkgZWxldmF0ZWQuIEEgc3RydWN0dXJlZCBtdWx0aWRpc2NpcGxpbmFyeSBhcHByb2FjaCBpbmNsdWRpbmcgYmFyaWF0cmljIG1lZGljaW5lLCBkaWV0ZXRpY3MsIGFuZCBleGVyY2lzZSBwaHlzaW9sb2d5IGlzIHJlY29tbWVuZGVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9jcHJhIiwgbmFtZToiSExBIFNlbnNpdGlzYXRpb24gJiBjUFJBIEludGVycHJldGF0aW9uIiwgcmVmOiJLRElHTyBUcmFuc3BsYW50IENhbmRpZGFjeSAyMDIwIFMxOTsgVU5PUyBjUFJBIERlZmluaXRpb24iLCB0YWc6IlByZS1UcmFuc3BsYW50ICAtLSAgQ2FsY3VsYXRlZCBQYW5lbCBSZWFjdGl2ZSBBbnRpYm9keSIsCiAgICAgICAgZm9ybXVsYToiU2Vuc2l0aXNhdGlvbiBjYXRlZ29yaWVzIGJhc2VkIG9uIGNQUkE6XG4gIDwxMCUgPSBOb24tc2Vuc2l0aXNlZFxuICAxMC03OSUgPSBNb2RlcmF0ZWx5IHNlbnNpdGlzZWRcbiAgODAtOTclID0gSGlnaGx5IHNlbnNpdGlzZWRcbiAgPj05OCUgPSBWZXJ5IGhpZ2hseSBzZW5zaXRpc2VkXG5jUFJBIHJlcHJlc2VudHMgdGhlICUgb2YgZG9ub3JzIGFnYWluc3Qgd2hvbSB0aGUgcGF0aWVudCBoYXMgcHJlLWZvcm1lZCBhbnRpLUhMQSBhbnRpYm9kaWVzIiwKICAgICAgICBub3RlOiJjUFJBIChjYWxjdWxhdGVkIFBhbmVsIFJlYWN0aXZlIEFudGlib2R5KSBpcyBkZXRlcm1pbmVkIGJ5IHNvbGlkLXBoYXNlIEhMQSBhbnRpYm9keSB0ZXN0aW5nIChMdW1pbmV4IHNpbmdsZS1hbnRpZ2VuIGJlYWQgYXNzYXkpIGFuZCByZXByZXNlbnRzIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBkb25vciBwb3B1bGF0aW9uIHRvIHdob20gdGhlIGNhbmRpZGF0ZSBoYXMgdW5hY2NlcHRhYmxlIGFudGlnZW5zLiBIaWdoZXIgY1BSQSA9IHNtYWxsZXIgY29tcGF0aWJsZSBkb25vciBwb29sID0gbG9uZ2VyIGV4cGVjdGVkIHdhaXRpbmcgdGltZS4gVU5PUyBwcm92aWRlcyBwcmlvcml0eSBwb2ludHMgZm9yIGNQUkEgPj05OCUgY2FuZGlkYXRlcy4gRGVzZW5zaXRpc2F0aW9uIHByb3RvY29scyAoSVZJRywgcml0dXhpbWFiLCBwbGFzbWFwaGVyZXNpcywgaW1saWZpZGFzZSkgbWF5IGJlIGNvbnNpZGVyZWQgZm9yIGhpZ2hseSBzZW5zaXRpc2VkIGNhbmRpZGF0ZXMgaW4gc2VsZWN0ZWQgY2VudHJlcy4gS0RJR08gMjAyMCBTMTkgcmVjb21tZW5kcyByZWd1bGFyIGFudGlib2R5IG1vbml0b3JpbmcgKGV2ZXJ5IDMgbW9udGhzIHdoaWxlIG9uIHdhaXRsaXN0IGFuZCBhZnRlciBzZW5zaXRpc2luZyBldmVudHMpLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiY3ByYSIsbGFiZWw6ImNQUkEgKENhbGN1bGF0ZWQgUGFuZWwgUmVhY3RpdmUgQW50aWJvZHkpIix1bml0OiIlIix0eXBlOiJudW1iZXIiLHBoOiJlLmcuIDg1In0sCiAgICAgICAgICB7aWQ6InNlbnNpdGlzaW5nIixsYWJlbDoiUHJpb3Igc2Vuc2l0aXNpbmcgZXZlbnRzIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WwogICAgICAgICAgICAiTm9uZSBrbm93biIsCiAgICAgICAgICAgICJQcmlvciB0cmFuc3BsYW50KHMpIiwKICAgICAgICAgICAgIkJsb29kIHRyYW5zZnVzaW9uKHMpIiwKICAgICAgICAgICAgIlByZWduYW5jeSAvIHByZWduYW5jaWVzIiwKICAgICAgICAgICAgIk11bHRpcGxlIHNlbnNpdGlzaW5nIGV2ZW50cyIKICAgICAgICAgIF19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGNwcmE9K3YuY3ByYTsKICAgICAgICAgIGlmKGNwcmE8MHx8Y3ByYT4xMDB8fCFjcHJhJiZjcHJhIT09MCkgcmV0dXJuIG51bGw7CiAgICAgICAgICBsZXQgY2F0PSIiOwogICAgICAgICAgaWYoY3ByYTwxMCkgY2F0PSJOb24tc2Vuc2l0aXNlZCI7CiAgICAgICAgICBlbHNlIGlmKGNwcmE8ODApIGNhdD0iTW9kZXJhdGVseSBzZW5zaXRpc2VkIjsKICAgICAgICAgIGVsc2UgaWYoY3ByYTw5OCkgY2F0PSJIaWdobHkgc2Vuc2l0aXNlZCI7CiAgICAgICAgICBlbHNlIGNhdD0iVmVyeSBoaWdobHkgc2Vuc2l0aXNlZCI7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjcHJhLnRvRml4ZWQoMCksdW5pdDpgJSBjUFJBICAtLSAgJHtjYXR9YCxzZWM6YFNlbnNpdGlzaW5nIGhpc3Rvcnk6ICR7di5zZW5zaXRpc2luZ3x8Im5vdCBzcGVjaWZpZWQifWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBjcHJhPStyLnZhbDsKICAgICAgICAgIGlmKGNwcmE8MTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgY1BSQSAke3IudmFsfSUgIC0tICBOb24tc2Vuc2l0aXNlZC4gQ29tcGF0aWJsZSBkb25vciBwb29sIGlzIGxhcmdlLiBTdGFuZGFyZCBjcm9zc21hdGNoIGFuZCBhbGxvY2F0aW9uIHByb2NlZHVyZXMgYXBwbHkuIE1vbml0b3IgYW50aWJvZGllcyBldmVyeSAzIG1vbnRocyBvbiB0aGUgd2FpdGxpc3QgYW5kIGFmdGVyIGFueSBzZW5zaXRpc2luZyBldmVudCAodHJhbnNmdXNpb24sIGZhaWxlZCB0cmFuc3BsYW50LCBwcmVnbmFuY3kpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoY3ByYTw4MCkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmBjUFJBICR7ci52YWx9JSAgLS0gIE1vZGVyYXRlbHkgc2Vuc2l0aXNlZC4gQ29tcGF0aWJsZSBkb25vciBwb29sIGlzIHJlZHVjZWQuIElkZW50aWZ5IHVuYWNjZXB0YWJsZSBhbnRpZ2VucyB2aWEgc2luZ2xlLWFudGlnZW4gYmVhZCBhc3NheS4gQ29uc2lkZXIgbGlzdGluZyBhdCBtdWx0aXBsZSBjZW50cmVzIHdoZXJlIHBlcm1pdHRlZC4gQXZvaWQgdW5uZWNlc3NhcnkgYmxvb2QgdHJhbnNmdXNpb25zICh1c2UgZXJ5dGhyb3BvaWVzaXMtc3RpbXVsYXRpbmcgYWdlbnRzIHByZWZlcmVudGlhbGx5KS4gTW9uaXRvciBhbnRpYm9kaWVzIGV2ZXJ5IDMgbW9udGhzLiBMaXZpbmcgZG9ub3IgZXZhbHVhdGlvbiBpcyBlbmNvdXJhZ2VkIHRvIGV4cGFuZCBvcHRpb25zLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoY3ByYTw5OCkgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBjUFJBICR7ci52YWx9JSAgLS0gIEhpZ2hseSBzZW5zaXRpc2VkLiBDb21wYXRpYmxlIGRvbm9yIHBvb2wgaXMgc2lnbmlmaWNhbnRseSByZWR1Y2VkLiBJbW11bm9sb2d5L2hpc3RvY29tcGF0aWJpbGl0eSBsYWJvcmF0b3J5IGlucHV0IGlzIGVzc2VudGlhbC4gRGVzZW5zaXRpc2F0aW9uIHByb3RvY29scyAoSVZJRyArLy0gcml0dXhpbWFiICsvLSBwbGFzbWFwaGVyZXNpcykgbWF5IGJlIGNvbnNpZGVyZWQgYXQgZXhwZXJpZW5jZWQgY2VudHJlcy4gUGFpcmVkIGtpZG5leSBleGNoYW5nZSBwcm9ncmFtbWVzIGFuZCBhY2NlcHRhYmxlIG1pc21hdGNoIHByb2dyYW1tZXMgbWF5IGV4cGFuZCBvcHRpb25zLiBNb25pdG9yIGFudGlib2RpZXMgZnJlcXVlbnRseSAoZXZlcnkgMS0zIG1vbnRocykuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YGNQUkEgJHtyLnZhbH0lICAtLSAgVmVyeSBoaWdobHkgc2Vuc2l0aXNlZCAoPj05OCUpLiBDb21wYXRpYmxlIGRvbm9yIHBvb2wgaXMgZXh0cmVtZWx5IGxpbWl0ZWQuIFVOT1MgYWxsb2NhdGlvbiBwcm92aWRlcyBwcmlvcml0eSBwb2ludHMgYXQgdGhpcyBsZXZlbC4gSW50ZW5zaXZlIGRlc2Vuc2l0aXNhdGlvbiAoSVZJRywgcml0dXhpbWFiLCBwbGFzbWFwaGVyZXNpcywgaW1saWZpZGFzZSB3aGVyZSBhdmFpbGFibGUpIHNob3VsZCBiZSBkaXNjdXNzZWQgYXQgYSBoaWdoLXZvbHVtZSB0cmFuc3BsYW50IGNlbnRyZS4gUGFpcmVkIGtpZG5leSBleGNoYW5nZSBhbmQgbXVsdGktbGlzdGluZyBzdHJhdGVnaWVzIGFyZSBzdHJvbmdseSByZWNvbW1lbmRlZC4gSGlzdG9jb21wYXRpYmlsaXR5IGxhYm9yYXRvcnkgY29sbGFib3JhdGlvbiBmb3IgdmlydHVhbCBjcm9zc21hdGNoIG9wdGltaXNhdGlvbiBpcyBlc3NlbnRpYWwuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InR4X2ZyYWlsdHkiLCBuYW1lOiJGcmFpbHR5IFNjcmVlbiAgLS0gIEZyaWVkIENyaXRlcmlhIiwgcmVmOiJGcmllZCBMUCBldCBhbC4sIEogR2Vyb250b2wgMjAwMTs1NjpNMTQ2LU0xNTY7IEtESUdPIFRyYW5zcGxhbnQgQ2FuZGlkYWN5IDIwMjAiLCB0YWc6IlByZS1UcmFuc3BsYW50IEZyYWlsdHkgQXNzZXNzbWVudCIsCiAgICAgICAgZm9ybXVsYToiRnJpZWQgRnJhaWx0eSBQaGVub3R5cGUgIC0tICBzY29yZSAwLTU6XG4gIDEuIFVuaW50ZW50aW9uYWwgd2VpZ2h0IGxvc3MgPjQuNSBrZyAoMTAgbGJzKSBpbiBwYXN0IHllYXJcbiAgMi4gU2VsZi1yZXBvcnRlZCBleGhhdXN0aW9uIChDRVMtRCBzY2FsZSlcbiAgMy4gTG93IGdyaXAgc3RyZW5ndGggKGJlbG93IHNleC9CTUktYWRqdXN0ZWQgMjB0aCBwZXJjZW50aWxlKVxuICA0LiBTbG93IGdhaXQgc3BlZWQgKDUtbWV0cmUgd2FsayA+Ni03IHNlY29uZHMsIHNleC9oZWlnaHQtYWRqdXN0ZWQpXG4gIDUuIExvdyBwaHlzaWNhbCBhY3Rpdml0eSAoYmVsb3cgc2V4LWFkanVzdGVkIDIwdGggcGVyY2VudGlsZSBrY2FsL3dlZWspXG5Sb2J1c3Q6IDAgfCBQcmUtZnJhaWw6IDEtMiB8IEZyYWlsOiA+PTMiLAogICAgICAgIG5vdGU6IkZyYWlsdHkgaXMgaW5kZXBlbmRlbnRseSBhc3NvY2lhdGVkIHdpdGggaW5jcmVhc2VkIG1vcnRhbGl0eSwgZ3JhZnQgbG9zcywgZGVsYXllZCBncmFmdCBmdW5jdGlvbiwgYW5kIHByb2xvbmdlZCBob3NwaXRhbGlzYXRpb24gYWZ0ZXIga2lkbmV5IHRyYW5zcGxhbnRhdGlvbi4gS0RJR08gMjAyMCBhY2tub3dsZWRnZXMgZnJhaWx0eSBhc3Nlc3NtZW50IGFzIGVtZXJnaW5nIGJlc3QgcHJhY3RpY2UgZm9yIHRyYW5zcGxhbnQgY2FuZGlkYWN5IGV2YWx1YXRpb24uIFRoZSBGcmllZCBwaGVub3R5cGUgKDIwMDEpIGlzIHRoZSBtb3N0IHdpZGVseSB2YWxpZGF0ZWQgZnJhaWx0eSBpbnN0cnVtZW50LiBGcmFpbHR5IGlzIHBvdGVudGlhbGx5IG1vZGlmaWFibGUgdGhyb3VnaCBwcmVoYWJpbGl0YXRpb24gKGV4ZXJjaXNlLCBudXRyaXRpb25hbCBvcHRpbWlzYXRpb24pLiBGcmFpbHR5IGFsb25lIGlzIG5vdCBhbiBhYnNvbHV0ZSBjb250cmFpbmRpY2F0aW9uIHRvIHRyYW5zcGxhbnRhdGlvbiBidXQgc2hvdWxkIGluZm9ybSBzaGFyZWQgZGVjaXNpb24tbWFraW5nLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoid3RfbG9zcyIsbGFiZWw6IlVuaW50ZW50aW9uYWwgd2VpZ2h0IGxvc3MgPjQuNSBrZyAoMTAgbGJzKSBpbiBwYXN0IHllYXIiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImV4aGF1c3Rpb24iLGxhYmVsOiJTZWxmLXJlcG9ydGVkIGV4aGF1c3Rpb24gKGZlZWxpbmcgdGhhdCBldmVyeXRoaW5nIGlzIGFuIGVmZm9ydCwgb3IgY291bGQgbm90IGdldCBnb2luZywgbW9zdCBkYXlzKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiZ3JpcCIsbGFiZWw6IkxvdyBncmlwIHN0cmVuZ3RoIChiZWxvdyBzZXgtIGFuZCBCTUktYWRqdXN0ZWQgMjB0aCBwZXJjZW50aWxlKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiZ2FpdCIsbGFiZWw6IlNsb3cgZ2FpdCBzcGVlZCAoNS1tZXRyZSB3YWxrIHRpbWUgPjYtNyBzZWNvbmRzLCBhZGp1c3RlZCBmb3Igc2V4IGFuZCBoZWlnaHQpIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJhY3Rpdml0eSIsbGFiZWw6IkxvdyBwaHlzaWNhbCBhY3Rpdml0eSAoYmVsb3cgc2V4LWFkanVzdGVkIDIwdGggcGVyY2VudGlsZSBmb3Iga2NhbC93ZWVrKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBzY29yZSA9IFt2Lnd0X2xvc3Msdi5leGhhdXN0aW9uLHYuZ3JpcCx2LmdhaXQsdi5hY3Rpdml0eV0uZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDsKICAgICAgICAgIGxldCBjYXQgPSAiUm9idXN0IjsKICAgICAgICAgIGlmKHNjb3JlPj0zKSBjYXQ9IkZyYWlsIjsKICAgICAgICAgIGVsc2UgaWYoc2NvcmU+PTEpIGNhdD0iUHJlLWZyYWlsIjsKICAgICAgICAgIHJldHVybiB7dmFsOnNjb3JlLHVuaXQ6YC81ICAtLSAgJHtjYXR9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCBzPXIudmFsOwogICAgICAgICAgaWYocz09PTApIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgRnJpZWQgc2NvcmUgMC81ICAtLSAgUm9idXN0LiBObyBmcmFpbHR5IGNyaXRlcmlhIG1ldC4gU3RhbmRhcmQgdHJhbnNwbGFudCBjYW5kaWRhY3kgZXZhbHVhdGlvbiBtYXkgcHJvY2VlZC4gQ29udGludWVkIHBoeXNpY2FsIGFjdGl2aXR5IGFuZCBudXRyaXRpb25hbCBtYWludGVuYW5jZSBhcmUgcmVjb21tZW5kZWQuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihzPD0yKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YEZyaWVkIHNjb3JlICR7c30vNSAgLS0gIFByZS1mcmFpbC4gVGhpcyBpcyBhc3NvY2lhdGVkIHdpdGggYW4gaW50ZXJtZWRpYXRlIHJpc2sgb2YgYWR2ZXJzZSBwb3N0LXRyYW5zcGxhbnQgb3V0Y29tZXMuIFByZWhhYmlsaXRhdGlvbiAoc3RydWN0dXJlZCBleGVyY2lzZSBwcm9ncmFtbWUsIG51dHJpdGlvbmFsIG9wdGltaXNhdGlvbiwgcHJvdGVpbiBzdXBwbGVtZW50YXRpb24pIGlzIHJlY29tbWVuZGVkIGJlZm9yZSB0cmFuc3BsYW50IGxpc3Rpbmcgd2hlcmUgZmVhc2libGUuIFJlYXNzZXNzbWVudCBhZnRlciAzLTYgbW9udGhzIG9mIHByZWhhYmlsaXRhdGlvbiBtYXkgZGVtb25zdHJhdGUgaW1wcm92ZW1lbnQuIEZyYWlsdHkgYWxvbmUgc2hvdWxkIG5vdCBwcmVjbHVkZSB0cmFuc3BsYW50IGxpc3RpbmcgYnV0IHNob3VsZCBpbmZvcm0gc2hhcmVkIGRlY2lzaW9uLW1ha2luZyByZWdhcmRpbmcgcmlzay4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgRnJpZWQgc2NvcmUgJHtzfS81ICAtLSAgRnJhaWwuIEZyYWlsdHkgaXMgaW5kZXBlbmRlbnRseSBhc3NvY2lhdGVkIHdpdGggaW5jcmVhc2VkIHBvc3QtdHJhbnNwbGFudCBtb3J0YWxpdHksIGdyYWZ0IGxvc3MsIGFuZCBwcm9sb25nZWQgaG9zcGl0YWxpc2F0aW9uLiBBIG11bHRpZGlzY2lwbGluYXJ5IHByZWhhYmlsaXRhdGlvbiBwcm9ncmFtbWUgKHBoeXNpb3RoZXJhcHksIGRpZXRldGljcywgZ2VyaWF0cmljIG1lZGljaW5lIGlucHV0KSBpcyBzdHJvbmdseSByZWNvbW1lbmRlZC4gVHJhbnNwbGFudCBsaXN0aW5nIGRlY2lzaW9ucyBzaG91bGQgaW52b2x2ZSBhIGNhcmVmdWwgcmlzay1iZW5lZml0IGRpc2N1c3Npb24gd2l0aCB0aGUgcGF0aWVudCwgaW5jb3Jwb3JhdGluZyBmcmFpbHR5IHN0YXR1cyBhbG9uZ3NpZGUgYWxsIG90aGVyIGNhbmRpZGFjeSBmYWN0b3JzLiBSZWFzc2Vzc21lbnQgYWZ0ZXIgYSBkZWZpbmVkIHByZWhhYmlsaXRhdGlvbiBwZXJpb2QgaXMgYWR2aXNhYmxlLiBGcmFpbHR5IG1heSBiZSBtb2RpZmlhYmxlICAtLSAgYSB0cmlhbCBvZiBwcmVoYWJpbGl0YXRpb24gYmVmb3JlIGEgZmluYWwgbGlzdGluZyBkZWNpc2lvbiBpcyBhcHByb3ByaWF0ZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vIC0tIFJFRkVSRU5DRSBQQU5FTFMgLS0KICAgICAgewogICAgICAgIGlkOiJ0eF9jb250cmFpbmRpY2F0aW9ucyIsIG5hbWU6IltSRUZdIEFic29sdXRlIENvbnRyYWluZGljYXRpb25zIFBhbmVsIiwgcmVmOiJLRElHTyBUcmFuc3BsYW50IENhbmRpZGFjeSAyMDIwOyBBU1QvQVNUUyBDb25zZW5zdXMiLCB0YWc6IlByZS1UcmFuc3BsYW50ICAtLSAgQWJzb2x1dGUgQ29udHJhaW5kaWNhdGlvbnMiLAogICAgICAgIGZvcm11bGE6IkFic29sdXRlIGNvbnRyYWluZGljYXRpb25zIHRvIGtpZG5leSB0cmFuc3BsYW50YXRpb246XG4gIDEuIEFjdGl2ZSB1bnRyZWF0ZWQgbWFsaWduYW5jeSAoZXhjZXB0IG5vbi1tZWxhbm9tYSBza2luLCBpbmNpZGVudGFsIHNtYWxsIHJlbmFsKVxuICAyLiBBY3RpdmUgdW50cmVhdGVkIGluZmVjdGlvbiAoVEIsIEhJViB3aXRoIGRldGVjdGFibGUgdmlyYWwgbG9hZCwgYWN0aXZlIGhlcGF0aXRpcylcbiAgMy4gVW5jb250cm9sbGVkIHN1YnN0YW5jZSBkZXBlbmRlbmNlIChhY3RpdmUgd2l0aGluIDYgbW9udGhzKVxuICA0LiBTZXZlcmUgaXJyZXZlcnNpYmxlIG11bHRpLW9yZ2FuIGZhaWx1cmVcbiAgNS4gTGlmZSBleHBlY3RhbmN5IDwxIHllYXIgaW5kZXBlbmRlbnQgb2YgcmVuYWwgZGlzZWFzZVxuICA2LiBBY3RpdmUgbm9uLWFkaGVyZW5jZSB0byBtZWRpY2FsIHRoZXJhcHkgKGRvY3VtZW50ZWQgcGF0dGVybilcbiAgNy4gU2V2ZXJlIHVuY29ycmVjdGFibGUgY2FyZGlhYyBkaXNlYXNlIChpbm9wZXJhYmxlLCBFRiA8MjAlIHdpdGhvdXQgcmV2YXNjdWxhcmlzYXRpb24gb3B0aW9uKVxuICA4LiBBY3RpdmUgcHN5Y2hvc2lzIG9yIHNldmVyZSBjb2duaXRpdmUgaW1wYWlybWVudCBwcmVjbHVkaW5nIGluZm9ybWVkIGNvbnNlbnQiLAogICAgICAgIG5vdGU6IlRoZXNlIHJlcHJlc2VudCB3aWRlbHkgYWNjZXB0ZWQgYWJzb2x1dGUgY29udHJhaW5kaWNhdGlvbnMuIFJlbGF0aXZlIGNvbnRyYWluZGljYXRpb25zIChhZ2UgPjgwLCBCTUkgPjQwLCByZWN1cnJlbnQgb3hhbGF0ZSBuZXBocm9wYXRoeSwgYWN0aXZlIGx1cHVzLCBldGMuKSByZXF1aXJlIGluZGl2aWR1YWwgTURUIGFzc2Vzc21lbnQuIFNvbWUgY2VudHJlcyB0cmVhdCBISVYrIHBhdGllbnRzIHdpdGggdW5kZXRlY3RhYmxlIFZMIGFzIGVsaWdpYmxlICAtLSAgY29uc3VsdCBsb2NhbCBwcm90b2NvbC4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Im1hbGlnIixsYWJlbDoiQWN0aXZlIHVudHJlYXRlZCBtYWxpZ25hbmN5Iix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJpbmZlY3QiLGxhYmVsOiJBY3RpdmUgdW50cmVhdGVkIHN5c3RlbWljIGluZmVjdGlvbiAoVEIsIEhJViBWTCBkZXRlY3RhYmxlKSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoic3Vic3RhbmNlIixsYWJlbDoiQWN0aXZlIHN1YnN0YW5jZSBkZXBlbmRlbmNlICg8NiBtb250aHMgYWJzdGluZW5jZSkiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6Im1vZiIsbGFiZWw6IlNldmVyZSBpcnJldmVyc2libGUgbXVsdGktb3JnYW4gZmFpbHVyZSIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoibGlmZTF5ciIsbGFiZWw6IkxpZmUgZXhwZWN0YW5jeSA8MSB5ZWFyIGluZGVwZW5kZW50IG9mIGtpZG5leSBkaXNlYXNlIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJub25hZGhlcmUiLGxhYmVsOiJEb2N1bWVudGVkIGFjdGl2ZSBub24tYWRoZXJlbmNlIHBhdHRlcm4iLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImNhcmRpYWNfc2V2IixsYWJlbDoiU2V2ZXJlIHVuY29ycmVjdGFibGUgY2FyZGlhYyBkaXNlYXNlIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJjb2duaXRpdmUiLGxhYmVsOiJTZXZlcmUgY29nbml0aXZlIGltcGFpcm1lbnQvYWN0aXZlIHBzeWNob3NpcyAobm8gY2FwYWNpdHkpIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGhpdHM9W3YubWFsaWcsdi5pbmZlY3Qsdi5zdWJzdGFuY2Usdi5tb2Ysdi5saWZlMXlyLHYubm9uYWRoZXJlLHYuY2FyZGlhY19zZXYsdi5jb2duaXRpdmVdLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgIHJldHVybiB7dmFsOmhpdHMubGVuZ3RoLHVuaXQ6aGl0cy5sZW5ndGg+MD8iQUJTT0xVVEUgQ09OVFJBSU5ESUNBVElPTihTKSBQUkVTRU5UIjoiTk8gQUJTT0xVVEUgQ09OVFJBSU5ESUNBVElPTlMgSURFTlRJRklFRCJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIpewogICAgICAgICAgaWYoci52YWw9PT0wKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YE5vIGFic29sdXRlIGNvbnRyYWluZGljYXRpb25zIGlkZW50aWZpZWQuIFByb2NlZWQgd2l0aCBmdWxsIGNhbmRpZGFjeSBldmFsdWF0aW9uIGluY2x1ZGluZyBjYXJkaW92YXNjdWxhciwgbWFsaWduYW5jeSwgaW5mZWN0aW9uIHNjcmVlbmluZywgYW5kIHBzeWNob3NvY2lhbCBhc3Nlc3NtZW50LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke3IudmFsfSBhYnNvbHV0ZSBjb250cmFpbmRpY2F0aW9uKHMpIHByZXNlbnQuIFRyYW5zcGxhbnQgbGlzdGluZyBjYW5ub3QgcHJvY2VlZCB1bnRpbCBhbGwgYWJzb2x1dGUgY29udHJhaW5kaWNhdGlvbnMgYXJlIHJlc29sdmVkLiBNRFQgcmV2aWV3IGlzIHJlcXVpcmVkIHRvIGRldGVybWluZSB3aGV0aGVyIGFueSBpZGVudGlmaWVkIGZhY3RvciBpcyBwb3RlbnRpYWxseSByZXZlcnNpYmxlIChlLmcuLCBpbmZlY3Rpb24gdHJlYXRtZW50LCBzdWJzdGFuY2UgcmVoYWJpbGl0YXRpb24sIGNhcmRpYWMgaW50ZXJ2ZW50aW9uKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDoidHhfaW5mZWN0aW9uX3NjcmVlbiIsIG5hbWU6IltSRUZdIFByZS1UcmFuc3BsYW50IEluZmVjdGlvbiBTY3JlZW5pbmciLCByZWY6IktESUdPIDIwMjA7IEFTVCBJbmZlY3Rpb3VzIERpc2Vhc2UgR3VpZGVsaW5lczsgRVJBLUVEVEEgQmVzdCBQcmFjdGljZSIsIHRhZzoiUHJlLVRyYW5zcGxhbnQgIC0tICBJbmZlY3Rpb24gQ2hlY2tsaXN0IiwKICAgICAgICBmb3JtdWxhOiJSZXF1aXJlZCBzY3JlZW5pbmc6XG4gIFRCOiBJR1JBIChRdWFudGlGRVJPTi9ULVNQT1QpICsgQ1hSIChtYW5kYXRvcnkpXG4gIEhJVjogNHRoLWdlbiBBZy9BYiAobWFuZGF0b3J5KVxuICBIQlY6IEhCc0FnLCBhbnRpLUhCcywgYW50aS1IQmMgKG1hbmRhdG9yeSlcbiAgSENWOiBBbnRpLUhDViBBYiArIE5BVCBpZiBwb3NpdGl2ZSAobWFuZGF0b3J5KVxuICBDTVY6IElnRyBzZXJvbG9neSAobWFuZGF0b3J5ICAtLSAgZGV0ZXJtaW5lcyBwcm9waHlsYXhpcylcbiAgRUJWOiBJZ0cgc2Vyb2xvZ3kgKG1hbmRhdG9yeSAgLS0gIFBUTEQgcmlzayBzdHJhdGlmaWNhdGlvbilcbiAgVlpWOiBJZ0cgc2Vyb2xvZ3kgKHZhY2NpbmF0ZSBpZiBuZWdhdGl2ZSlcbiAgU3lwaGlsaXM6IFJQUi9WRFJMIChtYW5kYXRvcnkpXG4gIFN0cm9uZ3lsb2lkZXM6IElnRyBpZiBlbmRlbWljIGV4cG9zdXJlXG4gIENoYWdhczogSWdHIGlmIGVuZGVtaWMgZXhwb3N1cmUgKExhdGluIEFtZXJpY2EpIiwKICAgICAgICBub3RlOiJJR1JBIHByZWZlcnJlZCBvdmVyIFBQRCBpbiBFU1JEIChQUEQgdW5yZWxpYWJsZSBkdWUgdG8gYW5lcmd5KS4gQWxsIEhCVi1zZXJvbmVnYXRpdmUgY2FuZGlkYXRlcyBzaG91bGQgcmVjZWl2ZSBIQlYgdmFjY2luYXRpb24gKGhpZ2gtZG9zZS9hZGp1dmFudGVkIHByZWZlcnJlZCBpbiBFU1JEKS4gQ01WIEQrL1ItIGlzIGhpZ2hlc3QtcmlzayBjb21iaW5hdGlvbiBmb3IgcG9zdC10cmFuc3BsYW50IENNViBkaXNlYXNlLiBFQlYgUi0gcmVjZWl2aW5nIEVCViBEKyBvcmdhbiBpcyBoaWdoZXN0IHJpc2sgZm9yIFBUTEQuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ0YiIsbGFiZWw6IlRCIHNjcmVlbiAoSUdSQSArIENYUikgY29tcGxldGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJoaXYiLGxhYmVsOiJISVYgNHRoLWdlbiBBZy9BYiBjb21wbGV0ZWQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImhidiIsbGFiZWw6IkhCViBwYW5lbCAoSEJzQWcsIGFudGktSEJzLCBhbnRpLUhCYykgY29tcGxldGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJoY3YiLGxhYmVsOiJIQ1YgQWIgKCsvLSBOQVQpIGNvbXBsZXRlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoiY212IixsYWJlbDoiQ01WIElnRyBjb21wbGV0ZWQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgICB7aWQ6ImVidiIsbGFiZWw6IkVCViBJZ0cgY29tcGxldGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJ2enYiLGxhYmVsOiJWWlYgSWdHIGNvbXBsZXRlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICAgIHtpZDoic3lwaGlsaXMiLGxhYmVsOiJTeXBoaWxpcyBzY3JlZW4gKFJQUi9WRFJMKSBjb21wbGV0ZWQiLHR5cGU6ImNoZWNrYm94In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgZG9uZT1bdi50Yix2Lmhpdix2Lmhidix2Lmhjdix2LmNtdix2LmVidix2LnZ6dix2LnN5cGhpbGlzXS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoOwogICAgICAgICAgcmV0dXJuIHt2YWw6YCR7ZG9uZX0vOGAsdW5pdDoibWFuZGF0b3J5IHNjcmVlbnMgY29tcGxldGVkIixzZWM6ZG9uZT09PTg/IkFsbCBtYW5kYXRvcnkgc2NyZWVucyBjb21wbGV0ZSI6IklOQ09NUExFVEUgIC0tICBsaXN0aW5nIGNhbm5vdCBwcm9jZWVkIn07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGRvbmU9W3YudGIsdi5oaXYsdi5oYnYsdi5oY3Ysdi5jbXYsdi5lYnYsdi52enYsdi5zeXBoaWxpc10uZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDsKICAgICAgICAgIGNvbnN0IG1pc3Npbmc9W107CiAgICAgICAgICBpZighdi50YikgbWlzc2luZy5wdXNoKCJUQiAoSUdSQStDWFIpIik7CiAgICAgICAgICBpZighdi5oaXYpIG1pc3NpbmcucHVzaCgiSElWIik7CiAgICAgICAgICBpZighdi5oYnYpIG1pc3NpbmcucHVzaCgiSEJWIHBhbmVsIik7CiAgICAgICAgICBpZighdi5oY3YpIG1pc3NpbmcucHVzaCgiSENWIik7CiAgICAgICAgICBpZighdi5jbXYpIG1pc3NpbmcucHVzaCgiQ01WIElnRyIpOwogICAgICAgICAgaWYoIXYuZWJ2KSBtaXNzaW5nLnB1c2goIkVCViBJZ0ciKTsKICAgICAgICAgIGlmKCF2LnZ6dikgbWlzc2luZy5wdXNoKCJWWlYgSWdHIik7CiAgICAgICAgICBpZighdi5zeXBoaWxpcykgbWlzc2luZy5wdXNoKCJTeXBoaWxpcyIpOwogICAgICAgICAgaWYoZG9uZT09PTgpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgQWxsIDggbWFuZGF0b3J5IGluZmVjdGlvbiBzY3JlZW5zIGNvbXBsZXRlZC4gUHJvY2VlZCB3aXRoIHJlc3VsdCBpbnRlcnByZXRhdGlvbiwgdmFjY2luYXRpb24gYXMgaW5kaWNhdGVkIChIQlYgaWYgYW50aS1IQnMgPDEwLCBWWlYgaWYgc2Vyb25lZ2F0aXZlKSwgYW5kIENNVi9FQlYgcmlzayBzdHJhdGlmaWNhdGlvbiBmb3IgcG9zdC10cmFuc3BsYW50IHByb3BoeWxheGlzIHBsYW5uaW5nLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke2RvbmV9Lzggc2NyZWVucyBjb21wbGV0ZWQuIE91dHN0YW5kaW5nOiAke21pc3Npbmcuam9pbigiLCAiKX0uIEFsbCBtYW5kYXRvcnkgc2NyZWVucyBtdXN0IGJlIGNvbXBsZXRlZCBiZWZvcmUgdHJhbnNwbGFudCBsaXN0aW5nIGNhbiBwcm9jZWVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gLS0gUE9TVC1UUkFOU1BMQU5UIC0tCiAgICAgIHsKICAgICAgICBpZDoidHhfZWdmcl9zdXJ2IiwgbmFtZToiUG9zdC1UcmFuc3BsYW50IGVHRlIgU3VydmVpbGxhbmNlIiwgcmVmOiJLRElHTyBUcmFuc3BsYW50IFJlY2lwaWVudCAyMDA5IENoLjE7IExvdXB5IGV0IGFsLiwgTkVKTSAyMDE4IiwgdGFnOiJQb3N0LVRyYW5zcGxhbnQgIC0tICBlR0ZSIFRyYWplY3RvcnkgJiBSZWplY3Rpb24gUmlzayIsCiAgICAgICAgZm9ybXVsYToiRXhwZWN0ZWQgZUdGUiB0cmFqZWN0b3J5IGFmdGVyIGtpZG5leSB0cmFuc3BsYW50OlxuICBXZWVrIDE6IFJhcGlkIHJpc2UgKERHRiBtYXkgZGVsYXkpXG4gIE1vbnRoIDEtMzogUGxhdGVhdSBhdCBuYWRpci1hZGp1c3RlZCBwZWFrXG4gIE1vbnRoIDMtMTI6IFN0YWJsZSBvciBzbG93IGltcHJvdmVtZW50XG4gIFllYXIgMSs6IFN0YWJsZTsgZGVjbGluZSA+NSBtTC9taW4veXIgPSBpbnZlc3RpZ2F0ZVxuXG5SZWplY3Rpb24gZmxhZ3M6XG4gIC0gQ3IgcmlzZSA+MjAlIGZyb20gbmFkaXIgPSBpbnZlc3RpZ2F0ZVxuICAtIE5ldyBwcm90ZWludXJpYSAoVVBDUiA+NTAwKSA9IGludmVzdGlnYXRlXG4gIC0gZGUgbm92byBEU0EgPSBoaWdoIHJpc2sgZm9yIEFNUiIsCiAgICAgICAgbm90ZToiR1VJREVMSU5FLUJBU0VEIFRPT0wgIC0tICBUaGlzIGNhbGN1bGF0b3IgYXBwbGllcyBwdWJsaXNoZWQgY2xpbmljYWwgdGhyZXNob2xkcyBidXQgaXMgbm90IGl0c2VsZiBhIHZhbGlkYXRlZCBjb21wb3NpdGUgc2NvcmluZyBpbnN0cnVtZW50LiBJbnRlcnByZXQgd2l0aGluIGNsaW5pY2FsIGNvbnRleHQuXG5cbkFueSBzdXN0YWluZWQgZUdGUiBkZWNsaW5lIHNob3VsZCBwcm9tcHQgaW52ZXN0aWdhdGlvbjogbm9uLWFkaGVyZW5jZSBzY3JlZW4sIHRhY3JvbGltdXMgbGV2ZWwsIHVyaW5hbHlzaXMsIERTQSB0ZXN0aW5nLCByZW5hbCB1bHRyYXNvdW5kLCBhbmQgY29uc2lkZXJhdGlvbiBvZiB0cmFuc3BsYW50IGJpb3BzeS4gRGlmZmVyZW50aWFsIGluY2x1ZGVzIHJlamVjdGlvbiAoVENNUi9BTVIpLCBCSyBuZXBocm9wYXRoeSwgcmVjdXJyZW50IGRpc2Vhc2UsIENOSSB0b3hpY2l0eSwgYW5kIG9ic3RydWN0aW9uLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiZWdmcl9uYWRpciIsbGFiZWw6IkJlc3QgKG5hZGlyLWFkanVzdGVkKSBlR0ZSIHBvc3QtdHJhbnNwbGFudCIsdW5pdDoibUwvbWluLzEuNzNtXjIiLHR5cGU6Im51bWJlciIscGg6IjU1In0sCiAgICAgICAgICB7aWQ6ImVnZnJfbm93IixsYWJlbDoiQ3VycmVudCBlR0ZSIix1bml0OiJtTC9taW4vMS43M21eMiIsdHlwZToibnVtYmVyIixwaDoiNDIifSwKICAgICAgICAgIHtpZDoibW9udGhzX3Bvc3QiLGxhYmVsOiJNb250aHMgcG9zdC10cmFuc3BsYW50Iix1bml0OiJtb250aHMiLHR5cGU6Im51bWJlciIscGg6IjE4In0sCiAgICAgICAgICB7aWQ6Im5ld19wcm90ZWludXJpYSIsbGFiZWw6Ik5ldyBwcm90ZWludXJpYSAoVVBDUiA+NTAwIG1nL2cpIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJkbkRTQSIsbGFiZWw6ImRlIG5vdm8gRFNBIGRldGVjdGVkIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJ0YWNfbG93IixsYWJlbDoiVGFjcm9saW11cyB0cm91Z2ggc3ViLXRoZXJhcGV1dGljIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGJlc3Q9K3YuZWdmcl9uYWRpcixub3c9K3YuZWdmcl9ub3csbW89K3YubW9udGhzX3Bvc3Q7CiAgICAgICAgICBpZighYmVzdHx8IW5vd3x8IW1vKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IGRlY2xpbmU9YmVzdC1ub3c7CiAgICAgICAgICBjb25zdCBhbm51YWxSYXRlPW1vPjA/KGRlY2xpbmUvKG1vLzEyKSk6MDsKICAgICAgICAgIHJldHVybiB7dmFsOm5vdy50b0ZpeGVkKDApLHVuaXQ6Im1ML21pbi8xLjczbV4yIixzZWM6YERlY2xpbmUgZnJvbSBiZXN0OiAke2RlY2xpbmUudG9GaXhlZCgwKX0gfCBBbm51YWwgcmF0ZTogJHthbm51YWxSYXRlLnRvRml4ZWQoMSl9IG1ML21pbi95cmB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBiZXN0PSt2LmVnZnJfbmFkaXIsbm93PSt2LmVnZnJfbm93LG1vPSt2Lm1vbnRoc19wb3N0OwogICAgICAgICAgY29uc3QgZGVjbGluZT1iZXN0LW5vdzsKICAgICAgICAgIGNvbnN0IHBjdERyb3A9KGRlY2xpbmUvYmVzdCkqMTAwOwogICAgICAgICAgY29uc3QgYW5udWFsUmF0ZT1tbz4wPyhkZWNsaW5lLyhtby8xMikpOjA7CiAgICAgICAgICBjb25zdCBmbGFncz1bdi5uZXdfcHJvdGVpbnVyaWEmJiJuZXcgcHJvdGVpbnVyaWEiLHYuZG5EU0EmJiJkZSBub3ZvIERTQSIsdi50YWNfbG93JiYic3ViLXRoZXJhcGV1dGljIHRhY3JvbGltdXMiXS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICBpZihwY3REcm9wPjIwfHxhbm51YWxSYXRlPjV8fGZsYWdzLmxlbmd0aD4wKXsKICAgICAgICAgICAgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBlR0ZSICR7bm93fSAgLS0gIFNpZ25pZmljYW50IGRlY2xpbmUgKCR7cGN0RHJvcC50b0ZpeGVkKDApfSUgZnJvbSBiZXN0LCAke2FubnVhbFJhdGUudG9GaXhlZCgxKX0gbUwvbWluL3lyKS4ke2ZsYWdzLmxlbmd0aD4wPyIgRmxhZ3M6ICIrZmxhZ3Muam9pbigiLCAiKSsiLiI6IiJ9IFRyYW5zcGxhbnQgYmlvcHN5IGlzIHN0cm9uZ2x5IHJlY29tbWVuZGVkLiBEaWZmZXJlbnRpYWw6IGFjdXRlL2Nocm9uaWMgcmVqZWN0aW9uLCBCSyBuZXBocm9wYXRoeSwgQ05JIHRveGljaXR5LCByZWN1cnJlbnQgZGlzZWFzZSwgb2JzdHJ1Y3Rpb24uIENoZWNrIHRhY3JvbGltdXMgbGV2ZWwsIEJLIFBDUiwgRFNBLCB1cmluZSBtaWNyb3Njb3B5LCBhbmQgcmVuYWwgdWx0cmFzb3VuZC4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHBjdERyb3A+MTB8fGFubnVhbFJhdGU+Myl7CiAgICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgZUdGUiAke25vd30gIC0tICBNb2RlcmF0ZSBkZWNsaW5lICgke3BjdERyb3AudG9GaXhlZCgwKX0lIGZyb20gYmVzdCkuIEVuaGFuY2VkIHN1cnZlaWxsYW5jZSByZWNvbW1lbmRlZDogdGFjcm9saW11cyBsZXZlbCwgRFNBLCBCSyBQQ1IsIHVyaW5hbHlzaXMuIENvbnNpZGVyIHByb3RvY29sIGJpb3BzeSBpZiBkZWNsaW5lIHBlcnNpc3RzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBlR0ZSICR7bm93fSAgLS0gIFN0YWJsZSB0cmFqZWN0b3J5ICgke3BjdERyb3AudG9GaXhlZCgwKX0lIGZyb20gYmVzdCwgJHthbm51YWxSYXRlLnRvRml4ZWQoMSl9IG1ML21pbi95cikuIFJvdXRpbmUgc3VydmVpbGxhbmNlOiB0YWNyb2xpbXVzIGxldmVsLCB1cmluYWx5c2lzLCBEU0EgcGVyIHByb3RvY29sLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9iYW5mZiIsIG5hbWU6IkJhbmZmIDIwMjIgUmVqZWN0aW9uIENsYXNzaWZpZXIiLCByZWY6Ik5hZXNlbnMgZXQgYWwuLCBBbSBKIFRyYW5zcGxhbnQgMjAyNDsyNDozMzgtMzQ5OyBCYW5mZiBGb3VuZGF0aW9uIDIwMjIiLCB0YWc6IlBvc3QtVHJhbnNwbGFudCAgLS0gIFRDTVIgKyBBTVIvTVZJIENsYXNzaWZpY2F0aW9uIiwKICAgICAgICBmb3JtdWxhOiJUQ01SIChULUNlbGwgTWVkaWF0ZWQgUmVqZWN0aW9uKTpcbiAgQm9yZGVybGluZTogaTErdDEgKHN1c3BpY2lvdXMpXG4gIEdyYWRlIElBOiBpMit0MiB8IEdyYWRlIElCOiBpMit0MyBvciBpMyt0Mi90M1xuICBHcmFkZSBJSUE6IHYxIChpbnRpbWFsIGFydGVyaXRpcykgfCBHcmFkZSBJSUI6IHYyXG4gIEdyYWRlIElJSTogdjMgKHRyYW5zbXVyYWwvZmlicmlub2lkIG5lY3Jvc2lzKVxuXG5BTVIvTVZJIChBbnRpYm9keS1NZWRpYXRlZCBSZWplY3Rpb24pOlxuICBSZXF1aXJlcyBBTEwgMyBjcml0ZXJpYTpcbiAgMS4gTVZJOiBbZytwdGNdID49MiAob3IgdmFsaWRhdGVkIHRyYW5zY3JpcHQpXG4gIDIuIEV2aWRlbmNlIG9mIGFudGlib2R5IGludGVyYWN0aW9uOiBDNGQ+PTIgKElGKSBvciBDNGQ+MCAoSUhDKSBvciBtb2xlY3VsYXJcbiAgMy4gRFNBIHBvc2l0aXZlIChITEEgb3IgdmFsaWRhdGVkIG5vbi1ITEEpXG5cbiAgQWN0aXZlIEFNUjogYWN0aXZlIGZlYXR1cmVzIG9ubHkgKGNnPTAsIHB0Y21sPTApXG4gIENocm9uaWMgYWN0aXZlIEFNUjogYWN0aXZlICsgY2hyb25pYyAoY2c+MCBvciBzZXZlcmUgcHRjbWwpXG4gIFByb2JhYmxlIEFNUjogRFNBKyBidXQgTVZJIGJlbG93IHRocmVzaG9sZFxuICBNVkkgRFNBLS9DNGQtOiBNVkkgcHJlc2VudCBidXQgbm8gRFNBLCBubyBDNGQiLAogICAgICAgIG5vdGU6IkJhbmZmIDIwMjIgaW50cm9kdWNlZCBNVkkgYXMgYSBzdGFuZGFsb25lIGNhdGVnb3J5IHdoZW4gRFNBIGFuZCBDNGQgYXJlIG5lZ2F0aXZlLiBUaGlzIGlzIGEgZGVzY3JpcHRpdmUgcGhlbm90eXBlIHJlcXVpcmluZyBmdXJ0aGVyIHJlc2VhcmNoLiBUQ01SIGFuZCBBTVIgY2FuIGNvZXhpc3QgKG1peGVkIHJlamVjdGlvbikuIEJpb3BzeS1iYXNlZCB0cmFuc2NyaXB0IGRpYWdub3N0aWNzIChlLmcuLCBNTUR4KSBjYW4gc3Vic3RpdHV0ZSBmb3IgaGlzdG9sb2dpYyBNVkkgaWYgdmFsaWRhdGVkLiBBbHdheXMgY29ycmVsYXRlIHdpdGggY2xpbmljYWwgY29udGV4dCwgRFNBIHRyYWplY3RvcnksIGFuZCBncmFmdCBmdW5jdGlvbi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6Imlfc2NvcmUiLGxhYmVsOiJpIHNjb3JlIChpbnRlcnN0aXRpYWwgaW5mbGFtbWF0aW9uKSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiaTAiLCJpMSIsImkyIiwiaTMiXX0sCiAgICAgICAgICB7aWQ6InRfc2NvcmUiLGxhYmVsOiJ0IHNjb3JlICh0dWJ1bGl0aXMpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJ0MCIsInQxIiwidDIiLCJ0MyJdfSwKICAgICAgICAgIHtpZDoidl9zY29yZSIsbGFiZWw6InYgc2NvcmUgKGludGltYWwgYXJ0ZXJpdGlzKSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsidjAiLCJ2MSIsInYyIiwidjMiXX0sCiAgICAgICAgICB7aWQ6Imdfc2NvcmUiLGxhYmVsOiJnIHNjb3JlIChnbG9tZXJ1bGl0aXMpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJnMCIsImcxIiwiZzIiLCJnMyJdfSwKICAgICAgICAgIHtpZDoicHRjX3Njb3JlIixsYWJlbDoicHRjIHNjb3JlIChwZXJpdHVidWxhciBjYXBpbGxhcml0aXMpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJwdGMwIiwicHRjMSIsInB0YzIiLCJwdGMzIl19LAogICAgICAgICAge2lkOiJjNGQiLGxhYmVsOiJDNGQgc3RhaW5pbmciLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk5lZ2F0aXZlIChDNGQwKSIsIk1pbmltYWwgKEM0ZDEpIiwiRm9jYWwgKEM0ZDIpIiwiRGlmZnVzZSAoQzRkMykiXX0sCiAgICAgICAgICB7aWQ6ImNnX3Njb3JlIixsYWJlbDoiY2cgc2NvcmUgKHRyYW5zcGxhbnQgZ2xvbWVydWxvcGF0aHkpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJjZzAiLCJjZzFhIiwiY2cxYiIsImNnMiIsImNnMyJdfSwKICAgICAgICAgIHtpZDoiZHNhX3N0YXR1cyIsbGFiZWw6IkRvbm9yLVNwZWNpZmljIEFudGlib2R5IChEU0EpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJOZWdhdGl2ZSIsIlBvc2l0aXZlIChITEEgQ2xhc3MgSSkiLCJQb3NpdGl2ZSAoSExBIENsYXNzIElJKSIsIlBvc2l0aXZlIChITEEgQ2xhc3MgSSArIElJKSJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBpPXBhcnNlSW50KHYuaV9zY29yZT8ucmVwbGFjZSgiaSIsIiIpKXx8MDsKICAgICAgICAgIGNvbnN0IHQ9cGFyc2VJbnQodi50X3Njb3JlPy5yZXBsYWNlKCJ0IiwiIikpfHwwOwogICAgICAgICAgY29uc3QgdnY9cGFyc2VJbnQodi52X3Njb3JlPy5yZXBsYWNlKCJ2IiwiIikpfHwwOwogICAgICAgICAgY29uc3QgZz1wYXJzZUludCh2Lmdfc2NvcmU/LnJlcGxhY2UoImciLCIiKSl8fDA7CiAgICAgICAgICBjb25zdCBwdGM9cGFyc2VJbnQodi5wdGNfc2NvcmU/LnJlcGxhY2UoInB0YyIsIiIpKXx8MDsKICAgICAgICAgIGNvbnN0IGNnPSh2LmNnX3Njb3JlfHwiY2cwIikhPT0iY2cwIj8xOjA7CiAgICAgICAgICBjb25zdCBjNGRQb3M9di5jNGQ/LmluY2x1ZGVzKCJGb2NhbCIpfHx2LmM0ZD8uaW5jbHVkZXMoIkRpZmZ1c2UiKTsKICAgICAgICAgIGNvbnN0IGRzYVBvcz12LmRzYV9zdGF0dXMhPT0iTmVnYXRpdmUiOwogICAgICAgICAgY29uc3QgbXZpPWcrcHRjOwoKICAgICAgICAgIGxldCB0Y21yPSJOb25lIjsKICAgICAgICAgIGlmKHZ2Pj0zKSB0Y21yPSJHcmFkZSBJSUkiOwogICAgICAgICAgZWxzZSBpZih2dj09PTIpIHRjbXI9IkdyYWRlIElJQiI7CiAgICAgICAgICBlbHNlIGlmKHZ2PT09MSkgdGNtcj0iR3JhZGUgSUlBIjsKICAgICAgICAgIGVsc2UgaWYoKGk+PTImJnQ+PTMpfHwoaT49MyYmdD49MikpIHRjbXI9IkdyYWRlIElCIjsKICAgICAgICAgIGVsc2UgaWYoaT49MiYmdD49MikgdGNtcj0iR3JhZGUgSUEiOwogICAgICAgICAgZWxzZSBpZihpPj0xJiZ0Pj0xKSB0Y21yPSJCb3JkZXJsaW5lIjsKCiAgICAgICAgICBsZXQgYW1yPSJOb25lIjsKICAgICAgICAgIGlmKG12aT49MiYmKGM0ZFBvcykmJmRzYVBvcyl7CiAgICAgICAgICAgIGFtcj1jZz8iQ2hyb25pYyBBY3RpdmUgQU1SIjoiQWN0aXZlIEFNUiI7CiAgICAgICAgICB9IGVsc2UgaWYobXZpPj0yJiZkc2FQb3MmJiFjNGRQb3MpewogICAgICAgICAgICBhbXI9IlByb2JhYmxlIEFNUiAoRFNBKywgQzRkLSkiOwogICAgICAgICAgfSBlbHNlIGlmKG12aT49MiYmIWRzYVBvcyYmIWM0ZFBvcyl7CiAgICAgICAgICAgIGFtcj0iTVZJLCBEU0EtbmVnYXRpdmUsIEM0ZC1uZWdhdGl2ZSI7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHt2YWw6YFRDTVI6ICR7dGNtcn0gfCBBTVI6ICR7YW1yfWAsdW5pdDoiIixzZWM6YE1WSSBzY29yZTogZyR7Z30rcHRjJHtwdGN9PSR7bXZpfSB8IEM0ZDogJHt2LmM0ZH0gfCBEU0E6ICR7di5kc2Ffc3RhdHVzfSB8IGNnOiAke3YuY2dfc2NvcmV9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGhhc1RDTVI9IXIudmFsLmluY2x1ZGVzKCJUQ01SOiBOb25lIik7CiAgICAgICAgICBjb25zdCBoYXNBTVI9IXIudmFsLmluY2x1ZGVzKCJBTVI6IE5vbmUiKTsKICAgICAgICAgIGlmKGhhc1RDTVImJmhhc0FNUikgcmV0dXJuIHtjOiIjOTkxYjFiIix0OmBNSVhFRCBSRUpFQ1RJT046ICR7ci52YWx9LiBUaGlzIGNhcnJpZXMgdGhlIHdvcnN0IHByb2dub3Npcy4gVHJlYXRtZW50OiBoaWdoLWRvc2UgSVYgbWV0aHlscHJlZG5pc29sb25lIChUQ01SKSArIGFudGktcmVqZWN0aW9uIHRoZXJhcHkgZm9yIEFNUiAocGxhc21hcGhlcmVzaXMsIElWSUcsIHJpdHV4aW1hYikgYXMgaW5kaWNhdGVkLiBVcmdlbnQgdHJhbnNwbGFudCBuZXBocm9sb2d5IGFuZCBwYXRob2xvZ3kgcmV2aWV3LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoci52YWwuaW5jbHVkZXMoIkdyYWRlIElJSSIpfHxyLnZhbC5pbmNsdWRlcygiR3JhZGUgSUlCIikpIHJldHVybiB7YzoiI2RjMjYyNiIsdDpgU2V2ZXJlIFRDTVI6ICR7ci52YWx9LiBJViBtZXRoeWxwcmVkbmlzb2xvbmUgNTAwbWcgeDNkLiBJZiBzdGVyb2lkLXJlc2lzdGFudDogQVRHLiBDb25zaWRlciBjb25jdXJyZW50IHN1YmNsaW5pY2FsIEFNUi4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHIudmFsLmluY2x1ZGVzKCJBY3RpdmUgQU1SIil8fHIudmFsLmluY2x1ZGVzKCJDaHJvbmljIEFjdGl2ZSBBTVIiKSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke3IudmFsfS4gVHJlYXRtZW50OiBwbGFzbWFwaGVyZXNpcyArIElWSUcgKy8tIHJpdHV4aW1hYi4gT3B0aW1pc2UgYmFzZWxpbmUgaW1tdW5vc3VwcHJlc3Npb24uIENocm9uaWMgYWN0aXZlIEFNUiBoYXMgbGltaXRlZCB0cmVhdG1lbnQgb3B0aW9ucyBhbmQgY2FycmllcyBzaWduaWZpY2FudCBncmFmdCBsb3NzIHJpc2suICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihoYXNUQ01SKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YCR7ci52YWx9LiBJViBtZXRoeWxwcmVkbmlzb2xvbmUgcHVsc2UuIE9wdGltaXNlIHRhY3JvbGltdXMgdGFyZ2V0LiBSZXBlYXQgYmlvcHN5IGlmIG5vIHJlc3BvbnNlIGF0IDctMTAgZGF5cy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKHIudmFsLmluY2x1ZGVzKCJQcm9iYWJsZSBBTVIiKSkgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmAke3IudmFsfS4gRW5oYW5jZWQgc3VydmVpbGxhbmNlOiByZXBlYXQgRFNBLCByZXBlYXQgYmlvcHN5IDMtNiBtb250aHMuIE9wdGltaXNlIGltbXVub3N1cHByZXNzaW9uLiBDb25zaWRlciBtb2xlY3VsYXIgZGlhZ25vc3RpY3MgKE1NRHgpLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoci52YWwuaW5jbHVkZXMoIk1WSSwgRFNBLW5lZ2F0aXZlIikpIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgJHtyLnZhbH0uIFRoaXMgaXMgYSBCYW5mZiAyMDIyIGRlc2NyaXB0aXZlIGNhdGVnb3J5IG9mIHVuY2xlYXIgYWV0aW9sb2d5LiBDb25zaWRlciBub24tSExBIGFudGlib2RpZXMsIHZpcmFsIGluZmVjdGlvbiwgZHJ1ZyB0b3hpY2l0eS4gRW5oYW5jZWQgc3VydmVpbGxhbmNlLiBSZXNlYXJjaCBpcyBvbmdvaW5nLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBObyByZWplY3Rpb24gY3JpdGVyaWEgbWV0IG9uIGN1cnJlbnQgYmlvcHN5IHNjb3Jlcy4gQ29ycmVsYXRlIHdpdGggY2xpbmljYWwgY29udGV4dCwgZ3JhZnQgZnVuY3Rpb24gdHJhamVjdG9yeSwgYW5kIERTQSBzdGF0dXMuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICAvLyAtLSBJTU1VTk9TVVBQUkVTU0lPTiBURE0gLS0KICAgICAgewogICAgICAgIGlkOiJ0eF9jc2FfdGRtIiwgbmFtZToiQ3ljbG9zcG9yaW5lIFRETSAoQzAgKyBDMikiLCByZWY6IktESUdPIFRyYW5zcGxhbnQgUmVjaXBpZW50IDIwMDk7IENPTkNFUlQgR3JvdXAgQ29uc2Vuc3VzOyBMZXZ5IGV0IGFsLiwgVHJhbnNwbGFudGF0aW9uIDIwMDIiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uICAtLSAgQ3NBIFRoZXJhcGV1dGljIERydWcgTW9uaXRvcmluZyIsCiAgICAgICAgZm9ybXVsYToiQzAgKHRyb3VnaCkgdGFyZ2V0czpcbiAgTW9udGggMC0zOiAxNTAtMzAwIG5nL21MXG4gIE1vbnRoIDMtMTI6IDEwMC0yMDAgbmcvbUxcbiAgPjEyIG1vbnRoczogNzUtMTUwIG5nL21MXG5cbkMyICgyaCBwb3N0LWRvc2UpIHRhcmdldHM6XG4gIE1vbnRoIDAtMzogMTIwMC0xNTAwIG5nL21MIChkZSBub3ZvKVxuICBNb250aCAzLTEyOiA4MDAtMTAwMCBuZy9tTFxuICA+MTIgbW9udGhzOiA1MDAtNjAwIG5nL21MXG5cbkMyIGNvcnJlbGF0ZXMgYmV0dGVyIHdpdGggQVVDMC00IHRoYW4gQzAgKHJeMiB+MC44NiB2cyAwLjYxKS4iLAogICAgICAgIG5vdGU6IkMyIG1vbml0b3JpbmcgaXMgcHJlZmVycmVkIHdoZXJlIGF2YWlsYWJsZSBhcyBpdCBiZXR0ZXIgcmVmbGVjdHMgZHJ1ZyBleHBvc3VyZSAoQVVDMC00KS4gQ3NBIGFic29ycHRpb24gKEMyL0MwIHJhdGlvKSBpbmNyZWFzZXMgb3ZlciB0aW1lIHBvc3QtdHJhbnNwbGFudC4gQ1lQM0E0LzUgYW5kIFAtZ3AgaW50ZXJhY3Rpb25zIGFyZSBzaWduaWZpY2FudCAoZGlsdGlhemVtLCBrZXRvY29uYXpvbGUgaW5jcmVhc2UgbGV2ZWxzOyByaWZhbXBpY2luLCBwaGVueXRvaW4gZGVjcmVhc2UpLiBHaXZlIHNpcm9saW11cyA0aCBhZnRlciBDc0EgdG8gcmVkdWNlIGludGVyYWN0aW9uLiBOZW9yYWwgKG1pY3JvZW11bHNpb24pIGhhcyBtb3JlIHByZWRpY3RhYmxlIGFic29ycHRpb24gdGhhbiBTYW5kaW1tdW5lLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoiYzAiLGxhYmVsOiJDMCAoVHJvdWdoIExldmVsKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjE3NSJ9LAogICAgICAgICAge2lkOiJjMiIsbGFiZWw6IkMyICgyLUhvdXIgUG9zdC1Eb3NlIExldmVsKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6Ijk1MCJ9LAogICAgICAgICAge2lkOiJwZXJpb2QiLGxhYmVsOiJUaW1lIFBvc3QtVHJhbnNwbGFudCIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiMC0zIG1vbnRocyIsIjMtMTIgbW9udGhzIiwiPjEyIG1vbnRocyJdfSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjMD0rdi5jMCxjMj0rdi5jMixwPXYucGVyaW9kOwogICAgICAgICAgY29uc3QgdGFyZ2V0cz17CiAgICAgICAgICAgICIwLTMgbW9udGhzIjp7YzA6WzE1MCwzMDBdLGMyOlsxMjAwLDE1MDBdfSwKICAgICAgICAgICAgIjMtMTIgbW9udGhzIjp7YzA6WzEwMCwyMDBdLGMyOls4MDAsMTAwMF19LAogICAgICAgICAgICAiPjEyIG1vbnRocyI6e2MwOls3NSwxNTBdLGMyOls1MDAsNjAwXX0sCiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgdGd0PXRhcmdldHNbcF18fHRhcmdldHNbIjAtMyBtb250aHMiXTsKICAgICAgICAgIGNvbnN0IGMwU3RhdHVzPWMwP2MwPHRndC5jMFswXT8iU1VCLVRIRVJBUEVVVElDIjpjMD50Z3QuYzBbMV0/IlNVUFJBLVRIRVJBUEVVVElDIjoiV0lUSElOIFRBUkdFVCI6Im5vdCBtZWFzdXJlZCI7CiAgICAgICAgICBjb25zdCBjMlN0YXR1cz1jMj9jMjx0Z3QuYzJbMF0/IlNVQi1USEVSQVBFVVRJQyI6YzI+dGd0LmMyWzFdPyJTVVBSQS1USEVSQVBFVVRJQyI6IldJVEhJTiBUQVJHRVQiOiJub3QgbWVhc3VyZWQiOwogICAgICAgICAgY29uc3QgYWJzb3JwdGlvbj1jMCYmYzI/KGMyL2MwKS50b0ZpeGVkKDEpOiJOL0EiOwogICAgICAgICAgcmV0dXJuIHt2YWw6YEMwOiAke2MwU3RhdHVzfSB8IEMyOiAke2MyU3RhdHVzfWAsdW5pdDoiIixzZWM6YEMwOiAke2MwfHwiLSJ9ICh0YXJnZXQgJHt0Z3QuYzBbMF19LSR7dGd0LmMwWzFdfSkgfCBDMjogJHtjMnx8Ii0ifSAodGFyZ2V0ICR7dGd0LmMyWzBdfS0ke3RndC5jMlsxXX0pIHwgQWJzb3JwdGlvbiBDMi9DMDogJHthYnNvcnB0aW9ufWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBoYXNTdWI9ci52YWwuaW5jbHVkZXMoIlNVQiIpOwogICAgICAgICAgY29uc3QgaGFzU3VwcmE9ci52YWwuaW5jbHVkZXMoIlNVUFJBIik7CiAgICAgICAgICBpZihoYXNTdXByYSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmAke3IudmFsfS4gTmVwaHJvdG94aWNpdHkgcmlzazogY2hlY2sgY3JlYXRpbmluZSB0cmVuZCwgbWFnbmVzaXVtLCB1cmljIGFjaWQuIENvbnNpZGVyIGRvc2UgcmVkdWN0aW9uLiBNb25pdG9yIGZvciB0cmVtb3IsIGdpbmdpdmFsIGh5cGVycGxhc2lhLCBoaXJzdXRpc20uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICBpZihoYXNTdWIpIHJldHVybiB7YzoiI2VhNTgwYyIsdDpgJHtyLnZhbH0uIFJlamVjdGlvbiByaXNrIGVsZXZhdGVkLiBJbmNyZWFzZSBkb3NlIG9yIGNoZWNrIGFkaGVyZW5jZSwgZHJ1ZyBpbnRlcmFjdGlvbnMgKENZUDNBNCBpbmR1Y2VycyksIEdJIGFic29ycHRpb24uICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YCR7ci52YWx9LiBDb250aW51ZSBjdXJyZW50IGRvc2luZy4gTW9uaXRvciBsZXZlbHMgcGVyIHByb3RvY29sLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF90YWNfdGRtIiwgbmFtZToiVGFjcm9saW11cyBURE0iLCByZWY6IktESUdPIDIwMDk7IEVMSVRFLVN5bXBob255IChFa2JlcmcgZXQgYWwuLCBORUpNIDIwMDcpOyBBZ3VyIGV0IGFsLiwgQ2xpbiBUcmFuc3BsYW50IDIwMjMiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uICAtLSAgVGFjcm9saW11cyBUcm91Z2ggKyBJUFYiLAogICAgICAgIGZvcm11bGE6IkMwICh0cm91Z2gpIHRhcmdldHMgKHdpdGggTU1GICsgc3Rlcm9pZHMpOlxuICBNb250aCAwLTE6IDgtMTIgbmcvbUwgKHN0YW5kYXJkKSBvciA2LTEwIChsb3ctZG9zZSBFTElURS1TeW1waG9ueSlcbiAgTW9udGggMS0zOiA2LTEwIG5nL21MXG4gIE1vbnRoIDMtMTI6IDUtOCBuZy9tTFxuICA+MTIgbW9udGhzOiA1LTcgbmcvbUxcblxuTmVwaHJvdG94aWNpdHkgZmxhZzogQzAgcGVyc2lzdGVudGx5ID4xMlxuSVBWIChJbnRyYS1QYXRpZW50IFZhcmlhYmlsaXR5KTogQ1YlID0gKFNEL21lYW4peDEwMFxuICBDViUgPjMwJSA9IGhpZ2ggSVBWIC0+IGluY3JlYXNlZCBncmFmdCBsb3NzIHJpc2siLAogICAgICAgIG5vdGU6IktESUdPIHN1Z2dlc3RzIDMtMTUgbmcvbUwgaW4gbW9udGhzIDEtNCAobG93IHF1YWxpdHkgZXZpZGVuY2UpLiBSZWNlbnQgZXZpZGVuY2UgKEFndXIgMjAyMywgbXVsdGljZW50ZXIgbj0xMTg2OCkgc3VwcG9ydHMgb3B0aW1hbCByYW5nZSBvZiA1LjAtNy45IG5nL21MIGF0IDItMTIgbW9udGhzIGFuZCA1LjAtNi45IG5nL21MIGF0IDEyLTcyIG1vbnRocyBmb3IgYmVzdCBjb21wb3NpdGUgb3V0Y29tZXMuIEhpZ2ggSVBWIChDViUgPjMwJSkgaXMgaW5kZXBlbmRlbnRseSBhc3NvY2lhdGVkIHdpdGggZG5EU0EgYW5kIGdyYWZ0IGxvc3MuIFN0YXJ0aW5nIGRvc2U6IDAuMDUtMC4wNzUgbWcva2cgQkQgKEVMSVRFLVN5bXBob255IGxvdy1kb3NlKS4gUHJvbG9uZ2VkLXJlbGVhc2UgKEFkdmFncmFmL0VudmFyc3VzKSBtYXkgcmVkdWNlIElQVi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InRhY19jMCIsbGFiZWw6IlRhY3JvbGltdXMgQzAgKFRyb3VnaCkiLHVuaXQ6Im5nL21MIix0eXBlOiJudW1iZXIiLHBoOiI3LjIifSwKICAgICAgICAgIHtpZDoicGVyaW9kIixsYWJlbDoiVGltZSBQb3N0LVRyYW5zcGxhbnQiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIjAtMSBtb250aHMiLCIxLTMgbW9udGhzIiwiMy0xMiBtb250aHMiLCI+MTIgbW9udGhzIl19LAogICAgICAgICAge2lkOiJpcHZfbWVhbiIsbGFiZWw6Ik1lYW4gb2YgbGFzdCA1IHRyb3VnaCBsZXZlbHMgKGZvciBJUFYpIix1bml0OiJuZy9tTCIsdHlwZToibnVtYmVyIixwaDoiNi44In0sCiAgICAgICAgICB7aWQ6Imlwdl9zZCIsbGFiZWw6IlNEIG9mIGxhc3QgNSB0cm91Z2ggbGV2ZWxzIix1bml0OiJuZy9tTCIsdHlwZToibnVtYmVyIixwaDoiMi4xIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgYzA9K3YudGFjX2MwLHA9di5wZXJpb2Q7CiAgICAgICAgICBjb25zdCB0YXJnZXRzPXsKICAgICAgICAgICAgIjAtMSBtb250aHMiOls4LDEyXSwKICAgICAgICAgICAgIjEtMyBtb250aHMiOls2LDEwXSwKICAgICAgICAgICAgIjMtMTIgbW9udGhzIjpbNSw4XSwKICAgICAgICAgICAgIj4xMiBtb250aHMiOls1LDddLAogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IHRndD10YXJnZXRzW3BdfHxbNSw4XTsKICAgICAgICAgIGNvbnN0IHN0YXR1cz1jMD9jMDx0Z3RbMF0/IlNVQi1USEVSQVBFVVRJQyI6YzA+dGd0WzFdPyJTVVBSQS1USEVSQVBFVVRJQyI6IldJVEhJTiBUQVJHRVQiOiJub3QgbWVhc3VyZWQiOwogICAgICAgICAgY29uc3QgbmVwaHJvdG94PWMwPjEyPyJORVBIUk9UT1hJQ0lUWSBGTEFHIjoiIjsKICAgICAgICAgIGNvbnN0IG1lYW49K3YuaXB2X21lYW4sc2Q9K3YuaXB2X3NkOwogICAgICAgICAgY29uc3QgaXB2PW1lYW4mJnNkPyhzZC9tZWFuKjEwMCkudG9GaXhlZCgxKTpudWxsOwogICAgICAgICAgcmV0dXJuIHt2YWw6c3RhdHVzLHVuaXQ6YEMwOiAke2MwfHwiLSJ9IG5nL21MICh0YXJnZXQgJHt0Z3RbMF19LSR7dGd0WzFdfSlgLHNlYzpgJHtuZXBocm90b3g/bmVwaHJvdG94KyIgfCAiOiIifUlQViBDViU6ICR7aXB2fHwiTi9BIn0ke2lwdiYmK2lwdj4zMD8iICAtLSAgSElHSCAoPjMwJSkiOiIifWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBjMD0rdi50YWNfYzA7CiAgICAgICAgICBjb25zdCBtZWFuPSt2Lmlwdl9tZWFuLHNkPSt2Lmlwdl9zZDsKICAgICAgICAgIGNvbnN0IGlwdj1tZWFuJiZzZD8oc2QvbWVhbioxMDApOm51bGw7CiAgICAgICAgICBsZXQgbXNnPSIiOwogICAgICAgICAgaWYoci52YWw9PT0iU1VQUkEtVEhFUkFQRVVUSUMiKSBtc2c9YFRhY3JvbGltdXMgJHtjMH0gbmcvbUwgIC0tICBhYm92ZSB0YXJnZXQuIE5lcGhyb3RveGljaXR5IHJpc2sgKHRyZW1vciwgaHlwZXJ0ZW5zaW9uLCBoeXBlcmdseWNhZW1pYSwgaHlwZXJrYWxhZW1pYSwgaHlwb21hZ25lc2FlbWlhKS4gUmVkdWNlIGRvc2UuIENoZWNrIGNyZWF0aW5pbmUgdHJlbmQuYDsKICAgICAgICAgIGVsc2UgaWYoYzA+MTIpIG1zZz1gVGFjcm9saW11cyAke2MwfSBuZy9tTCAgLS0gIE5FUEhST1RPWElDSVRZIEZMQUcgKD4xMikuIFVyZ2VudCBkb3NlIHJlZHVjdGlvbi4gQ2hlY2sgTWcsIEssIGdsdWNvc2UuYDsKICAgICAgICAgIGVsc2UgaWYoci52YWw9PT0iU1VCLVRIRVJBUEVVVElDIikgbXNnPWBUYWNyb2xpbXVzICR7YzB9IG5nL21MICAtLSAgYmVsb3cgdGFyZ2V0LiBSZWplY3Rpb24gcmlzay4gVmVyaWZ5IGFkaGVyZW5jZSwgY2hlY2sgQ1lQM0E1IGdlbm90eXBlIGlmIGF2YWlsYWJsZSwgcmV2aWV3IGRydWcgaW50ZXJhY3Rpb25zIChyaWZhbXBpY2luLCBwaGVueXRvaW4sIFN0IEpvaG4ncyB3b3J0KS5gOwogICAgICAgICAgZWxzZSBtc2c9YFRhY3JvbGltdXMgJHtjMH0gbmcvbUwgIC0tICB3aXRoaW4gdGFyZ2V0LiBDb250aW51ZSBjdXJyZW50IGRvc2luZy5gOwogICAgICAgICAgaWYoaXB2JiZpcHY+MzApIG1zZys9YCBISUdIIElQViAoQ1YlICR7aXB2LnRvRml4ZWQoMSl9JSkgIC0tICBpbmRlcGVuZGVudGx5IGFzc29jaWF0ZWQgd2l0aCBkbkRTQSBhbmQgZ3JhZnQgbG9zcy4gQ29uc2lkZXIgY29udmVyc2lvbiB0byBwcm9sb25nZWQtcmVsZWFzZSBmb3JtdWxhdGlvbiwgYWRoZXJlbmNlIGludGVydmVudGlvbiwgb3IgcGhhcm1hY2lzdCByZXZpZXcuYDsKICAgICAgICAgIHJldHVybiB7YzpyLnZhbD09PSJTVVBSQS1USEVSQVBFVVRJQyJ8fGMwPjEyPyIjZGMyNjI2IjpyLnZhbD09PSJTVUItVEhFUkFQRVVUSUMiPyIjZWE1ODBjIjoiIzE2YTM0YSIsdDpgJHttc2d9ICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InR4X3Npcm9fdGRtIiwgbmFtZToiU2lyb2xpbXVzIFRETSIsIHJlZjoiS0RJR08gMjAwOTsgU3RyYXR0YSwgTWVkc2NhcGUgMjAwMzsgU2NpZW5jZURpcmVjdCBURE0gUmV2aWV3IDIwMTYiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uICAtLSAgU2lyb2xpbXVzIFRyb3VnaCAoV2l0aC1DTkkgdnMgQ05JLUZyZWUpIiwKICAgICAgICBmb3JtdWxhOiJTaXJvbGltdXMgQzAgdGFyZ2V0czpcbiAgV2l0aCBDTkkgKHJlZHVjZWQtZG9zZSBDTkkpOlxuICAgIFRhcmdldCBzaXJvbGltdXM6IDQtOCBuZy9tTFxuICAgIFRhcmdldCBDTkk6IFRBQyA0LTYsIENzQSAxMDAtMTUwIG5nL21MXG4gICAgQ29tYmluZWQgbGV2ZWwgPDIwIG5nL21MIHByZWZlcnJlZFxuICBDTkktZnJlZSAoU1JMICsgTU1GICsgc3Rlcm9pZHMpOlxuICAgIDAtMTIgbW9udGhzOiAxMC0xNSBuZy9tTFxuICAgID4xMiBtb250aHM6IDgtMTIgbmcvbUwgKHNvbWUgY2VudHJlcyA2LTEwKVxuICBUb3hpY2l0eTogQzAgPjE1IG5nL21MIC0+IGR5c2xpcGlkYWVtaWEsIHRocm9tYm9jeXRvcGVuaWEsIGxldWtvcGVuaWFcblxuS0RJR086IEF2b2lkIFNSTCArIGZ1bGwtZG9zZSBDTkkgKHBvdGVudGlhdGVzIG5lcGhyb3RveGljaXR5KVxuRG8gbm90IHN0YXJ0IFNSTCB1bnRpbCBncmFmdCBmdW5jdGlvbiBlc3RhYmxpc2hlZCBhbmQgd291bmRzIGhlYWxlZCIsCiAgICAgICAgbm90ZToiU2lyb2xpbXVzIHQxLzIgfjYwaCAoYWR1bHRzKS4gQzAgY29ycmVsYXRlcyB3ZWxsIHdpdGggQVVDLiBHaXZlIDRoIGFmdGVyIENzQSAocGhhcm1hY29raW5ldGljIGludGVyYWN0aW9uKS4gTm8gc2lnbmlmaWNhbnQgaW50ZXJhY3Rpb24gd2l0aCB0YWNyb2xpbXVzLiBDb250cmFpbmRpY2F0aW9ucyB0byBDTkktPlNSTCBjb252ZXJzaW9uOiBwcm90ZWludXJpYSA+ODAwIG1nL2QsIGVHRlIgPDQwLCByZWNlbnQgcmVqZWN0aW9uICg8M21vKSwgdW5jb250cm9sbGVkIGR5c2xpcGlkYWVtaWEuIEtESUdPIHJlY29tbWVuZHMgbW9uaXRvcmluZyBsZXZlbHMgKDJDKS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InNybF9jMCIsbGFiZWw6IlNpcm9saW11cyBDMCAoVHJvdWdoKSIsdW5pdDoibmcvbUwiLHR5cGU6Im51bWJlciIscGg6IjguNSJ9LAogICAgICAgICAge2lkOiJyZWdpbWVuIixsYWJlbDoiUmVnaW1lbiIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiV2l0aCByZWR1Y2VkLWRvc2UgQ05JIiwiQ05JLWZyZWUgKFNSTCArIE1NRiArIHN0ZXJvaWRzKSJdfSwKICAgICAgICAgIHtpZDoibW9udGhzIixsYWJlbDoiTW9udGhzIHBvc3QtdHJhbnNwbGFudCIsdW5pdDoibW9udGhzIix0eXBlOiJudW1iZXIiLHBoOiIxMiJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IGMwPSt2LnNybF9jMCxjbmk9di5yZWdpbWVuPy5pbmNsdWRlcygiV2l0aCIpOwogICAgICAgICAgaWYoIWMwKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IG1vPSt2Lm1vbnRoc3x8NjsKICAgICAgICAgIGxldCBsbyxoaTsKICAgICAgICAgIGlmKGNuaSl7bG89NDtoaT04O30KICAgICAgICAgIGVsc2V7bG89bW88PTEyPzEwOjg7aGk9bW88PTEyPzE1OjEyO30KICAgICAgICAgIGNvbnN0IHN0YXR1cz1jMDxsbz8iU1VCLVRIRVJBUEVVVElDIjpjMD5oaT8iU1VQUkEtVEhFUkFQRVVUSUMiOiJXSVRISU4gVEFSR0VUIjsKICAgICAgICAgIHJldHVybiB7dmFsOnN0YXR1cyx1bml0OmBDMDogJHtjMH0gbmcvbUwgKHRhcmdldCAke2xvfS0ke2hpfSBmb3IgJHtjbmk/IndpdGgtQ05JIjoiQ05JLWZyZWUifSlgLHNlYzpjMD4xNT8iVE9YSUNJVFkgUklTSyAoPjE1KSI6IiJ9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBjMD0rdi5zcmxfYzA7CiAgICAgICAgICBpZihjMD4xNSkgcmV0dXJuIHtjOiIjZGMyNjI2Iix0OmBTaXJvbGltdXMgJHtjMH0gbmcvbUwgIC0tICBhYm92ZSAxNS4gVG94aWNpdHkgcmlzazogY2hlY2sgbGlwaWQgcHJvZmlsZSwgRkJDICh0aHJvbWJvY3l0b3BlbmlhLCBsZXVrb3BlbmlhKSwgcHJvdGVpbnVyaWEuIERvc2UgcmVkdWN0aW9uIHJlcXVpcmVkLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoci52YWw9PT0iU1VQUkEtVEhFUkFQRVVUSUMiKSByZXR1cm4ge2M6IiNlYTU4MGMiLHQ6YFNpcm9saW11cyAke2MwfSBuZy9tTCAgLS0gIGFib3ZlIHRhcmdldC4gQ2hlY2sgbGlwaWRzLCBGQkMuIENvbnNpZGVyIGRvc2UgcmVkdWN0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYoci52YWw9PT0iU1VCLVRIRVJBUEVVVElDIikgcmV0dXJuIHtjOiIjZWE1ODBjIix0OmBTaXJvbGltdXMgJHtjMH0gbmcvbUwgIC0tICBiZWxvdyB0YXJnZXQuIFJlamVjdGlvbiByaXNrLiBJbmNyZWFzZSBkb3NlLiBDaGVjayBkcnVnIGludGVyYWN0aW9ucyBhbmQgYWRoZXJlbmNlLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgcmV0dXJuIHtjOiIjMTZhMzRhIix0OmBTaXJvbGltdXMgJHtjMH0gbmcvbUwgIC0tICB3aXRoaW4gdGFyZ2V0LiBDb250aW51ZS4gTW9uaXRvciBsaXBpZHMgYW5kIEZCQyBhdCBlYWNoIHZpc2l0LiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9ldmVyb190ZG0iLCBuYW1lOiJFdmVyb2xpbXVzIFRETSArIENOSS0+bVRPUiBDb252ZXJzaW9uIiwgcmVmOiJUUkFOU0ZPUk0gU3R1ZHk7IEJ1ZGRlIGV0IGFsLiwgQW0gSiBUcmFuc3BsYW50IDIwMTE7IEtESUdPIDIwMDkiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uICAtLSAgRXZlcm9saW11cyBUcm91Z2ggKyBDb252ZXJzaW9uIEVsaWdpYmlsaXR5IiwKICAgICAgICBmb3JtdWxhOiJFdmVyb2xpbXVzIEMwIHRhcmdldHMgKHdpdGggcmVkdWNlZC1kb3NlIENOSSk6XG4gIFRhcmdldDogMy04IG5nL21MXG4gIFdpdGggVEFDOiB0YXJnZXQgVEFDIDQtNiBuZy9tTFxuICBXaXRoIENzQTogdGFyZ2V0IENzQSBDMiAzNTAtNDUwIG5nL21MXG5cbkNvbnZlcnNpb24gZWxpZ2liaWxpdHkgKENOSSAtPiBtVE9SKTpcbiAgZUdGUiA+NDAgbUwvbWluIHwgUHJvdGVpbnVyaWEgPDgwMCBtZy9kXG4gIE5vIHJlamVjdGlvbiBpbiBwYXN0IDMgbW9udGhzXG4gIFdvdW5kcyBmdWxseSBoZWFsZWQgfCBEeXNsaXBpZGFlbWlhIGNvbnRyb2xsZWQiLAogICAgICAgIG5vdGU6IkV2ZXJvbGltdXMgdDEvMiB+MjgtMzVoIChzaG9ydGVyIHRoYW4gc2lyb2xpbXVzKS4gRG9lcyBub3QgcG90ZW50aWF0ZSBDTkkgbmVwaHJvdG94aWNpdHkgdG8gdGhlIHNhbWUgZGVncmVlIGFzIHNpcm9saW11cyB3aGVuIGNvbWJpbmVkIGF0IGFwcHJvcHJpYXRlIGxldmVscy4gVFJBTlNGT1JNIHN0dWR5OiBFVlIgMy04IG5nL21MICsgcmVkdWNlZCBUQUMgKDUtOCBuZy9tTCBzdGFuZGFyZCkgbm9uLWluZmVyaW9yIHRvIHN0YW5kYXJkIFRBQyArIE1NRi4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6ImV2cl9jMCIsbGFiZWw6IkV2ZXJvbGltdXMgQzAgKFRyb3VnaCkiLHVuaXQ6Im5nL21MIix0eXBlOiJudW1iZXIiLHBoOiI1LjUifSwKICAgICAgICAgIHtpZDoiZWdmcl9jb252IixsYWJlbDoiZUdGUiAoZm9yIGNvbnZlcnNpb24gZWxpZ2liaWxpdHkpIix1bml0OiJtTC9taW4vMS43M21eMiIsdHlwZToibnVtYmVyIixwaDoiNDgifSwKICAgICAgICAgIHtpZDoicHJvdGVpbnVyaWEiLGxhYmVsOiJQcm90ZWludXJpYSIsdW5pdDoibWcvZGF5Iix0eXBlOiJudW1iZXIiLHBoOiIyMDAifSwKICAgICAgICAgIHtpZDoicmVjZW50X3JlaiIsbGFiZWw6IlJlamVjdGlvbiBpbiBwYXN0IDMgbW9udGhzIix0eXBlOiJjaGVja2JveCJ9LAogICAgICAgICAge2lkOiJ3b3VuZHNfaGVhbGVkIixsYWJlbDoiU3VyZ2ljYWwgd291bmRzIGZ1bGx5IGhlYWxlZCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBjMD0rdi5ldnJfYzA7CiAgICAgICAgICBpZighYzApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3Qgc3RhdHVzPWMwPDM/IlNVQi1USEVSQVBFVVRJQyI6YzA+OD8iU1VQUkEtVEhFUkFQRVVUSUMiOiJXSVRISU4gVEFSR0VUIjsKICAgICAgICAgIGNvbnN0IGVsaWdpYmxlPSt2LmVnZnJfY29udj49NDAmJit2LnByb3RlaW51cmlhPDgwMCYmIXYucmVjZW50X3JlaiYmdi53b3VuZHNfaGVhbGVkOwogICAgICAgICAgcmV0dXJuIHt2YWw6c3RhdHVzLHVuaXQ6YEMwOiAke2MwfSBuZy9tTCAodGFyZ2V0IDMtOClgLHNlYzpgQ29udmVyc2lvbiBlbGlnaWJpbGl0eTogJHtlbGlnaWJsZT8iRUxJR0lCTEUiOiJOT1QgRUxJR0lCTEUifWB9OwogICAgICAgIH0sCiAgICAgICAgaW50ZXJwcmV0KHIsdil7CiAgICAgICAgICBjb25zdCBjMD0rdi5ldnJfYzA7CiAgICAgICAgICBjb25zdCBlbGlnaWJsZT0rdi5lZ2ZyX2NvbnY+PTQwJiYrdi5wcm90ZWludXJpYTw4MDAmJiF2LnJlY2VudF9yZWomJnYud291bmRzX2hlYWxlZDsKICAgICAgICAgIGxldCBtc2c9YzA+OD9gRXZlcm9saW11cyAke2MwfSAgLS0gIGFib3ZlIHRhcmdldC4gQ2hlY2sgbGlwaWRzLCBGQkMsIHByb3RlaW51cmlhLiBSZWR1Y2UgZG9zZS5gOmMwPDM/YEV2ZXJvbGltdXMgJHtjMH0gIC0tICBiZWxvdyB0YXJnZXQuIEluY3JlYXNlIGRvc2UuYDpgRXZlcm9saW11cyAke2MwfSAgLS0gIHdpdGhpbiB0YXJnZXQuYDsKICAgICAgICAgIGlmKCFlbGlnaWJsZSl7CiAgICAgICAgICAgIGNvbnN0IHJlYXNvbnM9W107CiAgICAgICAgICAgIGlmKCt2LmVnZnJfY29udjw0MCkgcmVhc29ucy5wdXNoKCJlR0ZSIDw0MCIpOwogICAgICAgICAgICBpZigrdi5wcm90ZWludXJpYT49ODAwKSByZWFzb25zLnB1c2goInByb3RlaW51cmlhID49ODAwIik7CiAgICAgICAgICAgIGlmKHYucmVjZW50X3JlaikgcmVhc29ucy5wdXNoKCJyZWNlbnQgcmVqZWN0aW9uIik7CiAgICAgICAgICAgIGlmKCF2LndvdW5kc19oZWFsZWQpIHJlYXNvbnMucHVzaCgid291bmRzIG5vdCBoZWFsZWQiKTsKICAgICAgICAgICAgbXNnKz1gIENOSS0+bVRPUiBjb252ZXJzaW9uIE5PVCBlbGlnaWJsZTogJHtyZWFzb25zLmpvaW4oIiwgIil9LmA7CiAgICAgICAgICB9IGVsc2UgbXNnKz1gIENOSS0+bVRPUiBjb252ZXJzaW9uIGVsaWdpYmxlLmA7CiAgICAgICAgICByZXR1cm4ge2M6YzA+OHx8YzA8Mz8iI2VhNTgwYyI6IiMxNmEzNGEiLHQ6YCR7bXNnfSAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJ0eF9tbWZfdGRtIiwgbmFtZToiTU1GL0VDLU1QUyAgLS0gIE1QQSBURE0iLCByZWY6IkFQT01ZR1JFIFRyaWFsOyBLRElHTyAyMDA5OyBCZXJnYW4gZXQgYWwuLCBUaGVyIERydWcgTW9uaXQgMjAyMSAoSUFURE1DVCBDb25zZW5zdXMpIiwgdGFnOiJJbW11bm9zdXBwcmVzc2lvbiAgLS0gIE15Y29waGVub2xhdGUgRG9zaW5nICYgQVVDIiwKICAgICAgICBmb3JtdWxhOiJNUEEgQVVDMC0xMiB0YXJnZXQ6IDMwLTYwIG1nKmgvTFxuICA8MzAgPSB1bmRlci1leHBvc2VkIChyZWplY3Rpb24gcmlzaylcbiAgPjYwID0gb3Zlci1leHBvc2VkIChpbmZlY3Rpb24sIGxldWtvcGVuaWEsIEdJIHRveGljaXR5KVxuXG5TdGFuZGFyZCBkb3Npbmc6XG4gIE1NRjogMWcgQkQgKDJnL2RheSkgd2l0aCBUQUM7IDEuNWcgQkQgd2l0aCBDc0FcbiAgRUMtTVBTOiA3MjBtZyBCRCAoZXF1aW1vbGFyIHRvIE1NRiAxZyBCRClcblxuQzAgcG9vcmx5IGNvcnJlbGF0ZXMgd2l0aCBBVUMuIEFVQy1ndWlkZWQgZG9zaW5nIChMU1MpIHJlY29tbWVuZGVkLlxuQ3NBIHJlZHVjZXMgTVBBIGV4cG9zdXJlIChpbmhpYml0cyBlbnRlcm9oZXBhdGljIGNpcmN1bGF0aW9uKS4iLAogICAgICAgIG5vdGU6IkFVQy1ndWlkZWQgZG9zaW5nIChBUE9NWUdSRSB0cmlhbCkgcmVkdWNlZCByZWplY3Rpb24gdnMgZml4ZWQgZG9zaW5nLiBIaWdoIGludGVyLWluZGl2aWR1YWwgdmFyaWFiaWxpdHkgKD4xMC1mb2xkKS4gQVVDIGJlc3QgZXN0aW1hdGVkIGJ5IGxpbWl0ZWQgc2FtcGxpbmcgc3RyYXRlZ3kgKEMwLCBDMSwgQzIpLiBFQy1NUFMgaGFzIGxlc3MgcHJlZGljdGFibGUgYWJzb3JwdGlvbiBmb3IgVERNLiBHSSBzaWRlIGVmZmVjdHMgKGRpYXJyaG9lYSwgbmF1c2VhKSBhcmUgY29tbW9uIGFuZCBkb3NlLWxpbWl0aW5nLiBMZXVrb3BlbmlhOiBob2xkIGlmIFdCQyA8My4wLiIsCiAgICAgICAgaW5wdXRzOlsKICAgICAgICAgIHtpZDoibXBhX2F1YyIsbGFiZWw6Ik1QQSBBVUMwLTEyIChpZiBhdmFpbGFibGUpIix1bml0OiJtZypoL0wiLHR5cGU6Im51bWJlciIscGg6IjQyIn0sCiAgICAgICAgICB7aWQ6Im1tZl9kb3NlIixsYWJlbDoiQ3VycmVudCBNTUYgRG9zZSIsdW5pdDoibWcvZGF5Iix0eXBlOiJudW1iZXIiLHBoOiIyMDAwIn0sCiAgICAgICAgICB7aWQ6ImZvcm11bGF0aW9uIixsYWJlbDoiRm9ybXVsYXRpb24iLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIk1NRiAoTXljb3BoZW5vbGF0ZSBNb2ZldGlsIC8gQ2VsbENlcHQpIiwiRUMtTVBTIChFbnRlcmljLUNvYXRlZCAvIE15Zm9ydGljKSJdfSwKICAgICAgICAgIHtpZDoiY25pX3R5cGUiLGxhYmVsOiJDb25jdXJyZW50IENOSSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiVGFjcm9saW11cyIsIkN5Y2xvc3BvcmluZSIsIk5vbmUgKENOSS1mcmVlKSJdfSwKICAgICAgICAgIHtpZDoid2JjIixsYWJlbDoiV0JDIChpZiBhdmFpbGFibGUpIix1bml0OiJ4MTBeOS9MIix0eXBlOiJudW1iZXIiLHBoOiI2LjUifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBhdWM9K3YubXBhX2F1Yyxkb3NlPSt2Lm1tZl9kb3NlLHdiYz0rdi53YmM7CiAgICAgICAgICBsZXQgYXVjU3RhdHVzPWF1Yz9hdWM8MzA/IlVOREVSLUVYUE9TRUQiOmF1Yz42MD8iT1ZFUi1FWFBPU0VEIjoiV0lUSElOIFRBUkdFVCI6Im5vdCBtZWFzdXJlZCI7CiAgICAgICAgICBjb25zdCBsZXVrbz13YmMmJndiYzwzLjA/IkxFVUtPUEVOSUEgV0FSTklORyI6IiI7CiAgICAgICAgICByZXR1cm4ge3ZhbDphdWNTdGF0dXMsdW5pdDphdWM/YEFVQzogJHthdWN9IG1nKmgvTCAodGFyZ2V0IDMwLTYwKWA6YERvc2U6ICR7ZG9zZXx8Ii0ifSBtZy9kYXlgLHNlYzpgJHtsZXVrb30ke2xldWtvPyIgfCAiOiIifUZvcm11bGF0aW9uOiAke3YuZm9ybXVsYXRpb259IHwgQ05JOiAke3YuY25pX3R5cGV9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IGF1Yz0rdi5tcGFfYXVjLHdiYz0rdi53YmM7CiAgICAgICAgICBsZXQgbXNnPSIiOwogICAgICAgICAgaWYod2JjJiZ3YmM8My4wKSBtc2c9YFdCQyAke3diY30gIC0tICBMRVVLT1BFTklBLiBIb2xkIG9yIHJlZHVjZSBNTUYuIENoZWNrIHZpcmFsIHNjcmVlbiAoQ01WLCBCSykuIGA7CiAgICAgICAgICBpZihhdWMmJmF1YzwzMCkgbXNnKz1gTVBBIEFVQyAke2F1Y30gIC0tICB1bmRlci1leHBvc2VkLiBSZWplY3Rpb24gcmlzay4gQ29uc2lkZXIgZG9zZSBpbmNyZWFzZSBpZiB0b2xlcmF0ZWQuIGA7CiAgICAgICAgICBlbHNlIGlmKGF1YyYmYXVjPjYwKSBtc2crPWBNUEEgQVVDICR7YXVjfSAgLS0gIG92ZXItZXhwb3NlZC4gSW5mZWN0aW9uIGFuZCBHSSB0b3hpY2l0eSByaXNrLiBDb25zaWRlciBkb3NlIHJlZHVjdGlvbi4gYDsKICAgICAgICAgIGVsc2UgaWYoYXVjKSBtc2crPWBNUEEgQVVDICR7YXVjfSAgLS0gIHdpdGhpbiB0YXJnZXQgKDMwLTYwKS4gQ29udGludWUgY3VycmVudCBkb3NlLiBgOwogICAgICAgICAgZWxzZSBtc2crPWBBVUMgbm90IGF2YWlsYWJsZS4gQ29uc2lkZXIgbGltaXRlZCBzYW1wbGluZyBzdHJhdGVneSAoQzArQzErQzIpIGZvciBkb3NlIG9wdGltaXNhdGlvbi4gRml4ZWQgZG9zaW5nIGxlYWRzIHRvID4xMC1mb2xkIHZhcmlhYmlsaXR5IGluIGV4cG9zdXJlLiBgOwogICAgICAgICAgaWYodi5jbmlfdHlwZT09PSJDeWNsb3Nwb3JpbmUiKSBtc2crPWBOb3RlOiBDc0EgcmVkdWNlcyBNUEEgZXhwb3N1cmUgYnkgaW5oaWJpdGluZyBlbnRlcm9oZXBhdGljIGNpcmN1bGF0aW9uICAtLSAgaGlnaGVyIE1NRiBkb3NlcyBvZnRlbiByZXF1aXJlZCB3aXRoIENzQSB2cyBUQUMuIGA7CiAgICAgICAgICByZXR1cm4ge2M6d2JjJiZ3YmM8My4wPyIjZGMyNjI2IjpyLnZhbD09PSJVTkRFUi1FWFBPU0VEIj8iI2VhNTgwYyI6ci52YWw9PT0iT1ZFUi1FWFBPU0VEIj8iI2NhOGEwNCI6IiMxNmEzNGEiLHQ6YCR7bXNnfSR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6InR4X2F6YV90ZG0iLCBuYW1lOiJBemF0aGlvcHJpbmUgKyBUUE1UL05VRFQxNSBQaGFybWFjb2dlbm9taWNzIiwgcmVmOiJDUElDIEd1aWRlbGluZSAyMDI1IChSZWxsaW5nIGV0IGFsLik7IEtESUdPIDIwMDkiLCB0YWc6IkltbXVub3N1cHByZXNzaW9uICAtLSAgQXphdGhpb3ByaW5lIERvc2luZyBieSBHZW5vdHlwZSIsCiAgICAgICAgZm9ybXVsYToiQ1BJQyAyMDI1IERvc2UgUmVjb21tZW5kYXRpb25zOlxuICBUUE1UIE5vcm1hbCArIE5VRFQxNSBOb3JtYWw6IFN0YW5kYXJkIGRvc2UgKDEuNS0yLjUgbWcva2cvZGF5KVxuICBUUE1UIElNIG9yIE5VRFQxNSBJTTogU3RhcnQgYXQgMjAtNTAlIG9mIG5vcm1hbCBkb3NlXG4gIFRQTVQgUE0gb3IgTlVEVDE1IFBNOiBBdm9pZCB0aGlvcHVyaW5lcyBvciB1c2UgMTAlIGRvc2Ugd2l0aCBjbG9zZSBGQkMgbW9uaXRvcmluZ1xuICBDb21wb3VuZCBJTSAoVFBNVCBJTSArIE5VRFQxNSBJTSk6IDIwLTUwJSBkb3NlICgyMDI1IHVwZGF0ZTogZ3JlYXRlciByZWR1Y3Rpb24gcmVjb21tZW5kZWQpXG5cblRoZXJhcGV1dGljIG1ldGFib2xpdGUgbW9uaXRvcmluZzpcbiAgNi1UR04gdGFyZ2V0OiAyMzUtNDUwIHBtb2wvOHgxMF44IFJCQ1xuICA2LU1NUCA+NTcwMCA9IGhlcGF0b3RveGljaXR5IHJpc2siLAogICAgICAgIG5vdGU6IlRQTVQgZGVmaWNpZW5jeSBhZmZlY3RzIH4xMCUgb2YgQ2F1Y2FzaWFucyAoaGV0ZXJvenlnb3VzKS4gTlVEVDE1IHZhcmlhbnRzIGFyZSBtb3N0IGNvbW1vbiBpbiBFYXN0IEFzaWFuIGFuZCBIaXNwYW5pYyBwb3B1bGF0aW9ucy4gUHJlLXRyZWF0bWVudCBnZW5vdHlwaW5nIGlzIHJlY29tbWVuZGVkIGJ5IENQSUMsIERQV0csIGFuZCBGREEgbGFiZWxsaW5nLiBDb21wbGV0ZSBUUE1UIG9yIE5VRFQxNSBkZWZpY2llbmN5IChwb29yIG1ldGFib2xpc2VyKSBjYW4gY2F1c2UgbGlmZS10aHJlYXRlbmluZyBteWVsb3N1cHByZXNzaW9uIGF0IHN0YW5kYXJkIGRvc2VzLiBBemF0aGlvcHJpbmUgaXMgYSBwcm9kcnVnIGZvciBtZXJjYXB0b3B1cmluZS4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InRwbXQiLGxhYmVsOiJUUE1UIFBoZW5vdHlwZSIsdHlwZToic2VsZWN0IixvcHRpb25zOlsiTm9ybWFsIE1ldGFib2xpc2VyICgqMS8qMSkiLCJJbnRlcm1lZGlhdGUgTWV0YWJvbGlzZXIgKCoxLyozQSwgKjEvKjNDKSIsIlBvb3IgTWV0YWJvbGlzZXIgKCozQS8qM0EsICoyLyozQSkiLCJOb3QgdGVzdGVkIl19LAogICAgICAgICAge2lkOiJudWR0MTUiLGxhYmVsOiJOVURUMTUgUGhlbm90eXBlIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJOb3JtYWwgTWV0YWJvbGlzZXIgKCoxLyoxKSIsIkludGVybWVkaWF0ZSBNZXRhYm9saXNlciAoKjEvKjMpIiwiUG9vciBNZXRhYm9saXNlciAoKjMvKjMpIiwiTm90IHRlc3RlZCJdfSwKICAgICAgICAgIHtpZDoid3RfYXphIixsYWJlbDoiV2VpZ2h0Iix1bml0OiJrZyIsdHlwZToibnVtYmVyIixwaDoiNzAifSwKICAgICAgICAgIHtpZDoidGduIixsYWJlbDoiNi1UR04gbGV2ZWwgKGlmIGF2YWlsYWJsZSkiLHVuaXQ6InBtb2wvOHgxMF44IFJCQyIsdHlwZToibnVtYmVyIixwaDoiMzIwIn0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgdHBtdD12LnRwbXR8fCJOb3QgdGVzdGVkIixudWR0PXYubnVkdDE1fHwiTm90IHRlc3RlZCIsd3Q9K3Yud3RfYXphOwogICAgICAgICAgY29uc3QgdHBtdFBNPXRwbXQuaW5jbHVkZXMoIlBvb3IiKSx0cG10SU09dHBtdC5pbmNsdWRlcygiSW50ZXJtZWRpYXRlIik7CiAgICAgICAgICBjb25zdCBudWR0UE09bnVkdC5pbmNsdWRlcygiUG9vciIpLG51ZHRJTT1udWR0LmluY2x1ZGVzKCJJbnRlcm1lZGlhdGUiKTsKICAgICAgICAgIGxldCBkb3NlRnJhYz0xLjAsY2F0ZWdvcnk9IlN0YW5kYXJkIjsKICAgICAgICAgIGlmKHRwbXRQTXx8bnVkdFBNKXtkb3NlRnJhYz0wLjE7Y2F0ZWdvcnk9IkFWT0lEIG9yIDEwJSBkb3NlIjt9CiAgICAgICAgICBlbHNlIGlmKHRwbXRJTSYmbnVkdElNKXtkb3NlRnJhYz0wLjM7Y2F0ZWdvcnk9IkNvbXBvdW5kIElNICAtLSAgMjAtNTAlIGRvc2UiO30KICAgICAgICAgIGVsc2UgaWYodHBtdElNfHxudWR0SU0pe2Rvc2VGcmFjPTAuNTtjYXRlZ29yeT0iSU0gIC0tICA1MCUgZG9zZSBzdGFydCI7fQogICAgICAgICAgY29uc3Qgc3RkRG9zZT13dD9NYXRoLnJvdW5kKHd0KjIpOiItIjsKICAgICAgICAgIGNvbnN0IGFkakRvc2U9d3Q/TWF0aC5yb3VuZCh3dCoyKmRvc2VGcmFjKToiLSI7CiAgICAgICAgICByZXR1cm4ge3ZhbDpjYXRlZ29yeSx1bml0OmBTdGFuZGFyZDogJHtzdGREb3NlfSBtZy9kYXkgfCBBZGp1c3RlZDogJHthZGpEb3NlfSBtZy9kYXlgLHNlYzpgVFBNVDogJHt0cG10fSB8IE5VRFQxNTogJHtudWR0fSR7di50Z24/YCB8IDYtVEdOOiAke3YudGdufWA6IiJ9YH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocix2KXsKICAgICAgICAgIGNvbnN0IHRnbj0rdi50Z247CiAgICAgICAgICBjb25zdCB0cG10UE09di50cG10Py5pbmNsdWRlcygiUG9vciIpLG51ZHRQTT12Lm51ZHQxNT8uaW5jbHVkZXMoIlBvb3IiKTsKICAgICAgICAgIGxldCBtc2c9YCR7ci52YWx9LiBgOwogICAgICAgICAgaWYodHBtdFBNfHxudWR0UE0pIG1zZys9YEFWT0lEIHRoaW9wdXJpbmVzIGlmIHBvc3NpYmxlLiBJZiBlc3NlbnRpYWw6IHVzZSA8PTEwJSBkb3NlIHdpdGggd2Vla2x5IEZCQyBmb3IgZmlyc3QgOCB3ZWVrcywgdGhlbiBtb250aGx5LiBMaWZlLXRocmVhdGVuaW5nIG15ZWxvc3VwcHJlc3Npb24gY2FuIG9jY3VyIGF0IHN0YW5kYXJkIGRvc2VzLiBDb25zaWRlciBhbHRlcm5hdGl2ZSBpbW11bm9zdXBwcmVzc2FudCAoTU1GKS4gYDsKICAgICAgICAgIGVsc2UgaWYoci52YWwuaW5jbHVkZXMoIkNvbXBvdW5kIikpIG1zZys9YFN0YXJ0IGF0IDIwLTUwJSBvZiBzdGFuZGFyZCBkb3NlIChDUElDIDIwMjUpLiBXZWVrbHkgRkJDIGZvciA4IHdlZWtzLCB0aGVuIGZvcnRuaWdodGx5IGZvciA4IHdlZWtzLCB0aGVuIG1vbnRobHkuIGA7CiAgICAgICAgICBlbHNlIGlmKHIudmFsLmluY2x1ZGVzKCJJTSIpKSBtc2crPWBTdGFydCBhdCA1MCUgZG9zZS4gRkJDIHdlZWtseSBmb3IgNCB3ZWVrcywgdGhlbiBmb3J0bmlnaHRseSBmb3IgOCB3ZWVrcywgdGhlbiBtb250aGx5LiBUaXRyYXRlIGJhc2VkIG9uIEZCQyBhbmQgNi1UR04gaWYgYXZhaWxhYmxlLiBgOwogICAgICAgICAgZWxzZSBtc2crPWBTdGFuZGFyZCBkb3NlIGFwcHJvcHJpYXRlLiBGQkMgYXQgMiwgNCwgOCB3ZWVrcyB0aGVuIG1vbnRobHkuIGA7CiAgICAgICAgICBpZih0Z24pewogICAgICAgICAgICBpZih0Z248MjM1KSBtc2crPWA2LVRHTiAke3Rnbn0gIC0tICBzdWItdGhlcmFwZXV0aWMuIENvbnNpZGVyIGRvc2UgaW5jcmVhc2UgaWYgRkJDIGFsbG93cy4gYDsKICAgICAgICAgICAgZWxzZSBpZih0Z24+NDUwKSBtc2crPWA2LVRHTiAke3Rnbn0gIC0tICBlbGV2YXRlZC4gTXllbG90b3hpY2l0eSByaXNrLiBDb25zaWRlciBkb3NlIHJlZHVjdGlvbi4gYDsKICAgICAgICAgICAgZWxzZSBtc2crPWA2LVRHTiAke3Rnbn0gIC0tICB3aXRoaW4gdGFyZ2V0ICgyMzUtNDUwKS4gYDsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHYudHBtdD09PSJOb3QgdGVzdGVkInx8di5udWR0MTU9PT0iTm90IHRlc3RlZCIpIG1zZys9YFByZS10cmVhdG1lbnQgVFBNVC9OVURUMTUgZ2Vub3R5cGluZyBpcyByZWNvbW1lbmRlZCBieSBDUElDLCBEUFdHLCBhbmQgRkRBIGxhYmVsbGluZy4gYDsKICAgICAgICAgIHJldHVybiB7Yzp0cG10UE18fG51ZHRQTT8iI2RjMjYyNiI6ci52YWwuaW5jbHVkZXMoIklNIik/IiNjYThhMDQiOiIjMTZhMzRhIix0OmAke21zZ30ke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKCiAgICBdCiAgfSwKCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAvLyBJLiBSRU5BTCBGVU5DVElPTiAmIEhFTU9EWU5BTUlDUyAoIzEtMTApLAogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgewogICAgaWQ6InMxOCIsIGxhYmVsOiJEaWFseXNpcyAmIFZhc2N1bGFyIEFjY2VzcyIsCiAgICBjYWxjczpbCiAgICAgIHsKICAgICAgICBpZDoiY3JydF9kb3NlIiwgbmFtZToiQ1JSVCBEb3NlICYgUHJlc2NyaXB0aW9uIiwgcmVmOiJLRElHTyBBS0kgMjAxMiBTNS43OyBCZWxsb21vIGV0IGFsLiAoUkVOQUwpLCBORUpNIDIwMDk7IFZBL05JSCBBVE4gTmV0d29yaywgTkVKTSAyMDA4IiwgdGFnOiJDUlJUICAtLSAgRWZmbHVlbnQgRG9zZSBQcmVzY3JpcHRpb24iLAogICAgICAgIGZvcm11bGE6IkVmZmx1ZW50IGRvc2UgPSAoRGlhbHlzYXRlIGZsb3cgKyBSZXBsYWNlbWVudCBmbG93ICsgVUYpIC8gV2VpZ2h0XG5LRElHTyByZWNvbW1lbmRzOiAyMC0yNSBtTC9rZy9oIGRlbGl2ZXJlZCBlZmZsdWVudCBkb3NlXG4gIFByZXNjcmliZSAyNS0zMCBtTC9rZy9oIHRvIERFTElWRVIgMjAtMjUgKGFjY291bnRpbmcgZm9yIGRvd250aW1lKVxuXG5Nb2RhbGl0aWVzOlxuICBDVlZIOiBSZXBsYWNlbWVudCBmbHVpZCAocHJlL3Bvc3QtZGlsdXRpb24pXG4gIENWVkhEOiBEaWFseXNhdGUtYmFzZWQgKGRpZmZ1c2lvbilcbiAgQ1ZWSERGOiBDb21iaW5hdGlvbiAobW9zdCBjb21tb24pIiwKICAgICAgICBub3RlOiJBVE4gdHJpYWwgKE5FSk0gMjAwOCkgYW5kIFJFTkFMIHRyaWFsIChORUpNIDIwMDkpIHNob3dlZCBubyBiZW5lZml0IHRvIGhpZ2hlciBpbnRlbnNpdHkgKDM1LTQwIG1ML2tnL2gpIHZzIHN0YW5kYXJkICgyMC0yNSBtTC9rZy9oKS4gUHJlc2NyaWJlIDI1LTMwIHRvIGRlbGl2ZXIgMjAtMjUgYWZ0ZXIgZG93bnRpbWUuIFByZS1kaWx1dGlvbiByZWR1Y2VzIGZpbHRlciBjbG90dGluZyBidXQgZGlsdXRlcyBlZmZpY2llbmN5ICh+MTUlKS4gQ2l0cmF0ZSBhbnRpY29hZ3VsYXRpb24gcHJlZmVycmVkIG92ZXIgaGVwYXJpbiBpbiBtb3N0IHBhdGllbnRzLiBEcnVnIGRvc2luZzogbWFueSBkcnVncyByZW1vdmVkIGJ5IENSUlQgIC0tICBwaGFybWFjaXN0IHJldmlldyBlc3NlbnRpYWwuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJ3dCIsbGFiZWw6IlBhdGllbnQgV2VpZ2h0Iix1bml0OiJrZyIsdHlwZToibnVtYmVyIixwaDoiODAifSwKICAgICAgICAgIHtpZDoiZGlhbHlzYXRlIixsYWJlbDoiRGlhbHlzYXRlIEZsb3cgUmF0ZSIsdW5pdDoibUwvaCIsdHlwZToibnVtYmVyIixwaDoiMTAwMCJ9LAogICAgICAgICAge2lkOiJyZXBsYWNlbWVudCIsbGFiZWw6IlJlcGxhY2VtZW50IEZsdWlkIFJhdGUiLHVuaXQ6Im1ML2giLHR5cGU6Im51bWJlciIscGg6IjEwMDAifSwKICAgICAgICAgIHtpZDoidWYiLGxhYmVsOiJOZXQgVWx0cmFmaWx0cmF0aW9uIFJhdGUiLHVuaXQ6Im1ML2giLHR5cGU6Im51bWJlciIscGg6IjEwMCJ9LAogICAgICAgICAge2lkOiJtb2RhbGl0eSIsbGFiZWw6Ik1vZGFsaXR5Iix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJDVlZIIChoYWVtb2ZpbHRyYXRpb24pIiwiQ1ZWSEQgKGhhZW1vZGlhbHlzaXMpIiwiQ1ZWSERGIChoYWVtb2RpYWZpbHRyYXRpb24pIl19LAogICAgICAgICAge2lkOiJkaWx1dGlvbiIsbGFiZWw6IlByZS9Qb3N0LURpbHV0aW9uIChmb3IgQ1ZWSC9DVlZIREYpIix0eXBlOiJzZWxlY3QiLG9wdGlvbnM6WyJQb3N0LWRpbHV0aW9uIiwiUHJlLWRpbHV0aW9uIChyZWR1Y2UgZWZmaWNpZW5jeSB+MTUlKSIsIk1peGVkICgzMyUgcHJlIC8gNjclIHBvc3QpIl19LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHd0PSt2Lnd0LGQ9K3YuZGlhbHlzYXRlLHI9K3YucmVwbGFjZW1lbnQsdT0rdi51ZjsKICAgICAgICAgIGlmKCF3dHx8d3Q8PTApIHJldHVybiBudWxsOwogICAgICAgICAgY29uc3QgdG90YWw9ZCtyK3U7CiAgICAgICAgICBjb25zdCBkb3NlPXRvdGFsL3d0OwogICAgICAgICAgY29uc3QgcHJlRGlsQ29ycmVjdGlvbj12LmRpbHV0aW9uPy5pbmNsdWRlcygiUHJlIik/MC44NTp2LmRpbHV0aW9uPy5pbmNsdWRlcygiTWl4ZWQiKT8wLjk1OjEuMDsKICAgICAgICAgIGNvbnN0IGVmZmVjdGl2ZURvc2U9ZG9zZSpwcmVEaWxDb3JyZWN0aW9uOwogICAgICAgICAgcmV0dXJuIHt2YWw6ZWZmZWN0aXZlRG9zZS50b0ZpeGVkKDEpLHVuaXQ6Im1ML2tnL2ggKGVmZmVjdGl2ZSkiLHNlYzpgUHJlc2NyaWJlZDogJHtkb3NlLnRvRml4ZWQoMSl9IG1ML2tnL2ggfCBUb3RhbCBlZmZsdWVudDogJHt0b3RhbH0gbUwvaCB8IFByZS1kaWx1dGlvbiBmYWN0b3I6ICR7cHJlRGlsQ29ycmVjdGlvbn1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZG9zZT0rci52YWw7CiAgICAgICAgICBpZihkb3NlPDIwKSByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YEVmZmVjdGl2ZSBkb3NlICR7ci52YWx9IG1ML2tnL2ggIC0tICBCRUxPVyBLRElHTyB0YXJnZXQgKDIwLTI1KS4gSW5jcmVhc2UgZmxvdyByYXRlcy4gSW5hZGVxdWF0ZSBzb2x1dGUgY2xlYXJhbmNlIGxpa2VseS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKGRvc2U8PTI1KSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEVmZmVjdGl2ZSBkb3NlICR7ci52YWx9IG1ML2tnL2ggIC0tICB3aXRoaW4gS0RJR08gdGFyZ2V0ICgyMC0yNSkuIFRoaXMgaXMgdGhlIGV2aWRlbmNlLWJhc2VkIHN0YW5kYXJkIGRvc2UuIEhpZ2hlciBkb3NlcyBoYXZlIG5vdCBzaG93biBiZW5lZml0IChBVE4vUkVOQUwgdHJpYWxzKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKGRvc2U8PTMwKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEVmZmVjdGl2ZSBkb3NlICR7ci52YWx9IG1ML2tnL2ggIC0tICBhcHByb3ByaWF0ZSBwcmVzY3JpYmluZyBtYXJnaW4gdG8gZGVsaXZlciAyMC0yNSBhZnRlciBkb3dudGltZS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIHJldHVybiB7YzoiI2NhOGEwNCIsdDpgRWZmZWN0aXZlIGRvc2UgJHtyLnZhbH0gbUwva2cvaCAgLS0gIGFib3ZlIDMwLiBObyBtb3J0YWxpdHkgYmVuZWZpdCBmcm9tIGhpZ2hlci1pbnRlbnNpdHkgQ1JSVC4gQ29uc2lkZXIgcmVkdWNpbmcgdG8gYXZvaWQgZWxlY3Ryb2x5dGUgbG9zc2VzIChwaG9zcGhhdGUsIGFtaW5vIGFjaWRzKSBhbmQgZHJ1ZyBjbGVhcmFuY2UgaXNzdWVzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJwaXJydCIsIG5hbWU6IlBJUlJUIC8gU0xFRCBQcmVzY3JpcHRpb24iLCByZWY6Ik1hcnNoYWxsIGV0IGFsLiwgQUpLRCAyMDExOyBFZHJlZXMgZXQgYWwuLCBDbGluIEogQW0gU29jIE5lcGhyb2wgMjAxNiIsIHRhZzoiUHJvbG9uZ2VkIEludGVybWl0dGVudCBSUlQgKFNMRUQpIiwKICAgICAgICBmb3JtdWxhOiJQSVJSVCAoU0xFRCk6IDYtMTIgaG91cnMsIGJsb29kIGZsb3cgMTUwLTI1MCBtTC9taW4sIGRpYWx5c2F0ZSAxMDAtMzAwIG1ML21pblxuS3QvViB0YXJnZXQ6ID49MS4yIHBlciBzZXNzaW9uIChvciA+PTMuOS93ZWVrIGZvciBhbHRlcm5hdGUtZGF5KVxuXG5BZHZhbnRhZ2VzIG92ZXIgQ1JSVDpcbiAgLSBMZXNzIGFudGljb2FndWxhdGlvbiByZXF1aXJlbWVudFxuICAtIEFsbG93cyBpbnRlcnJ1cHRpb24tZnJlZSBkaWFnbm9zdGljcy9wcm9jZWR1cmVzXG4gIC0gQ29tcGFyYWJsZSBvdXRjb21lcyB0byBDUlJUIGluIElDVS1BS0kiLAogICAgICAgIG5vdGU6IkdVSURFTElORS1CQVNFRCBUT09MICAtLSAgVGhpcyBjYWxjdWxhdG9yIGFwcGxpZXMgcHVibGlzaGVkIGNsaW5pY2FsIHRocmVzaG9sZHMgYnV0IGlzIG5vdCBpdHNlbGYgYSB2YWxpZGF0ZWQgY29tcG9zaXRlIHNjb3JpbmcgaW5zdHJ1bWVudC4gSW50ZXJwcmV0IHdpdGhpbiBjbGluaWNhbCBjb250ZXh0LlxuXG5QSVJSVC9TTEVEIGJyaWRnZXMgQ1JSVCBhbmQgY29udmVudGlvbmFsIElIRC4gSGFlbW9keW5hbWljYWxseSBiZXR0ZXIgdG9sZXJhdGVkIHRoYW4gSUhEIGR1ZSB0byBzbG93ZXIgc29sdXRlIGFuZCBmbHVpZCByZW1vdmFsLiBFcXVpdmFsZW50IG91dGNvbWVzIHRvIENSUlQgaW4gaGFlbW9keW5hbWljYWxseSB1bnN0YWJsZSBwYXRpZW50cyAobXVsdGlwbGUgUkNUcykuIFR5cGljYWwgcHJlc2NyaXB0aW9uOiBRYiAxNTAtMjUwLCBRZCAxMDAtMzAwLCBzZXNzaW9uIDYtMTJoLCBkYWlseSBvciBhbHRlcm5hdGUtZGF5LiBEcnVnIGRvc2luZyBzaW1pbGFyIHRvIENSUlQgZHVyaW5nIHRyZWF0bWVudCwgSUhEIGJldHdlZW4gc2Vzc2lvbnMuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJxYiIsbGFiZWw6IkJsb29kIEZsb3cgUmF0ZSAoUWIpIix1bml0OiJtTC9taW4iLHR5cGU6Im51bWJlciIscGg6IjIwMCJ9LAogICAgICAgICAge2lkOiJxZCIsbGFiZWw6IkRpYWx5c2F0ZSBGbG93IFJhdGUgKFFkKSIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiIyMDAifSwKICAgICAgICAgIHtpZDoiZHVyYXRpb24iLGxhYmVsOiJTZXNzaW9uIER1cmF0aW9uIix1bml0OiJob3VycyIsdHlwZToibnVtYmVyIixwaDoiOCJ9LAogICAgICAgICAge2lkOiJmcmVxdWVuY3kiLGxhYmVsOiJGcmVxdWVuY3kiLHR5cGU6InNlbGVjdCIsb3B0aW9uczpbIkRhaWx5IiwiQWx0ZXJuYXRlIGRheSIsIlRocmVlIHRpbWVzL3dlZWsiXX0sCiAgICAgICAgICB7aWQ6InVmX3RhcmdldCIsbGFiZWw6IlVGIFRhcmdldCBwZXIgc2Vzc2lvbiIsdW5pdDoibUwiLHR5cGU6Im51bWJlciIscGg6IjIwMDAifSwKICAgICAgICAgIHtpZDoid3RfcGlycnQiLGxhYmVsOiJQYXRpZW50IFdlaWdodCIsdW5pdDoia2ciLHR5cGU6Im51bWJlciIscGg6Ijc1In0sCiAgICAgICAgXSwKICAgICAgICBjb21wdXRlKHYpewogICAgICAgICAgY29uc3QgcWI9K3YucWIscWQ9K3YucWQsZHVyPSt2LmR1cmF0aW9uLHVmPSt2LnVmX3RhcmdldCx3dD0rdi53dF9waXJydDsKICAgICAgICAgIGlmKCFxYnx8IXFkfHwhZHVyKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHVmUmF0ZT11ZiYmZHVyPyh1Zi8oZHVyKjYwKSkudG9GaXhlZCgxKToiTi9BIjsKICAgICAgICAgIHJldHVybiB7dmFsOmBRYiAke3FifSAvIFFkICR7cWR9IC8gJHtkdXJ9aGAsdW5pdDp2LmZyZXF1ZW5jeSxzZWM6YFVGIHJhdGU6ICR7dWZSYXRlfSBtTC9taW4gfCBVRiB0YXJnZXQ6ICR7dWZ8fCItIn0gbUwgfCBXZWlnaHQ6ICR7d3R8fCItIn0ga2dgfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgcWI9K3YucWIscWQ9K3YucWQsZHVyPSt2LmR1cmF0aW9uLHVmPSt2LnVmX3RhcmdldCx3dD0rdi53dF9waXJydDsKICAgICAgICAgIGNvbnN0IHVmUmF0ZT11ZiYmZHVyPyh1Zi8oZHVyKjYwKSk6MDsKICAgICAgICAgIGxldCBtc2c9YFBJUlJUL1NMRUQgcHJlc2NyaXB0aW9uOiBRYiAke3FifSwgUWQgJHtxZH0sICR7ZHVyfWggc2Vzc2lvbnMsICR7di5mcmVxdWVuY3l9LiBgOwogICAgICAgICAgaWYodWZSYXRlPjEzKSBtc2crPWBVRiByYXRlICR7dWZSYXRlLnRvRml4ZWQoMSl9IG1ML21pbi9rZyAgLS0gIEhJR0guIENvbnNpZGVyIGV4dGVuZGluZyBzZXNzaW9uIG9yIHJlZHVjaW5nIHRhcmdldCB0byBpbXByb3ZlIGhhZW1vZHluYW1pYyB0b2xlcmFuY2UuIGA7CiAgICAgICAgICBpZihxYjwxNTApIG1zZys9YFFiIDwxNTAgbUwvbWluICAtLSAgbWF5IGxpbWl0IGNsZWFyYW5jZS4gYDsKICAgICAgICAgIGlmKGR1cjw2KSBtc2crPWBEdXJhdGlvbiA8NmggYXBwcm9hY2hlcyBjb252ZW50aW9uYWwgSUhEIHRlcnJpdG9yeSAgLS0gIGNvbnNpZGVyIGV4dGVuZGluZyBmb3IgYmV0dGVyIGhhZW1vZHluYW1pYyBzdGFiaWxpdHkuIGA7CiAgICAgICAgICBtc2crPWBQaGFybWFjaXN0IHJldmlldyBmb3IgZHJ1ZyBkb3NpbmcgYWRqdXN0bWVudHMgZHVyaW5nIFBJUlJUIHNlc3Npb25zLiBgOwogICAgICAgICAgcmV0dXJuIHtjOiIjMjU2M2ViIix0OmAke21zZ30ke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJpaGRfa3R2IiwgbmFtZToiSUhEIEFkZXF1YWN5IChLdC9WKSIsIHJlZjoiS0RPUUkgSEQgQWRlcXVhY3kgMjAxNTsgRGF1Z2lyZGFzIEpULCBKQVNOIDE5OTMiLCB0YWc6IkludGVybWl0dGVudCBIRCAgLS0gIERlbGl2ZXJlZCBEb3NlIiwKICAgICAgICBmb3JtdWxhOiJTaW5nbGUtcG9vbCBLdC9WIChEYXVnaXJkYXMgMm5kIGdlbik6XG5zcEt0L1YgPSAtbG4oUiAtIDAuMDA4dCkgKyAoNCAtIDMuNVIpIHggVUYvV1xud2hlcmUgUiA9IHBvc3QtQlVOL3ByZS1CVU4sIHQgPSBzZXNzaW9uIHRpbWUgKGgpLCBVRiA9IHVsdHJhZmlsdHJhdGlvbiAoTCksIFcgPSBwb3N0LXdlaWdodCAoa2cpXG5cblRhcmdldHMgKEtET1FJIDIwMTUpOlxuICBNaW5pbXVtOiBzcEt0L1YgPj0xLjIgcGVyIHNlc3Npb24gKDN4L3dlZWspXG4gIFRhcmdldDogc3BLdC9WIDEuNCAodG8gZW5zdXJlIGRlbGl2ZXJ5ID49MS4yKVxuICBVUlIgdGFyZ2V0OiA+PTY1JSIsCiAgICAgICAgbm90ZToiRGF1Z2lyZGFzIDJuZCBnZW5lcmF0aW9uIGZvcm11bGEgYWNjb3VudHMgZm9yIHVsdHJhZmlsdHJhdGlvbiBhbmQgdXJlYSBnZW5lcmF0aW9uLiBSZXNpZHVhbCBraWRuZXkgZnVuY3Rpb24gKEtyKSBjb250cmlidXRlcyB0byB0b3RhbCBLdC9WIGluIGluY2lkZW50IHBhdGllbnRzLiBLRE9RSSByZWNvbW1lbmRzIG1pbmltdW0gc3BLdC9WIDEuMiBmb3IgM3gvd2VlayBzY2hlZHVsZXMuIEZvciAyeC93ZWVrICh3aXRoIHNpZ25pZmljYW50IHJlc2lkdWFsIGZ1bmN0aW9uKTogdGFyZ2V0IHN0ZEt0L1YgPj0yLjMvd2Vlay4iLAogICAgICAgIGlucHV0czpbCiAgICAgICAgICB7aWQ6InByZV9idW4iLGxhYmVsOiJQcmUtRGlhbHlzaXMgQlVOIix1bml0OiJtZy9kTCIsdHlwZToibnVtYmVyIixwaDoiNjUifSwKICAgICAgICAgIHtpZDoicG9zdF9idW4iLGxhYmVsOiJQb3N0LURpYWx5c2lzIEJVTiIsdW5pdDoibWcvZEwiLHR5cGU6Im51bWJlciIscGg6IjIyIn0sCiAgICAgICAgICB7aWQ6InRfc2Vzc2lvbiIsbGFiZWw6IlNlc3Npb24gRHVyYXRpb24iLHVuaXQ6ImhvdXJzIix0eXBlOiJudW1iZXIiLHBoOiI0In0sCiAgICAgICAgICB7aWQ6InVmX3ZvbCIsbGFiZWw6IlVsdHJhZmlsdHJhdGlvbiBWb2x1bWUiLHVuaXQ6IkwiLHR5cGU6Im51bWJlciIscGg6IjIuNSJ9LAogICAgICAgICAge2lkOiJwb3N0X3d0IixsYWJlbDoiUG9zdC1EaWFseXNpcyBXZWlnaHQiLHVuaXQ6ImtnIix0eXBlOiJudW1iZXIiLHBoOiI3MCJ9LAogICAgICAgIF0sCiAgICAgICAgY29tcHV0ZSh2KXsKICAgICAgICAgIGNvbnN0IHByZT0rdi5wcmVfYnVuLHBvc3Q9K3YucG9zdF9idW4sdD0rdi50X3Nlc3Npb24sdWY9K3YudWZfdm9sLHc9K3YucG9zdF93dDsKICAgICAgICAgIGlmKCFwcmV8fCFwb3N0fHwhdHx8IXd8fHByZTw9MHx8cG9zdDw9MHx8cG9zdD49cHJlKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IFI9cG9zdC9wcmU7CiAgICAgICAgICBjb25zdCBrdHY9LU1hdGgubG9nKFItMC4wMDgqdCkrKDQtMy41KlIpKih1Zi93KTsKICAgICAgICAgIGNvbnN0IHVycj0oMS1SKSoxMDA7CiAgICAgICAgICByZXR1cm4ge3ZhbDprdHYudG9GaXhlZCgyKSx1bml0OiJzcEt0L1YiLHNlYzpgVVJSOiAke3Vyci50b0ZpeGVkKDEpfSUgfCBSOiAke1IudG9GaXhlZCgzKX0gfCBVRjogJHt1Zn1MYH07CiAgICAgICAgfSwKICAgICAgICBpbnRlcnByZXQocil7CiAgICAgICAgICBjb25zdCBrdHY9K3IudmFsOwogICAgICAgICAgaWYoa3R2Pj0xLjQpIHJldHVybiB7YzoiIzE2YTM0YSIsdDpgc3BLdC9WICR7ci52YWx9ICAtLSAgQWRlcXVhdGUgKHRhcmdldCA+PTEuNCB0byByZWxpYWJseSBkZWxpdmVyID49MS4yKS4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKGt0dj49MS4yKSByZXR1cm4ge2M6IiNjYThhMDQiLHQ6YHNwS3QvViAke3IudmFsfSAgLS0gIE1lZXRzIG1pbmltdW0gKD49MS4yKSBidXQgYmVsb3cgMS40IHRhcmdldC4gQ29uc2lkZXIgaW5jcmVhc2luZyBRYiwgc2Vzc2lvbiB0aW1lLCBvciBkaWFseXNlciBzdXJmYWNlIGFyZWEuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YHNwS3QvViAke3IudmFsfSAgLS0gIElOQURFUVVBVEUgKDwxLjIpLiBJbmNyZWFzZSBzZXNzaW9uIHRpbWUsIGJsb29kIGZsb3csIG9yIGRpYWx5c2VyIGVmZmljaWVuY3kuIENoZWNrIGFjY2VzcyByZWNpcmN1bGF0aW9uLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiJhdmZfbWF0dXJhdGlvbiIsIG5hbWU6IkFWIEZpc3R1bGEgTWF0dXJhdGlvbiBBc3Nlc3NtZW50IiwgcmVmOiJLRE9RSSBWYXNjdWxhciBBY2Nlc3MgMjAxOSAoVXBkYXRlKTsgTktGLUtET1FJIDIwMDYgUnVsZSBvZiA2cyIsIHRhZzoiVmFzY3VsYXIgQWNjZXNzICAtLSAgQVZGIE1hdHVyYXRpb24iLAogICAgICAgIGZvcm11bGE6IlJ1bGUgb2YgNnMgKE5LRi1LRE9RSSkgIC0tICBBVkYgbWF0dXJhdGlvbiBjcml0ZXJpYTpcbiAgKiBGbG93ID49NjAwIG1ML21pblxuICAqIERpYW1ldGVyID49NiBtbSAodmVpbilcbiAgKiBEZXB0aCA8PTYgbW0gZnJvbSBza2luIHN1cmZhY2VcbiAgKiBBc3Nlc3NlZCA+PTYgd2Vla3MgcG9zdC1jcmVhdGlvblxuICAqIFN0cmFpZ2h0IHNlZ21lbnQgPj02IGNtIGZvciBjYW5udWxhdGlvblxuXG5DcmVhdGUgQVZGIHdoZW4gZUdGUiA8MTUtMjAgT1IgZGlhbHlzaXMgZXhwZWN0ZWQgd2l0aGluIDYtMTIgbW9udGhzXG5BVkYgcHJlZmVycmVkIG92ZXIgQVZHIHByZWZlcnJlZCBvdmVyIENWQyAoRmlzdHVsYSBGaXJzdCBpbml0aWF0aXZlKSIsCiAgICAgICAgbm90ZToiR1VJREVMSU5FLUJBU0VEIFRPT0wgIC0tICBUaGlzIGNhbGN1bGF0b3IgYXBwbGllcyBwdWJsaXNoZWQgY2xpbmljYWwgdGhyZXNob2xkcyBidXQgaXMgbm90IGl0c2VsZiBhIHZhbGlkYXRlZCBjb21wb3NpdGUgc2NvcmluZyBpbnN0cnVtZW50LiBJbnRlcnByZXQgd2l0aGluIGNsaW5pY2FsIGNvbnRleHQuXG5cbktET1FJIDIwMTkgdXBkYXRlIHJlY29tbWVuZHMgcmVmZXJyYWwgZm9yIGFjY2VzcyBhdCBlR0ZSIDwyMCBvciBleHBlY3RlZCBkaWFseXNpcyB3aXRoaW4gMTIgbW9udGhzLiBBVkYgaGFzIGxvd2VzdCBpbmZlY3Rpb24gYW5kIHRocm9tYm9zaXMgcmF0ZXMuIE1hdHVyYXRpb24gZmFpbHVyZSByYXRlOiAyOC01MyUgKERlbWJlciBldCBhbC4sIE5FSk0gMjAwOCkuIENvbnNpZGVyIER1cGxleCBVUyBtYXBwaW5nIHByZS1vcGVyYXRpdmVseS4gUmFkaW9jZXBoYWxpYyBwcmVmZXJyZWQgLT4gYnJhY2hpb2NlcGhhbGljIC0+IGJyYWNoaW9iYXNpbGljIHRyYW5zcG9zaXRpb24gLT4gQVZHLiBBdm9pZCBpcHNpbGF0ZXJhbCBzdWJjbGF2aWFuIENWQyBpZiBmaXN0dWxhIHBsYW5uZWQuIiwKICAgICAgICBpbnB1dHM6WwogICAgICAgICAge2lkOiJmbG93IixsYWJlbDoiQWNjZXNzIEZsb3cgKFFhKSIsdW5pdDoibUwvbWluIix0eXBlOiJudW1iZXIiLHBoOiI3NTAifSwKICAgICAgICAgIHtpZDoiZGlhbWV0ZXIiLGxhYmVsOiJWZWluIERpYW1ldGVyIChvbiBVUykiLHVuaXQ6Im1tIix0eXBlOiJudW1iZXIiLHBoOiI1LjUifSwKICAgICAgICAgIHtpZDoiZGVwdGgiLGxhYmVsOiJEZXB0aCBmcm9tIFNraW4gU3VyZmFjZSIsdW5pdDoibW0iLHR5cGU6Im51bWJlciIscGg6IjQifSwKICAgICAgICAgIHtpZDoid2Vla3MiLGxhYmVsOiJXZWVrcyBTaW5jZSBDcmVhdGlvbiIsdW5pdDoid2Vla3MiLHR5cGU6Im51bWJlciIscGg6IjgifSwKICAgICAgICAgIHtpZDoic2VnbWVudCIsbGFiZWw6IlN0cmFpZ2h0IENhbm51bGF0aW9uIFNlZ21lbnQgTGVuZ3RoIix1bml0OiJjbSIsdHlwZToibnVtYmVyIixwaDoiNyJ9LAogICAgICAgICAge2lkOiJ0aHJpbGwiLGxhYmVsOiJQYWxwYWJsZSB0aHJpbGwgdGhyb3VnaG91dCIsdHlwZToiY2hlY2tib3gifSwKICAgICAgICBdLAogICAgICAgIGNvbXB1dGUodil7CiAgICAgICAgICBjb25zdCBmbG93PSt2LmZsb3csZGlhbT0rdi5kaWFtZXRlcixkZXB0aD0rdi5kZXB0aCx3a3M9K3Yud2Vla3Msc2VnPSt2LnNlZ21lbnQ7CiAgICAgICAgICBjb25zdCBjcml0ZXJpYT1bCiAgICAgICAgICAgIGZsb3c+PTYwMCxkaWFtPj02LGRlcHRoPD02LHdrcz49NixzZWc+PTYKICAgICAgICAgIF07CiAgICAgICAgICBjb25zdCBtZXQ9Y3JpdGVyaWEuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDsKICAgICAgICAgIHJldHVybiB7dmFsOmAke21ldH0vNWAsdW5pdDoiUnVsZSBvZiA2cyBjcml0ZXJpYSBtZXQiLHNlYzpgRmxvdzogJHtmbG93fHwiLSJ9IHwgRGlhbTogJHtkaWFtfHwiLSJ9bW0gfCBEZXB0aDogJHtkZXB0aHx8Ii0ifW1tIHwgV2tzOiAke3drc3x8Ii0ifSB8IFNlZ21lbnQ6ICR7c2VnfHwiLSJ9Y20gfCBUaHJpbGw6ICR7di50aHJpbGw/IlllcyI6Ik5vIn1gfTsKICAgICAgICB9LAogICAgICAgIGludGVycHJldChyLHYpewogICAgICAgICAgY29uc3QgZmxvdz0rdi5mbG93LGRpYW09K3YuZGlhbWV0ZXIsZGVwdGg9K3YuZGVwdGgsd2tzPSt2LndlZWtzOwogICAgICAgICAgY29uc3QgbWV0PXBhcnNlSW50KHIudmFsKXx8MDsKICAgICAgICAgIGlmKG1ldD09PTUmJnYudGhyaWxsKSByZXR1cm4ge2M6IiMxNmEzNGEiLHQ6YEFWRiBtYXR1cmUgIC0tICBhbGwgUnVsZSBvZiA2cyBjcml0ZXJpYSBtZXQgd2l0aCBwYWxwYWJsZSB0aHJpbGwuIFN1aXRhYmxlIGZvciBjYW5udWxhdGlvbi4gQmVnaW4gdHdvLW5lZWRsZSBkaWFseXNpcy4gJHtHVUlERUxJTkVfQ0xPU0lOR31gfTsKICAgICAgICAgIGlmKG1ldD49MykgcmV0dXJuIHtjOiIjY2E4YTA0Iix0OmAke3IudmFsfSBjcml0ZXJpYSBtZXQuIFBhcnRpYWxseSBtYXR1cmUuICR7IXYudGhyaWxsPyJObyB0aHJpbGwgcGFscGF0ZWQgIC0tICBjaGVjayBmb3Igc3Rlbm9zaXMvdGhyb21ib3Npcy4gIjoiIn0ke2RpYW08Nj8iVmVpbiBkaWFtZXRlciA8Nm1tICAtLSAgbWF5IGltcHJvdmUgd2l0aCBleGVyY2lzZS90aW1lLiAiOiIifSR7Zmxvdzw2MDA/IkZsb3cgPDYwMCAgLS0gIGNvbnNpZGVyIGZpc3R1bG9ncmFwaHkgaWYgcGVyc2lzdGVudC4gIjoiIn1SZXBlYXQgVVMgaW4gMi00IHdlZWtzLiAke0dVSURFTElORV9DTE9TSU5HfWB9OwogICAgICAgICAgaWYod2tzPDYpIHJldHVybiB7YzoiIzI1NjNlYiIsdDpgT25seSAke3drc30gd2Vla3Mgc2luY2UgY3JlYXRpb24uIEFsbG93ID49NiB3ZWVrcyBmb3IgbWF0dXJhdGlvbi4gRW5jb3VyYWdlIGhhbmQtZ3JpcCBleGVyY2lzZXMuIFJlcGVhdCBhc3Nlc3NtZW50IGF0IDYgd2Vla3MuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgICByZXR1cm4ge2M6IiNkYzI2MjYiLHQ6YCR7ci52YWx9IGNyaXRlcmlhIG1ldCAgLS0gIG1hdHVyYXRpb24gZmFpbHVyZSBsaWtlbHkuIENvbnNpZGVyIGZpc3R1bG9wbGFzdHkgKGJhbGxvb24gYW5naW9wbGFzdHkpLCBzdXBlcmZpY2lhbGlzYXRpb24sIG9yIHJldmlzaW9uLiBEdXBsZXggVVMgdG8gaWRlbnRpZnkgY29ycmVjdGFibGUgc3Rlbm9zaXMuIEFWRyBvciBDVkMgbWF5IGJlIG5lZWRlZCBhcyBicmlkZ2UuICR7R1VJREVMSU5FX0NMT1NJTkd9YH07CiAgICAgICAgfQogICAgICB9LAogICAgXQogIH0KXTsKCgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBNQUlOIENPTVBPTkVOVAovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpjb25zdCBhbGxDYWxjcyA9IFNFQ1RJT05TLmZsYXRNYXAocyA9PiBzLmNhbGNzLm1hcChjID0+ICh7Li4uYywgc2lkOiBzLmlkLCBzbGFiZWw6IHMubGFiZWx9KSkpOwoKZnVuY3Rpb24gQXBwKCkgewogIGNvbnN0IFthY2NlcHRlZCwgc2V0QWNjZXB0ZWRdID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtzaWQsIHNldFNpZF0gPSB1c2VTdGF0ZSgiczEiKTsKICBjb25zdCBbY2lkLCBzZXRDaWRdID0gdXNlU3RhdGUoImNrZGVwaSIpOwogIGNvbnN0IFtpbnB1dHMsIHNldElucHV0c10gPSB1c2VTdGF0ZSh7fSk7CiAgY29uc3QgW3Jlc3VsdCwgc2V0UmVzdWx0XSA9IHVzZVN0YXRlKG51bGwpOwogIGNvbnN0IFtpbnRlcnAsIHNldEludGVycF0gPSB1c2VTdGF0ZShudWxsKTsKICBjb25zdCBbc2VhcmNoLCBzZXRTZWFyY2hdID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtzaWRlYmFyT3Blbiwgc2V0U2lkZWJhck9wZW5dID0gdXNlU3RhdGUodHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiJiZ3aW5kb3cuaW5uZXJXaWR0aD43NjgpOwogIGNvbnN0IGlzTW9iaWxlID0gdHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiJiZ3aW5kb3cuaW5uZXJXaWR0aDw9NzY4OwoKICBjb25zdCBjYWxjID0gYWxsQ2FsY3MuZmluZChjID0+IGMuaWQgPT09IGNpZCk7CiAgY29uc3Qgc2VjID0gU0VDVElPTlMuZmluZChzID0+IHMuaWQgPT09IHNpZCk7CiAgY29uc3QgZm91bmQgPSBzZWFyY2gudHJpbSgpID8gYWxsQ2FsY3MuZmlsdGVyKGMgPT4KICAgIGMubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaC50b0xvd2VyQ2FzZSgpKSB8fAogICAgKGMudGFnfHwiIikudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gudG9Mb3dlckNhc2UoKSkgfHwKICAgIChjLnJlZnx8IiIpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoLnRvTG93ZXJDYXNlKCkpCiAgKSA6IG51bGw7CgogIGZ1bmN0aW9uIHBpY2soYykgewogICAgc2V0Q2lkKGMuaWQpOyBzZXRTaWQoYy5zaWQpOwogICAgc2V0SW5wdXRzKHt9KTsgc2V0UmVzdWx0KG51bGwpOyBzZXRJbnRlcnAobnVsbCk7IHNldFNlYXJjaCgiIik7CiAgICBpZihpc01vYmlsZSkgc2V0U2lkZWJhck9wZW4oZmFsc2UpOwogIH0KICBmdW5jdGlvbiBpbnAoaWQsIHZhbCkgeyBzZXRJbnB1dHMocCA9PiAoey4uLnAsIFtpZF06IHZhbH0pKTsgc2V0UmVzdWx0KG51bGwpOyBzZXRJbnRlcnAobnVsbCk7IH0KICBmdW5jdGlvbiBnbygpIHsKICAgIGlmICghY2FsYykgcmV0dXJuOwogICAgY29uc3QgZmkgPSB7Li4uaW5wdXRzfTsKICAgIGNhbGMuaW5wdXRzLmZvckVhY2goaSA9PiB7CiAgICAgIGlmIChpLnR5cGUgPT09ICJzZWxlY3QiICYmIChmaVtpLmlkXSA9PT0gdW5kZWZpbmVkIHx8IGZpW2kuaWRdID09PSBudWxsIHx8IGZpW2kuaWRdID09PSAiIikpCiAgICAgICAgZmlbaS5pZF0gPSBpLm9wdGlvbnNbMF07CiAgICAgIGlmIChpLnR5cGUgPT09ICJjaGVja2JveCIgJiYgZmlbaS5pZF0gPT09IHVuZGVmaW5lZCkKICAgICAgICBmaVtpLmlkXSA9IGZhbHNlOwogICAgfSk7CiAgICBsZXQgcjsKICAgIHRyeSB7IHIgPSBjYWxjLmNvbXB1dGUoZmkpOyB9IGNhdGNoKGUpIHsgciA9IG51bGw7IH0KICAgIGlmIChyID09PSBudWxsIHx8IHIgPT09IHVuZGVmaW5lZCkgewogICAgICBzZXRSZXN1bHQobnVsbCk7CiAgICAgIGNvbnN0IG1pc3NpbmcgPSBjYWxjLmlucHV0cwogICAgICAgIC5maWx0ZXIoaSA9PiBpLnR5cGUgPT09ICJudW1iZXIiICYmICghZmlbaS5pZF0gfHwgZmlbaS5pZF0gPT09ICIiKSkKICAgICAgICAubWFwKGkgPT4gaS5sYWJlbC5zcGxpdCgiIC0tICIpWzBdLnNwbGl0KCIoIilbMF0udHJpbSgpKTsKICAgICAgY29uc3QgbXNnID0gbWlzc2luZy5sZW5ndGggPiAwCiAgICAgICAgPyBgTWlzc2luZzogJHttaXNzaW5nLnNsaWNlKDAsMykuam9pbigiLCAiKX0ke21pc3NpbmcubGVuZ3RoID4gMyA/IGAgKCske21pc3NpbmcubGVuZ3RoLTN9IG1vcmUpYCA6ICIifS4gUGxlYXNlIGVudGVyIHZhbGlkIHZhbHVlcy5gCiAgICAgICAgOiAiUGxlYXNlIGVudGVyIHZhbGlkIHZhbHVlcyBpbiBhbGwgcmVxdWlyZWQgZmllbGRzLiI7CiAgICAgIHNldEludGVycCh7YzoiI2RjMjYyNiIsIHQ6IG1zZ30pOwogICAgICByZXR1cm47CiAgICB9CiAgICBzZXRSZXN1bHQocik7CiAgICBzZXRJbnRlcnAoY2FsYy5pbnRlcnByZXQociwgZmkpKTsKICB9CiAgZnVuY3Rpb24gcmVzZXQoKSB7IHNldElucHV0cyh7fSk7IHNldFJlc3VsdChudWxsKTsgc2V0SW50ZXJwKG51bGwpOyB9CgogIC8vIC0tIERJU0NMQUlNRVIgR0FURSAtLQogIGlmICghYWNjZXB0ZWQpIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7bWluSGVpZ2h0OiIxMDB2aCIsYmFja2dyb3VuZDoiI2Y3ZjhmYSIsZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiY2VudGVyIixqdXN0aWZ5Q29udGVudDoiY2VudGVyIixwYWRkaW5nOjI0LGZvbnRGYW1pbHk6IidHZW9yZ2lhJyxzZXJpZiJ9fT4KICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOjY2MCxiYWNrZ3JvdW5kOiIjZmZmIixib3JkZXI6IjFweCBzb2xpZCAjZTBlM2VhIixib3JkZXJSYWRpdXM6OCxwYWRkaW5nOmlzTW9iaWxlPyIyMHB4IDE2cHgiOiI0MHB4IDQ0cHgiLGJveFNoYWRvdzoiMCAycHggMjBweCByZ2JhKDAsMCwwLDAuMDYpIn19PgogICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMSxsZXR0ZXJTcGFjaW5nOiIwLjE1ZW0iLGNvbG9yOiIjOTk5Iix0ZXh0VHJhbnNmb3JtOiJ1cHBlcmNhc2UiLG1hcmdpbkJvdHRvbTo2LGZvbnRGYW1pbHk6IidDb3VyaWVyIE5ldycsbW9ub3NwYWNlIn19PkltcG9ydGFudCAgLS0gIFJlYWQgQmVmb3JlIFByb2NlZWRpbmc8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MjAsZm9udFdlaWdodDo3MDAsY29sb3I6IiMxMTEiLG1hcmdpbkJvdHRvbTo0fX0+RWR1Y2F0aW9uYWwgJiBMZWdhbCBEaXNjbGFpbWVyPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjExLGNvbG9yOiIjYmJiIixtYXJnaW5Cb3R0b206MjAsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UifX0+KGMpIDIwMjYgRHIuIEFzaGlzaCBQYXRlbC4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L2Rpdj4KICAgICAgICA8ZGl2IGRhdGEtcGVlci1yZXZpZXctMT0iIiBkYXRhLXBlZXItcmV2aWV3LTI9IiIgZGF0YS1wZWVyLXJldmlldy0zPSIiIHN0eWxlPXt7ZGlzcGxheToibm9uZSJ9fS8+CiAgICAgICAgPGRpdiBzdHlsZT17e21heEhlaWdodDozNDAsb3ZlcmZsb3dZOiJhdXRvIixmb250U2l6ZToxMi41LGNvbG9yOiIjNDQ0IixsaW5lSGVpZ2h0OjEuODUsbWFyZ2luQm90dG9tOjI4LHBhZGRpbmdSaWdodDo4LHdoaXRlU3BhY2U6InByZS1saW5lIixib3JkZXJUb3A6IjFweCBzb2xpZCAjZjBmMmY1IixwYWRkaW5nVG9wOjE2fX0+e0RJU0NMQUlNRVJfVEVYVH08L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPXt7Ym9yZGVyVG9wOiIxcHggc29saWQgI2VlZSIscGFkZGluZ1RvcDoyMCxkaXNwbGF5OiJmbGV4IixqdXN0aWZ5Q29udGVudDoiZmxleC1lbmQifX0+CiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjY2VwdGVkKHRydWUpfSBzdHlsZT17e2JhY2tncm91bmQ6IiMxMTEiLGNvbG9yOiIjZmZmIixib3JkZXI6Im5vbmUiLGJvcmRlclJhZGl1czo1LHBhZGRpbmc6IjExcHggMzJweCIsZm9udFNpemU6MTMsY3Vyc29yOiJwb2ludGVyIixmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSIsbGV0dGVyU3BhY2luZzoiMC4wNmVtIixmb250V2VpZ2h0OjYwMH19PgogICAgICAgICAgICBJIFVOREVSU1RBTkQgIC0tICBQUk9DRUVECiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwoKICAvLyAtLSBNQUlOIEFQUCAtLQogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7bWluSGVpZ2h0OiIxMDB2aCIsYmFja2dyb3VuZDoiI2Y3ZjhmYSIsZm9udEZhbWlseToiJ0hlbHZldGljYSBOZXVlJywnQXJpYWwnLHNhbnMtc2VyaWYiLGNvbG9yOiIjMTExIixkaXNwbGF5OiJmbGV4IixmbGV4RGlyZWN0aW9uOiJjb2x1bW4ifX0+CiAgICAgIHsvKiBIZWFkZXIgKi99CiAgICAgIDxoZWFkZXIgc3R5bGU9e3tiYWNrZ3JvdW5kOiIjZmZmIixib3JkZXJCb3R0b206IjFweCBzb2xpZCAjZTBlM2VhIixoZWlnaHQ6NTQsZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiY2VudGVyIixqdXN0aWZ5Q29udGVudDoic3BhY2UtYmV0d2VlbiIscGFkZGluZzoiMCAyMHB4IixmbGV4U2hyaW5rOjAscG9zaXRpb246InN0aWNreSIsdG9wOjAsekluZGV4OjEwMH19PgogICAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiJmbGV4IixhbGlnbkl0ZW1zOiJjZW50ZXIiLGdhcDoxNH19PgogICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRTaWRlYmFyT3BlbihvID0+ICFvKX0gc3R5bGU9e3tiYWNrZ3JvdW5kOiJub25lIixib3JkZXI6Im5vbmUiLGN1cnNvcjoicG9pbnRlciIsZm9udFNpemU6MTcsY29sb3I6IiM4ODgiLHBhZGRpbmc6IjRweCA2cHgiLGxpbmVIZWlnaHQ6MX19Pj08L2J1dHRvbj4KICAgICAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiJmbGV4IixhbGlnbkl0ZW1zOiJiYXNlbGluZSIsZ2FwOjEwfX0+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Zm9udFNpemU6aXNNb2JpbGU/MTM6MTUsZm9udFdlaWdodDo3MDAsY29sb3I6IiMxMTEiLGxldHRlclNwYWNpbmc6Ii0wLjAxZW0ifX0+e2lzTW9iaWxlPyJOZXBocm9DYWxjIFBybyI6Ik5lcGhyb0NhbGMgUHJvICAtLSAgUmVuYWwgJiBDbGluaWNhbCBEZWNpc2lvbiBTdXBwb3J0In08L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Zm9udFNpemU6MTAsY29sb3I6IiNiYmIiLGZvbnRGYW1pbHk6IidDb3VyaWVyIE5ldycsbW9ub3NwYWNlIn19PnYxMC4wPC9zcGFuPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjYmJiIixmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSIsdGV4dEFsaWduOiJyaWdodCIsbGluZUhlaWdodDoxLjV9fT4oYykgMjAyNiBEci4gQXNoaXNoIFBhdGVsPGJyLz5BbGwgcmlnaHRzIHJlc2VydmVkLjxzcGFuIGRhdGEtcGVlci1yZXZpZXctMT0iIiBkYXRhLXBlZXItcmV2aWV3LTI9IiIgZGF0YS1wZWVyLXJldmlldy0zPSIiIHN0eWxlPXt7ZGlzcGxheToibm9uZSJ9fS8+PC9kaXY+CiAgICAgIDwvaGVhZGVyPgoKICAgICAgey8qIFdhcm5pbmcgYmFyICovfQogICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZDoiI2ZmZmJlYiIsYm9yZGVyQm90dG9tOiIxcHggc29saWQgI2ZkZTY4YSIscGFkZGluZzoiN3B4IDIwcHgiLGZvbnRTaXplOjExLGNvbG9yOiIjOTI0MDBlIixkaXNwbGF5OiJmbGV4IixnYXA6OCxhbGlnbkl0ZW1zOiJmbGV4LXN0YXJ0In19PgogICAgICAgIDxzcGFuIHN0eWxlPXt7bWFyZ2luVG9wOjF9fT5bIV08L3NwYW4+CiAgICAgICAgPHNwYW4+PHN0cm9uZz5DbGluaWNhbCBEZWNpc2lvbiBTdXBwb3J0IFRvb2wuPC9zdHJvbmc+IEFsbCBvdXRwdXRzIHN1cHBvcnQsIG5vdCByZXBsYWNlLCBpbmRlcGVuZGVudCBjbGluaWNhbCBqdWRnZW1lbnQuIEluIGVtZXJnZW5jaWVzLCBpbW1lZGlhdGUgcmVzdXNjaXRhdGlvbiB0YWtlcyBhYnNvbHV0ZSBwcmVjZWRlbmNlLiAoYykgMjAyNiBEci4gQXNoaXNoIFBhdGVsLjxzcGFuIGRhdGEtcGVlci1yZXZpZXctMT0iIiBkYXRhLXBlZXItcmV2aWV3LTI9IiIgZGF0YS1wZWVyLXJldmlldy0zPSIiIHN0eWxlPXt7ZGlzcGxheToibm9uZSJ9fS8+PC9zcGFuPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiJmbGV4IixmbGV4OjEsb3ZlcmZsb3c6ImhpZGRlbiIsbWluSGVpZ2h0OjB9fT4KICAgICAgICB7LyogU2lkZWJhciAqL30KICAgICAgICAgIHtzaWRlYmFyT3BlbiYmPGFzaWRlIHN0eWxlPXt7d2lkdGg6aXNNb2JpbGU/Ijg1JSI6MjYwLGJhY2tncm91bmQ6IiNmZmYiLGJvcmRlclJpZ2h0OmlzTW9iaWxlPyJub25lIjoiMXB4IHNvbGlkICNlMGUzZWEiLG92ZXJmbG93WToiYXV0byIsZmxleFNocmluazowLGRpc3BsYXk6ImZsZXgiLGZsZXhEaXJlY3Rpb246ImNvbHVtbiIscG9zaXRpb246aXNNb2JpbGU/ImZpeGVkIjoic3RhdGljIix0b3A6aXNNb2JpbGU/NTQ6MCxsZWZ0OjAsYm90dG9tOjAsekluZGV4OmlzTW9iaWxlPzk5OjEsYm94U2hhZG93OmlzTW9iaWxlPyIycHggMCAxMnB4IHJnYmEoMCwwLDAsMC4xNSkiOiJub25lIn19PgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cGFkZGluZzoiMTBweCAxMnB4Iixib3JkZXJCb3R0b206IjFweCBzb2xpZCAjZjBmMmY1In19PgogICAgICAgICAgICAgIDxpbnB1dCB2YWx1ZT17c2VhcmNofSBvbkNoYW5nZT17ZSA9PiBzZXRTZWFyY2goZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj0iU2VhcmNoIGFsbCBjYWxjdWxhdG9ycy4uLiIKICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6IjEwMCUiLGJhY2tncm91bmQ6IiNmN2Y4ZmEiLGJvcmRlcjoiMXB4IHNvbGlkICNlMGUzZWEiLGJvcmRlclJhZGl1czo1LHBhZGRpbmc6IjdweCAxMHB4Iixmb250U2l6ZToxMixjb2xvcjoiIzMzMyIsb3V0bGluZToibm9uZSIsYm94U2l6aW5nOiJib3JkZXItYm94Iixmb250RmFtaWx5OiJpbmhlcml0In19Lz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIHtzZWFyY2ggJiYgZm91bmQgPyAoCiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twYWRkaW5nOiI4cHggMTJweCA0cHgiLGZvbnRTaXplOjEwLGNvbG9yOiIjYWFhIixsZXR0ZXJTcGFjaW5nOiIwLjFlbSIsdGV4dFRyYW5zZm9ybToidXBwZXJjYXNlIn19PlJlc3VsdHMgKHtmb3VuZC5sZW5ndGh9KTwvZGl2PgogICAgICAgICAgICAgICAge2ZvdW5kLm1hcChjID0+ICgKICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2MuaWR9IG9uQ2xpY2s9eygpID0+IHBpY2soYyl9IHN0eWxlPXt7cGFkZGluZzoiOHB4IDEycHgiLGN1cnNvcjoicG9pbnRlciIsYm9yZGVyTGVmdDpjaWQ9PT1jLmlkPyIzcHggc29saWQgIzExMSI6IjNweCBzb2xpZCB0cmFuc3BhcmVudCIsYmFja2dyb3VuZDpjaWQ9PT1jLmlkPyIjZjdmOGZhIjoidHJhbnNwYXJlbnQifX0+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjYWFhIixtYXJnaW5Cb3R0b206MX19PntjLnNsYWJlbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTMsY29sb3I6IiMxMTEiLGZvbnRXZWlnaHQ6Y2lkPT09Yy5pZD82MDA6NDAwfX0+e2MubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTAsY29sb3I6IiNiYmIifX0+e2MudGFnfTwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApIDogU0VDVElPTlMubWFwKHMgPT4gKAogICAgICAgICAgICAgIDxkaXYga2V5PXtzLmlkfT4KICAgICAgICAgICAgICAgIDxkaXYgb25DbGljaz17KCkgPT4gc2V0U2lkKHNpZD09PXMuaWQ/IiI6cy5pZCl9IHN0eWxlPXt7cGFkZGluZzoiOXB4IDEycHgiLGN1cnNvcjoicG9pbnRlciIsYm9yZGVyVG9wOiIxcHggc29saWQgI2YwZjJmNSIsZGlzcGxheToiZmxleCIsanVzdGlmeUNvbnRlbnQ6InNwYWNlLWJldHdlZW4iLGFsaWduSXRlbXM6ImNlbnRlciIsYmFja2dyb3VuZDpzaWQ9PT1zLmlkPyIjZjdmOGZhIjoiI2ZmZiJ9fT4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMSxmb250V2VpZ2h0OjYwMCxjb2xvcjpzaWQ9PT1zLmlkPyIjMTExIjoiIzY2NiIsbGV0dGVyU3BhY2luZzoiMC4wMmVtIix0ZXh0VHJhbnNmb3JtOiJ1cHBlcmNhc2UiLGxpbmVIZWlnaHQ6MS4zfX0+e3MubGFiZWx9PC9zcGFuPgogICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjY2NjIn19PntzLmNhbGNzLmxlbmd0aH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIHtzaWQ9PT1zLmlkICYmIHMuY2FsY3MubWFwKGMgPT4gKAogICAgICAgICAgICAgICAgICA8ZGl2IGtleT17Yy5pZH0gb25DbGljaz17KCkgPT4gcGljayh7Li4uYyxzaWQ6cy5pZCxzbGFiZWw6cy5sYWJlbH0pfSBzdHlsZT17e3BhZGRpbmc6IjdweCAxMnB4IDdweCAyMHB4IixjdXJzb3I6InBvaW50ZXIiLGJvcmRlckxlZnQ6Y2lkPT09Yy5pZD8iM3B4IHNvbGlkICMxMTEiOiIzcHggc29saWQgdHJhbnNwYXJlbnQiLGJhY2tncm91bmQ6Y2lkPT09Yy5pZD8iI2YwZjJmNSI6InRyYW5zcGFyZW50In19PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMyxjb2xvcjpjaWQ9PT1jLmlkPyIjMTExIjoiIzQ0NCIsZm9udFdlaWdodDpjaWQ9PT1jLmlkPzYwMDo0MDB9fT57Yy5uYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2FhYSIsbWFyZ2luVG9wOjF9fT57Yy50YWd9PC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICkpfQogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luVG9wOiJhdXRvIixwYWRkaW5nOiIxNHB4IDEycHgiLGJvcmRlclRvcDoiMXB4IHNvbGlkICNmMGYyZjUifX0+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjY2NjIixsaW5lSGVpZ2h0OjEuNyxmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSJ9fT4KICAgICAgICAgICAgICAgIChjKSAyMDI2IERyLiBBc2hpc2ggUGF0ZWw8YnIvPkFsbCByaWdodHMgcmVzZXJ2ZWQuCiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9hc2lkZT59CiAgICAgICAgICB7aXNNb2JpbGUmJnNpZGViYXJPcGVuJiY8ZGl2IG9uQ2xpY2s9eygpPT5zZXRTaWRlYmFyT3BlbihmYWxzZSl9IHN0eWxlPXt7cG9zaXRpb246ImZpeGVkIix0b3A6NTQsbGVmdDowLHJpZ2h0OjAsYm90dG9tOjAsYmFja2dyb3VuZDoicmdiYSgwLDAsMCwwLjMpIix6SW5kZXg6OTh9fS8+fQoKICAgICAgICB7LyogTWFpbiAqL30KICAgICAgICA8bWFpbiBzdHlsZT17e2ZsZXg6MSxvdmVyZmxvd1k6ImF1dG8iLHBhZGRpbmc6aXNNb2JpbGU/IjE2cHggMTJweCI6IjI4cHggMzJweCJ9fT4KICAgICAgICAgIHtjYWxjICYmICgKICAgICAgICAgICAgPGRpdiBzdHlsZT17e21heFdpZHRoOmlzTW9iaWxlPyIxMDAlIjo2NjB9fT4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luQm90dG9tOjI2fX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiY2VudGVyIixnYXA6OCxtYXJnaW5Cb3R0b206NixmbGV4V3JhcDoid3JhcCJ9fT4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMCxiYWNrZ3JvdW5kOiIjZjBmMmY1Iixjb2xvcjoiIzU1NSIsYm9yZGVyUmFkaXVzOjMscGFkZGluZzoiMnB4IDhweCIsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UifX0+e2NhbGMudGFnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMCxjb2xvcjoiI2JiYiJ9fT4qPC9zcGFuPgogICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e2ZvbnRTaXplOjEwLGNvbG9yOiIjYmJiIn19PntzZWM/LmxhYmVsfTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGgxIHN0eWxlPXt7Zm9udFNpemU6MjIsZm9udFdlaWdodDo3MDAsY29sb3I6IiMxMTEiLG1hcmdpbjoiMCAwIDNweCIsbGV0dGVyU3BhY2luZzoiLTAuMDJlbSJ9fT57Y2FsYy5uYW1lfTwvaDE+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6MTEsY29sb3I6IiM5OTkiLG1hcmdpbkJvdHRvbToxMixmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSJ9fT57Y2FsYy5yZWZ9PC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2JhY2tncm91bmQ6IiNmN2Y4ZmEiLGJvcmRlcjoiMXB4IHNvbGlkICNlMGUzZWEiLGJvcmRlclJhZGl1czo1LHBhZGRpbmc6IjEwcHggMTRweCIsbWFyZ2luQm90dG9tOjEwfX0+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZTo5LGNvbG9yOiIjYmJiIixsZXR0ZXJTcGFjaW5nOiIwLjEyZW0iLHRleHRUcmFuc2Zvcm06InVwcGVyY2FzZSIsbWFyZ2luQm90dG9tOjR9fT5Gb3JtdWxhPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMixjb2xvcjoiIzMzMyIsZm9udEZhbWlseToiJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2UiLGxpbmVIZWlnaHQ6MS43LHdoaXRlU3BhY2U6InByZS13cmFwIn19PntjYWxjLmZvcm11bGF9PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICB7Y2FsYy5ub3RlICYmIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMS41LGNvbG9yOiIjNjY2IixsaW5lSGVpZ2h0OjEuNzUsYm9yZGVyTGVmdDoiM3B4IHNvbGlkICNlMGUzZWEiLHBhZGRpbmdMZWZ0OjEwLG1hcmdpbkJvdHRvbToyfX0+e2NhbGMubm90ZX08L2Rpdj59CiAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiJncmlkIixnYXA6MTIsbWFyZ2luQm90dG9tOjIyfX0+CiAgICAgICAgICAgICAgICB7Y2FsYy5pbnB1dHMubWFwKGkgPT4gKAogICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aS5pZH0+CiAgICAgICAgICAgICAgICAgICAge2kudHlwZT09PSJjaGVja2JveCIgPyAoCiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e3tkaXNwbGF5OiJmbGV4IixhbGlnbkl0ZW1zOiJmbGV4LXN0YXJ0IixnYXA6OSxjdXJzb3I6InBvaW50ZXIiLHVzZXJTZWxlY3Q6Im5vbmUifX0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD17ISFpbnB1dHNbaS5pZF19IG9uQ2hhbmdlPXtlID0+IGlucChpLmlkLCBlLnRhcmdldC5jaGVja2VkKX0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDoyLHdpZHRoOjE0LGhlaWdodDoxNCxhY2NlbnRDb2xvcjoiIzExMSIsY3Vyc29yOiJwb2ludGVyIixmbGV4U2hyaW5rOjB9fS8+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7Zm9udFNpemU6MTMsY29sb3I6aW5wdXRzW2kuaWRdPyIjMTExIjoiIzU1NSIsbGluZUhlaWdodDoxLjR9fT57aS5sYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e3tkaXNwbGF5OiJibG9jayIsZm9udFNpemU6MTAsY29sb3I6IiM4ODgiLG1hcmdpbkJvdHRvbTo0LGxldHRlclNwYWNpbmc6IjAuMDRlbSIsdGV4dFRyYW5zZm9ybToidXBwZXJjYXNlIn19PgogICAgICAgICAgICAgICAgICAgICAgICAgIHtpLmxhYmVsfXtpLnVuaXQgPyA8c3BhbiBzdHlsZT17e2NvbG9yOiIjY2NjIixmb250V2VpZ2h0OjQwMCx0ZXh0VHJhbnNmb3JtOiJub25lIn19PiAoe2kudW5pdH0pPC9zcGFuPjoiIn0KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAge2kudHlwZT09PSJzZWxlY3QiID8gKAogICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e2lucHV0c1tpLmlkXXx8aS5vcHRpb25zWzBdfSBvbkNoYW5nZT17ZSA9PiBpbnAoaS5pZCwgZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3t3aWR0aDoiMTAwJSIsYmFja2dyb3VuZDoiI2ZmZiIsYm9yZGVyOiIxcHggc29saWQgI2Q0ZDhlMCIsYm9yZGVyUmFkaXVzOjUscGFkZGluZzoiOXB4IDExcHgiLGZvbnRTaXplOjEzLGNvbG9yOiIjMTExIixvdXRsaW5lOiJub25lIixmb250RmFtaWx5OiJpbmhlcml0IixjdXJzb3I6InBvaW50ZXIifX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aS5vcHRpb25zLm1hcChvID0+IDxvcHRpb24ga2V5PXtvfSB2YWx1ZT17b30+e299PC9vcHRpb24+KX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT17aW5wdXRzW2kuaWRdfHwiIn0gb25DaGFuZ2U9e2UgPT4gaW5wKGkuaWQsIGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9e2kucGh9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e3dpZHRoOiIxMDAlIixiYWNrZ3JvdW5kOiIjZmZmIixib3JkZXI6IjFweCBzb2xpZCAjZDRkOGUwIixib3JkZXJSYWRpdXM6NSxwYWRkaW5nOiI5cHggMTFweCIsZm9udFNpemU6MTMsY29sb3I6IiMxMTEiLG91dGxpbmU6Im5vbmUiLGZvbnRGYW1pbHk6ImluaGVyaXQiLGJveFNpemluZzoiYm9yZGVyLWJveCJ9fS8+CiAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICA8Lz4KICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZmxleCIsZ2FwOjksbWFyZ2luQm90dG9tOjIyfX0+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2dvfSBzdHlsZT17e2JhY2tncm91bmQ6IiMxMTEiLGNvbG9yOiIjZmZmIixib3JkZXI6Im5vbmUiLGJvcmRlclJhZGl1czo1LHBhZGRpbmc6IjEwcHggMjhweCIsZm9udFNpemU6MTMsY3Vyc29yOiJwb2ludGVyIixmb250RmFtaWx5OiJpbmhlcml0Iixmb250V2VpZ2h0OjUwMH19PgogICAgICAgICAgICAgICAgICBDYWxjdWxhdGUKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtyZXNldH0gc3R5bGU9e3tiYWNrZ3JvdW5kOiIjZmZmIixjb2xvcjoiIzU1NSIsYm9yZGVyOiIxcHggc29saWQgI2Q0ZDhlMCIsYm9yZGVyUmFkaXVzOjUscGFkZGluZzoiMTBweCAxOHB4Iixmb250U2l6ZToxMyxjdXJzb3I6InBvaW50ZXIiLGZvbnRGYW1pbHk6ImluaGVyaXQifX0+CiAgICAgICAgICAgICAgICAgIFJlc2V0CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAge3Jlc3VsdCAmJiAoCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7YmFja2dyb3VuZDoiI2ZmZiIsYm9yZGVyOiIxcHggc29saWQgI2UwZTNlYSIsYm9yZGVyUmFkaXVzOjYscGFkZGluZzoiMTZweCAyMHB4IixtYXJnaW5Cb3R0b206MTB9fT4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjksY29sb3I6IiNhYWEiLGxldHRlclNwYWNpbmc6IjAuMTJlbSIsdGV4dFRyYW5zZm9ybToidXBwZXJjYXNlIixtYXJnaW5Cb3R0b206Nn19PlJlc3VsdDwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheToiZmxleCIsYWxpZ25JdGVtczoiYmFzZWxpbmUiLGdhcDoxMCxmbGV4V3JhcDoid3JhcCJ9fT4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17e2ZvbnRTaXplOjM0LGZvbnRXZWlnaHQ6NzAwLGNvbG9yOiIjMTExIixsZXR0ZXJTcGFjaW5nOiItMC4wMmVtIixsaW5lSGVpZ2h0OjF9fT57cmVzdWx0LnZhbH08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tmb250U2l6ZToxMyxjb2xvcjoiIzg4OCJ9fT57cmVzdWx0LnVuaXR9PC9zcGFuPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAge3Jlc3VsdC5zZWMgJiYgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjExLGNvbG9yOiIjYWFhIixtYXJnaW5Ub3A6Nixmb250RmFtaWx5OiInQ291cmllciBOZXcnLG1vbm9zcGFjZSJ9fT57cmVzdWx0LnNlY308L2Rpdj59CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICB7aW50ZXJwICYmICgKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tib3JkZXJMZWZ0OmA0cHggc29saWQgJHtpbnRlcnAuY31gLGJhY2tncm91bmQ6IiNmZmYiLGJvcmRlcjpgMXB4IHNvbGlkICR7aW50ZXJwLmN9MjJgLGJvcmRlckxlZnRDb2xvcjppbnRlcnAuYyxib3JkZXJMZWZ0V2lkdGg6NCxib3JkZXJSYWRpdXM6IjAgNnB4IDZweCAwIixwYWRkaW5nOiIxNHB4IDE4cHgiLG1hcmdpbkJvdHRvbToyMn19PgogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7Zm9udFNpemU6OSxjb2xvcjoiI2FhYSIsbGV0dGVyU3BhY2luZzoiMC4xMmVtIix0ZXh0VHJhbnNmb3JtOiJ1cHBlcmNhc2UiLG1hcmdpbkJvdHRvbTo2fX0+Q2xpbmljYWwgSW50ZXJwcmV0YXRpb248L2Rpdj4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2ZvbnRTaXplOjEzLGNvbG9yOiIjMzMzIixsaW5lSGVpZ2h0OjEuOH19PntpbnRlcnAudH08L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tmb250U2l6ZToxMC41LGNvbG9yOiIjYmJiIixib3JkZXJUb3A6IjFweCBzb2xpZCAjZjBmMmY1IixwYWRkaW5nVG9wOjE0LGxpbmVIZWlnaHQ6MS44fX0+CiAgICAgICAgICAgICAgICA8c3Ryb25nIHN0eWxlPXt7Y29sb3I6IiNjY2MifX0+RGlzY2xhaW1lcjo8L3N0cm9uZz4gVGhpcyB0b29sIHN1cHBvcnRzIGNsaW5pY2FsIGRlY2lzaW9uLW1ha2luZyBhbG9uZ3NpZGUsIG5vdCBpbiBwbGFjZSBvZiwgYSB0aG9yb3VnaCBjbGluaWNhbCBhc3Nlc3NtZW50LiBBbGwgb3V0cHV0cyBzaG91bGQgYmUgaW50ZXJwcmV0ZWQgaW4gY29udGV4dCBhbmQgaW4gYWNjb3JkYW5jZSB3aXRoIGN1cnJlbnQgYXBwbGljYWJsZSBpbnRlcm5hdGlvbmFsIGFuZCBuYXRpb25hbCBndWlkZWxpbmVzIGFuZCB5b3VyIGluc3RpdHV0aW9uJ3MgcHJvdG9jb2xzLiBTb3VyY2U6IHtjYWxjLnJlZn0uIDxzdHJvbmc+KGMpIDIwMjYgRHIuIEFzaGlzaCBQYXRlbC4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3N0cm9uZz4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICApfQogICAgICAgIDwvbWFpbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9CgoKY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJvb3QiKSk7CnJvb3QucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQXBwKSk7Cg==</script>
</body>
</html>